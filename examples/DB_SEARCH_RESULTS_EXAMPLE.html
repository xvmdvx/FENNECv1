<!DOCTYPE html>
<!-- saved from url=(0056)https://db.incfile.com/incfile/order/detail/225070363866 -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="csrf-token" content="FMsIbNcbHZyJBgUzhyorufztj2Hmbox9tTazS2tH">
    <title>PANTHER MAMA &amp; KIDS LLC - 225070363866</title>
    <link rel="shortcut icon" type="image/png" href="https://db.incfile.com/favicon.png">
    <link rel="stylesheet" href="./DB_SEARCH_RESULTS_EXAMPLE_files/css">

    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">

    <!-- WEBPACK COMPILED CSS -->
    <link href="./DB_SEARCH_RESULTS_EXAMPLE_files/compiled.css" rel="stylesheet">

    <style>
        .brand_logo_coverwallet {
            max-width: 130px !important;
        }

        .forwarded_orders td {
            vertical-align: middle !important;
            width: 200px;
        }

        .forwarded_orders .box-title {
            margin-bottom: 0px;
        }

    </style>

    
    <script src="./DB_SEARCH_RESULTS_EXAMPLE_files/vendor.js"></script>
            <link rel="stylesheet" href="./DB_SEARCH_RESULTS_EXAMPLE_files/intlTelInput.css">
           <link rel="stylesheet" href="./DB_SEARCH_RESULTS_EXAMPLE_files/dropify.min.css">
    <style>
        #page-wrapper {
            padding-bottom: 30px !important;
        }
        .details-control {
            cursor: pointer;
        }
        .customvtab .tabs-vertical li.active a, .customvtab .tabs-vertical li.active a:focus, .customvtab .tabs-vertical li.active a:hover {
            font-weight: 500;
        }
        .m_compname {
            color: #2cabe3 !important;
        }
        .m_compname:hover {
            color: #313131 !important;
        }
        .grey-out,
        .grey-out:hover,
        .grey-out:active,
        .grey-out:focus {
            background-color: #808080!important;
            border-color: #808080!important;
        }
        .steamline.order-history-box .sl-left {
            float: left;
            margin-left: -17px;
            z-index: 1;
            width: 30px;
            line-height: 30px;
            text-align: center;
            height: 30px;
            border-radius: 100%;
            color: #fff;
            margin-right: 15px;
        }
        .modal-fullscreen .close{
            opacity: 1; color:#2cabe3
        }
        .header-custom .btn{
            padding: 6px 9px
        }
        #list-compliance-in-modal .fa-check-circle {
            color: #3cb81e;
        }
        #list-compliance-in-modal .fa-times-circle {
            color: #ff7676;
        }
        #list-compliance-in-modal .fa-ban {
            color: #333;
        }
        #list-compliance-in-modal .fa-clock-o {
            color: #2cabe3;
        }
        .modal-alert {
            text-align: center;
            padding: 25px;
        }
        .modal-alert:before {
            content: '';
            display: inline-block;
            height: 100%;
            vertical-align: middle;
            margin-right: -4px;
        }
        .modal-alert .modal-dialog {
            display: inline-block;
            text-align: left;
            vertical-align: middle;
            width: 478px;
        }
        .modal-alert .modal-footer {
            text-align: center;
            border: none;
        }
        .modal-alert .modal-content {
            padding: 25px 25px 10px 25px;
            border-radius: 5px;
        }
        .modal-alert .warning-icon {
            width: 80px;
            height: 80px;
            border: 4px solid #F8D486;
            border-radius: 50%;
            position: relative;
            -webkit-box-sizing: content-box;
            box-sizing: content-box;
            display: inline-block;
        }
        .modal-alert .warning-icon .body {
            position: absolute;
            width: 5px;
            height: 47px;
            left: 50%;
            top: 10px;
            border-radius: 2px;
            margin-left: -2px;
            background-color: #F8D486;
        }
        .modal-alert .warning-icon .dot {
            position: absolute;
            width: 7px;
            height: 7px;
            border-radius: 50%;
            margin-left: -3px;
            left: 50%;
            bottom: 10px;
            background-color: #F8D486;
        }
        .nav-arrow {
            margin: 15px;
        }
        .nav-arrow i {
            position: relative;
            bottom: -4px;
        }
        .users-tab {
            margin-top: 30px
        }
        .users-tab form {
            margin-top: 0 !important;
            display: inline-block;
        }
        .clear-div {
            clear:both;;
            height: 10px;;
        }
        .clear-div-small {
            clear:both;;
            height: 5px;;
        }
        .btn-gold {
            background: #FFD700;
            border: 1px solid #D4AF37;
            color: #333 !important;
        }
        .break-word {
            overflow-wrap: break-word;
            word-wrap: break-word;
            -ms-word-break: break-all;
            /* This is the dangerous one in WebKit, as it breaks things wherever */
            word-break: break-all;
            /* Instead use this non-standard one: */
            word-break: break-word;
            /* Adds a hyphen where the word breaks, if supported (No Blink) */
            hyphens: auto;
        }
        .circle-score{
            display: inline-block;
            width: 30px;
            height: 30px;
            border-radius:20px;
            text-align:center;
            font-size: 16px;
            line-height: 30px;
            margin:0 auto;
        }
        .green {
            background-color: #73eb58;
            color:black;
        }
        .red {
            background-color:#e72525;
            color:white;
        }
        .yellow {
            background-color: #e5f131;
            color: black;
        }
        @media  print{
            #main-tab-information{
                display: none !important
            }
            #main-tab-content .tab-pane{
                display: none;
            }
            #main-tab-content .tab-pane.print{
                display: block !important;
            }
            #main-tab-content .tab-pane .col-sm-6{
                width: 100% !important
            }
            .header-custom{
                display: none !important
            }
            #page-wrapper{
                margin-top: 0px
            }
            .btn-edit{
                display: none !important
            }
            .row m-t-30{
                margin-top: 0px !important
            }
            #modalPrinting{
                display: none !important;
            }
            .box-title{
                margin-top: 40px;
            }
            #main-tab-content .tab-pane .form-group .control-label.col-md-5{
                margin-left: 30px;
            }
            #main-tab-content .tab-pane .form-group .control-label{
                width: 150px !important;
                float : left;
                font-size: 14px !important;
            }
            #main-tab-content .tab-pane .form-group .col-md-8,
            #main-tab-content .tab-pane .form-group .col-md-7{
                float : left;
            }
            #main-tab-content .tab-pane .form-group .col-md-8 p,
            #main-tab-content .tab-pane .form-group .col-md-7 p{
                padding-top: 0px !important;
                font-size: 14px !important;
            }
            .btn-danger{
                display: none
            }
            .no-print{
                display: none;
            }
            a.btn{
                display: none
            }
        }
        @media  screen and (max-width:992px){
            .button-float{
                float:right;
            }
        }
        @media  screen and (min-width:1500px){
            .button-float{
                float:right;
            }
            .button-text-od{
                font-size: 12px;
            }
        }
        @media  screen and (min-width:992px) and (max-width:995px){
            .button-text-od{
                font-size: 8px;
            }
        }
        @media  screen and (min-width:992px) and (max-width:1200px){
            .button-text-od{
                margin-top:8px;
            }
        }
        @media  screen and (min-width:1202px) and (max-width:1230px){
            .button-text-responsive{
                font-size: .9vw;
                margin-top:10px;
            }
        }
        @media  screen and (min-width:1202px) and (max-width:1496px){
            .margin-top-button{
                margin-top:10px;
            }
        }
        #modalPrinting #print-list .row{
            margin-bottom: 25px
        }
        #modalPrinting #print-list input{
            display: inline !important;
            width: 16px;
            height: 16px;
        }
        /** Subscriptions tab **/
        .table-list-of-subs td, .table-list-of-domain td{
            vertical-align: middle !important;
            padding: 8px !important;
        }
        .more-sub{
            display: flex;
        }
        .more-sub span {
            padding: 3px 15px;
            width: 33.33%;
            text-align: center;
        }
        .btn-view-detail-sub{
            position: relative;
        }
        .btn-view-detail-sub:before{
            font-family:'FontAwesome';
            font-size:20px;
            content: "\f107";
        }
        .btn-view-detail-sub.expanded:before{
            content:"\f106";
        }
        .text-green {
            color: #3cb81e;
        }
        .text-orange {
            color: #F8B400;
        }
        .text-red{
            color: #EF4836;
        }
        .invalid-phone {
            border: 1px solid red;
        }
        /* Add custom styles for Dropzone containers */
        .owner_dropzone, .applicant_dropzone {
            border: 2px dashed #ccc;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            font-size: 16px;
            color: #555;
            margin-top: 15px;
            min-height: 150px;
            position: relative;
        }

        .owner_dropzone:hover, .applicant_dropzone:hover {
            background-size: 30px 30px;
            background-image: -webkit-linear-gradient(135deg, #F6F6F6 25%, transparent 25%, transparent 50%, #F6F6F6 50%, #F6F6F6 75%, transparent 75%, transparent);
            background-image: linear-gradient(-45deg, #F6F6F6 25%, transparent 25%, transparent 50%, #F6F6F6 50%, #F6F6F6 75%, transparent 75%, transparent);
            -webkit-animation: stripes 2s linear infinite;
            animation: stripes 2s linear infinite;
            cursor: pointer;
        }

        .dz-success-mark, .dz-error-mark {
            display: none;
        }

        .dfTex {
            font-size: 14px;
            color: #888;
            text-align: center;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .dfTex i {
            font-size: 40px;
            color: #ccc;
            margin-bottom: 10px;
        }

        .owner_dropzone .dz-preview, .applicant_dropzone .dz-preview {
            margin: 10px 0;
            text-align: center;
        }

        .owner_dropzone .dz-remove, .applicant_dropzone .dz-remove {
            margin-top: 10px;
            cursor: pointer;
            color: #f44336;
        }

        .owner_dropzone .dz-preview .dz-image img, .applicant_dropzone .dz-preview .dz-image img {
            max-width: 100px;
            max-height: 100px;
            border-radius: 8px;
        }

        .icon-sfb {
            content: url('/static/order/dashboard/img/services/state-filings-bundle/bizee_fillings_logo_black.png');
            max-height: 3rem;
        }
    </style>
    <link rel="stylesheet" href="./DB_SEARCH_RESULTS_EXAMPLE_files/zoom.css">
            <style>
            div.ccjs-card{
                width: 80% !important;
                margin: 0 !important;
                font-family: inherit;
                font-size: 14px;
                background-color: #fff;
                border: none !important;
                border-radius: 0 !important;
            }
            div.ccjs-card label{
                top: 7px !important;
                font-size: 14px !important;
                text-align: left;
                font-weight: 500;
                color:#333;
            }
            .ccjs-csc input, .ccjs-number input{
                top: 20px !important;
                border-radius: 4px !important;
                height: 25px !important;
                padding: 6px 12px !important;
                font-size: 14px !important;
                font-family: inherit !important;
            }
            .ccjs-number{
                left: 0 !important;;
                right: auto;
            }
            .ccjs-number input{
                width: 13.35em !important;
                text-align: center !important;
            }
            .ccjs-csc{
                text-align: left !important;
            }
            .ccjs-csc input{
                text-align: center !important;
                width: 69px !important;
                border-radius: 4px 0 0 4px !important;
                border-right: none !important;
            }
            .ccjs-card input:focus, .ccjs-card-style input:focus, .ccjs-card select:focus, .ccjs-card-style select:focus, .ccjs-card button:focus, .ccjs-card-style button:focus {
                border: 1px solid #313131;
                box-shadow: none !important;
            }
            .ccjs-csc-help{
                width: 40px !important;
                right: -4px !important;
                top: 27px !important;
                height: 37px !important;
            }
            .ccjs-card .ccjs-expiration{
                position: initial;
                width: 100%!important;
                left: 0!important;
                bottom: 6em!important;
            }
            .ccjs-card .ccjs-month{
                height: 25px;
                border-radius: 4px;
                padding: 6px 12px;
                display: inline-block;
                width: 49% !important;
                float: left;
            }
            .ccjs-card .ccjs-expiration .ccjs-year{
                display: inline-block;
                width: 30%!important;
                float: right;
                height: 25px;
                border-radius: 4px;
                padding: 6px 12px;
            }
        </style>
    
    <script>
        const isProduction = true;
        const order = {
            'orderOrigin': 0,
            'ordernum': 225070363866,
            'orderType': "Silver",
            'businessBanking': 2,
            'tuneTransactionId': null,
        };
    </script>
    <script src="./DB_SEARCH_RESULTS_EXAMPLE_files/tune.js"></script>
    <script>
        tune.init({
            isProduction,
            origin: order.orderOrigin
        });
    </script>
    <script src="./DB_SEARCH_RESULTS_EXAMPLE_files/zoom.js"></script>
<style>.modal{color:#797979}</style><style>.dropdown-menu>li>span>a{clear:both;color:#333;display:block;font-weight:400;line-height:1.428571429;padding:3px 20px;white-space:nowrap}</style><style id="copilot-db-padding">
                        #frm-search-order { margin-right: 340px !important; }
                        .modal-fullscreen { width: calc(100% - 340px); }
                    </style></head>

<body class="fix-header" style="transition: margin-right 0.2s; margin-right: 340px;">
 <!-- ============================================================== -->
 <!-- Preloader -->
 <!-- ============================================================== -->
 <div class="preloader" style="display: none; z-index: 100;">
     <svg class="circular" viewBox="25 25 50 50">
         <circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="2" stroke-miterlimit="10"></circle>
     </svg>
 </div>

 <div id="wrapper">
     <nav class="navbar navbar-default navbar-static-top m-b-0">
         <div class="navbar-header">
             <div class="top-left-part text-center" style="border-right:none">
                 <!-- Logo -->
                 <a class="logo" href="https://db.incfile.com/">
                     <span class="hidden-xs">
                         <img src="./DB_SEARCH_RESULTS_EXAMPLE_files/incfile-no-tagline.svg" alt="home" class="light-logo" style="max-width: 100px;">
                     </span>
                 </a>
             </div>

             <ul class="nav navbar-top-links navbar-right pull-right">
                 <li>
                     <div id="frm-search-order" class="app-search hidden-sm hidden-xs m-r-10">
                         <input type="text" name="search" id="search_field" placeholder="Search for an order" class="form-control text-info">
                         <a class="btn btn-info" href="javascript:void(0)" id="mainSearching">Go</a>
                     </div>
                 </li>
                 <li class="dropdown logout">
                     <a class="dropdown-toggle profile-pic" data-toggle="dropdown" href="javascript:void(0)"><b class="hidden-xs">moises d</b><span class="caret"></span> </a>
                     <ul class="dropdown-menu dropdown-user animated flipInY logout">
                         <li><a href="https://db.incfile.com/logout"><i class="fa fa-power-off"></i> Logout</a></li>
                     </ul>
                 </li>
                 <!-- /.dropdown -->
             </ul>
         </div>

     </nav>

     <div class="navbar-default sidebar" role="navigation">
    <div class="sidebar-nav">
        <div class="sidebar-head">
            <h3>
                <span class="fa-fw open-close">
                    <i class="ti-menu hidden-xs"></i>
                    <i class="ti-close visible-xs"></i>
                </span>
                <span class="hide-menu">Navigation</span>
            </h3>
        </div>

        <ul class="nav" id="side-menu">
            
                            <li>
                    <a href="javascript:void(0)" class="waves-effect">
                        <i class="mdi mdi-printer fa-fw" data-icon="v"></i>
                        <span class="hide-menu"> Printing</span>
                    </a>
                    <ul class="nav nav-second-level">
                                                    <li><a href="https://db.incfile.com/incfile/order/print">Print Orders</a></li>
                                                                            <li><a href="https://db.incfile.com/orders/print/fedex?ordernum=225070363866">Print Fedex Labels</a></li>
                                                                            <li><a href="https://db.incfile.com/incfile/labels">Print Mailing Labels</a></li>
                                            </ul>
                </li>
            
            
            <li>
                <a href="javascript:void(0)" class="waves-effect">
                    <i class="mdi mdi-calendar-clock fa-fw" data-icon="v"></i>
                    <span class="hide-menu">Orders</span>
                </a>
                <ul class="nav nav-second-level">
                                            <li><a href="https://db.incfile.com/order-tracker/orders/order-search">Search</a></li>
                                                                <li><a href="https://db.incfile.com/order-tracker/orders/fraud">Fraud</a></li>
                                                                <li><a href="https://db.incfile.com/order-tracker/orders/misc">Parent - Child</a></li>
                                                                <li><a href="https://db.incfile.com/order-tracker/overdue-order">Tracking</a></li>
                                                                <li><a href="https://db.incfile.com/incfile/order/resolved">Resolved</a></li>
                                                                <li><a href="https://db.incfile.com/incfile/finishing-queue">Finishing</a></li>
                                                                <li><a href="https://db.incfile.com/order-tracker/orders/foreign-ein-monitor">Foreign EIN Monitor</a></li>
                                        <li><a href="https://db.incfile.com/incfile/companies">Companies</a></li>
                    <li><a href="https://db.incfile.com/order-tracker/orders/order-queue">Order Queue</a></li>
                </ul>
            </li>

            
                            <li>
                    <a href="javascript:void(0)" class="waves-effect">
                        <i class="mdi mdi-lightbulb-outline fa-fw" data-icon="v"></i> <span class="hide-menu">Resources Guide</span>
                    </a>

                    <ul class="nav nav-second-level scroll_states" style="height: 500px !important; overflow-y: scroll;">
                                                    <li><a href="https://db.incfile.com/resources-guide/?state=AL">Alabama</a></li>
                                                    <li><a href="https://db.incfile.com/resources-guide/?state=AK">Alaska</a></li>
                                                    <li><a href="https://db.incfile.com/resources-guide/?state=AZ">Arizona</a></li>
                                                    <li><a href="https://db.incfile.com/resources-guide/?state=AR">Arkansas</a></li>
                                                    <li><a href="https://db.incfile.com/resources-guide/?state=CA">California</a></li>
                                                    <li><a href="https://db.incfile.com/resources-guide/?state=CO">Colorado</a></li>
                                                    <li><a href="https://db.incfile.com/resources-guide/?state=CT">Connecticut</a></li>
                                                    <li><a href="https://db.incfile.com/resources-guide/?state=DE">Delaware</a></li>
                                                    <li><a href="https://db.incfile.com/resources-guide/?state=FL">Florida</a></li>
                                                    <li><a href="https://db.incfile.com/resources-guide/?state=GA">Georgia</a></li>
                                                    <li><a href="https://db.incfile.com/resources-guide/?state=HI">Hawaii</a></li>
                                                    <li><a href="https://db.incfile.com/resources-guide/?state=ID">Idaho</a></li>
                                                    <li><a href="https://db.incfile.com/resources-guide/?state=IL">Illinois</a></li>
                                                    <li><a href="https://db.incfile.com/resources-guide/?state=IN">Indiana</a></li>
                                                    <li><a href="https://db.incfile.com/resources-guide/?state=IA">Iowa</a></li>
                                                    <li><a href="https://db.incfile.com/resources-guide/?state=KS">Kansas</a></li>
                                                    <li><a href="https://db.incfile.com/resources-guide/?state=KY">Kentucky</a></li>
                                                    <li><a href="https://db.incfile.com/resources-guide/?state=LA">Louisiana</a></li>
                                                    <li><a href="https://db.incfile.com/resources-guide/?state=ME">Maine</a></li>
                                                    <li><a href="https://db.incfile.com/resources-guide/?state=MD">Maryland</a></li>
                                                    <li><a href="https://db.incfile.com/resources-guide/?state=MA">Massachusetts</a></li>
                                                    <li><a href="https://db.incfile.com/resources-guide/?state=MI">Michigan</a></li>
                                                    <li><a href="https://db.incfile.com/resources-guide/?state=MN">Minnesota</a></li>
                                                    <li><a href="https://db.incfile.com/resources-guide/?state=MS">Mississippi</a></li>
                                                    <li><a href="https://db.incfile.com/resources-guide/?state=MO">Missouri</a></li>
                                                    <li><a href="https://db.incfile.com/resources-guide/?state=MT">Montana</a></li>
                                                    <li><a href="https://db.incfile.com/resources-guide/?state=NE">Nebraska</a></li>
                                                    <li><a href="https://db.incfile.com/resources-guide/?state=NV">Nevada</a></li>
                                                    <li><a href="https://db.incfile.com/resources-guide/?state=NH">New Hampshire</a></li>
                                                    <li><a href="https://db.incfile.com/resources-guide/?state=NJ">New Jersey</a></li>
                                                    <li><a href="https://db.incfile.com/resources-guide/?state=NM">New Mexico</a></li>
                                                    <li><a href="https://db.incfile.com/resources-guide/?state=NY">New York</a></li>
                                                    <li><a href="https://db.incfile.com/resources-guide/?state=NC">North Carolina</a></li>
                                                    <li><a href="https://db.incfile.com/resources-guide/?state=ND">North Dakota</a></li>
                                                    <li><a href="https://db.incfile.com/resources-guide/?state=OH">Ohio</a></li>
                                                    <li><a href="https://db.incfile.com/resources-guide/?state=OK">Oklahoma</a></li>
                                                    <li><a href="https://db.incfile.com/resources-guide/?state=OR">Oregon</a></li>
                                                    <li><a href="https://db.incfile.com/resources-guide/?state=PA">Pennsylvania</a></li>
                                                    <li><a href="https://db.incfile.com/resources-guide/?state=RI">Rhode Island</a></li>
                                                    <li><a href="https://db.incfile.com/resources-guide/?state=SC">South Carolina</a></li>
                                                    <li><a href="https://db.incfile.com/resources-guide/?state=SD">South Dakota</a></li>
                                                    <li><a href="https://db.incfile.com/resources-guide/?state=TN">Tennessee</a></li>
                                                    <li><a href="https://db.incfile.com/resources-guide/?state=TX">Texas</a></li>
                                                    <li><a href="https://db.incfile.com/resources-guide/?state=UT">Utah</a></li>
                                                    <li><a href="https://db.incfile.com/resources-guide/?state=VT">Vermont</a></li>
                                                    <li><a href="https://db.incfile.com/resources-guide/?state=VA">Virginia</a></li>
                                                    <li><a href="https://db.incfile.com/resources-guide/?state=WA">Washington</a></li>
                                                    <li><a href="https://db.incfile.com/resources-guide/?state=DC">Washington DC</a></li>
                                                    <li><a href="https://db.incfile.com/resources-guide/?state=WV">West Virginia</a></li>
                                                    <li><a href="https://db.incfile.com/resources-guide/?state=WI">Wisconsin</a></li>
                                                    <li><a href="https://db.incfile.com/resources-guide/?state=WY">Wyoming</a></li>
                                            </ul>
                </li>
            
            
                            <li>
                    <a href="javascript:void(0)" class="waves-effect">
                        <i class="mdi mdi-account-multiple fa-fw" data-icon="v"></i>
                        <span class="hide-menu"> Administrator</span>
                    </a>
                    <ul class="nav nav-second-level">
                        
                        
                                                    <li><a href="https://db.incfile.com/compliance/list">Compliance</a></li>
                        
                                                    <li><a href="https://db.incfile.com/ar-tool">Annual Report Questions</a></li>
                        
                        
                        <li><a href="https://db.incfile.com/expedited-fee-refunds/expedited-fee-refunds">Expedited Fee Refunds</a></li>

                        
                        
                        
                        
                                            </ul>
                </li>
            
            
                            <li>
                    <a href="javascript:void(0)" class="waves-effect">
                        <i class="mdi mdi-account-box-outline fa-fw" data-icon="v"></i> <span class="hide-menu">Registered Agent</span>
                    </a>
                    <ul class="nav nav-second-level scroll_states">
                                                    <li><a href="https://db.incfile.com/incfile/registered-agent">Registered Agents</a></li>
                        
                        <li><a href="https://db.incfile.com/incfile/registered-agent/subscriptions/renewals">Subscription Renewals</a></li>
                        <li><a href="https://db.incfile.com/incfile/registered-agent/subscriptions/expire-soon">Service Expire Soon</a></li>
                        <li><a href="https://db.incfile.com/incfile/orders/reporting/ra-renewals">Monthly Renewals Report</a></li>

                                                                                    <li><a href="https://db.incfile.com/order-tracker/orders/staged-for-resignation">Staged For Resignation</a></li>
                                                        
                                                            <li><a href="https://db.incfile.com/admin/mass-resign">Mass Agent Resign</a></li>
                                                    
                        <li><a href="https://db.incfile.com/incfile/registered-agent/orders/compliance-company-info">Compliance Company info</a></li>
                        <li><a href="https://db.incfile.com/incfile/registered-agent/orders/compliance-member-info">Compliance Members info</a></li>
                    </ul>
                </li>
            
            
                            <li>
                    <a href="javascript:void(0)" class="waves-effect">
                        <i class="mdi mdi-mailbox fa-fw" data-icon="v"></i>
                        <span class="hide-menu">Virtual Address</span>
                    </a>
                    <ul class="nav nav-second-level">
                                                    <li><a href="https://db.incfile.com/incfile/virtual-address">Virtual Address</a></li>
                        
                        
                        <li><a href="https://db.incfile.com/va-contact-list">Virtual Address Contacts</a></li>
                        <li><a href="https://db.incfile.com/incfile/virtual-address/compliance-panel/1583">Compliance Panel</a></li>
                    </ul>
                </li>
            
            
                            <li>
                    <a href="javascript:void(0)" class="waves-effect">
                        <i class="mdi mdi-wrench" data-icon="v"></i>
                        <span class="hide-menu"> Tools</span>
                    </a>
                    <ul class="nav nav-second-level">
                                                    <li><a href="https://db.incfile.com/transaction/transaction/reason">Transactional Emails</a></li>
                        
                        <li><a href="https://db.incfile.com/vendors">Vendors</a></li>
                        <li><a href="https://db.incfile.com/signature-requests/signature-requests">Signature Requests</a></li>

                        
                                                    <li><a href="https://db.incfile.com/db-tools/scan-email-address">Generic Email Address</a></li>
                        
                        
                        <li><a href="https://db.incfile.com/training">Training Document</a></li>
                        <li><a href="https://db.incfile.com/report/gmb/submitted">Google My Business</a></li>
                        <li><a href="https://db.incfile.com/order-average">Misc Filing Time</a></li>
                        <li><a href="https://db.incfile.com/forwarded-orders">Forwarded Orders</a></li>
                        <li><a href="https://db.incfile.com/fedex/upload">FedEx Upload</a></li>
                        <li><a href="https://db.incfile.com/commercial-clients">Commercial Clients</a></li>
                        <li><a href="https://db.incfile.com/domain-and-email">Domain and Business Email</a></li>
                        <li><a href="https://db.incfile.com/developer/feature-flags">Feature Flags</a></li>
                        <li><a href="https://db.incfile.com/cost/web-reconciliation/upload">Invoice Reconciliation</a></li>
                        <li><a href="https://db.incfile.com/crons">Automation Crons</a></li>
                    </ul>
                </li>
            
            
                            <li>
                    <a href="javascript:void(0)" class="waves-effect">
                        <i class="mdi mdi-av-timer fa-fw" data-icon="v"></i>
                        <span class="hide-menu"> Developers</span>
                    </a>
                    <ul class="nav nav-second-level">
                        <li><a href="https://db.incfile.com/workplace">Workplace tracker</a></li>

                                            </ul>
                </li>
            
            
                            <li>
                    <a href="javascript:void(0)" class="waves-effect">
                        <i class="mdi mdi-cash fa-fw" data-icon="v"></i>
                        <span class="hide-menu">Transaction</span>
                    </a>
                    <ul class="nav nav-second-level">
                        
                        
                                                    <li><a href="https://db.incfile.com/cost/services">Products and Subscriptions</a></li>
                        
                                            </ul>
                </li>
                    </ul>
    </div>
</div>

     <div id="page-wrapper" style="min-height: 894px;">
         <div class="container-fluid" id="middle-content"><style>
    .wrapper-comp-2.title-no-wrap {
        white-space: normal !important;
    }

    .wrapper-comp-2.title-no-wrap:hover {
        white-space: nowrap !important;
    }
</style>

<div class="row m-t-30">
    <div class="col-sm-12">
        <div class="white-box">
            <h3 class="box-title">Search Results for "contato@panthermamakids.com"</h3>
            <div class="table-responsive" id="table_responsive_for_search">
                <div id="DataTables_Table_0_wrapper" class="dataTables_wrapper no-footer"><table class="table table-hover search_result dataTable no-footer" id="DataTables_Table_0" role="grid">
                    <thead>
                        <tr role="row"><th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1" aria-label=": activate to sort column ascending" style="width: 34.2188px;"></th><th class="sorting_desc" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1" aria-sort="descending" aria-label="Order #: activate to sort column ascending" style="width: 121.719px;">Order #</th><th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1" aria-label="Company Name: activate to sort column ascending" style="width: 250px;">Company Name</th><th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1" aria-label="Expedited: activate to sort column ascending" style="width: 83.2118px;">Expedited</th><th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1" aria-label="Status: activate to sort column ascending" style="width: 61.3194px;">Status</th><th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1" aria-label="Order Type: activate to sort column ascending" style="width: 100px;">Order Type</th><th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1" aria-label="State: activate to sort column ascending" style="width: 53.5243px;">State</th><th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1" aria-label="Phone #: activate to sort column ascending" style="width: 80px;">Phone #</th><th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1" aria-label="First Name: activate to sort column ascending" style="width: 73.1424px;">First Name</th><th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1" aria-label="Last Name: activate to sort column ascending" style="width: 71.875px;">Last Name</th><th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1" aria-label="Email: activate to sort column ascending" style="width: 228.177px;">Email</th></tr>
                    </thead>
                    <tbody>
                                                                                
                                            <tr style="cursor: pointer" role="row" class="odd">
                                <td>
                                    <a class="btn btn-transparent btn-sm" href="https://db.incfile.com/incfile/order/upload/225070363866" target="_blank" data-toggle="tooltip" data-placement="right" data-trigger="hover" title="" data-original-title="Upload document for &lt;br&gt;PANTHER MAMA &amp; KIDS LLC">
                                        <i class="ti ti-upload"></i>
                                    </a>
                                </td>

                                <td class="sorting_1">
                                                                        <a href="https://db.incfile.com/redirect-to-dashboard-staff-bypass/2663866" target="_blank" style="margin-right: 1rem;" data-toggle="tooltip" data-original-title="" title="">
                                       <img src="./DB_SEARCH_RESULTS_EXAMPLE_files/dashboard.ico" title="Client Dashboard" width="30" height="30">
                                    </a>
                                    <a href="https://db.incfile.com/incfile/order/detail/225070363866" target="_blank" style="color:#2cabe3">
                                        225070363866
                                    </a>
                                </td>

                                <td style="position: relative" width="250">

                                    <div class="wrapper-comp-2 title-no-wrap" style="width: auto;">
                                        <span class="name-inside-2 pull-left">PANTHER MAMA &amp; KIDS LLC</span>
                                        <button data-view-link="https://db.incfile.com/incfile/order/detail/225070363866" class="btn btn-primary btn-sm btn-rounded view_comp_detail-2 pull-right" style="margin-left: 5px; width: 60px; display: none;"> View
                                        </button>
                                        <button style="width: 60px; display: none;" class="btn btn-danger btn-sm btn-rounded copy-2 pull-right" data-comp-name="PANTHER MAMA &amp; KIDS LLC" data-name-search-link="http://corp.sec.state.ma.us/corpweb/corpsearch/CorpSearch.aspx">Search
                                        </button>
                                    </div>

                                </td>

                                <td>
                                                                            <i class="mdi mdi-check-circle" style="color:#3cb81e; font-size:20px; margin-left:20px; margin-top: -10px; display: inline-block"></i>
                                                                    </td>
                                <td>
                                    Review
                                </td>
                                <td width="100">
                                    Silver
                                </td>
                                <td>
                                    MA
                                </td>
                                <td width="80">
                                    617-682-0347
                                </td>
                                <td>
                                    Edna
                                </td>
                                <td>
                                    Barreto
                                </td>
                                <td>
                                    <strong style="font-weight:600">contato@panthermamakids.com</strong>
                                </td>
                            </tr></tbody>
                </table></div>
            </div>
        </div>
    </div>
</div>
</div>
     </div>

 </div>
       <script src="./DB_SEARCH_RESULTS_EXAMPLE_files/intlTelInput.js"></script>
       <script src="./DB_SEARCH_RESULTS_EXAMPLE_files/phoneInput.js"></script>
       <script>
         document.addEventListener('DOMContentLoaded', function () {
           window.userPhoneInput = window.phoneInput({
             phoneInputId: '#client_mobile',
             countryInputId: '#phone_country',
             dialCodeInputId: '#contact_phone_dial_code',
             errorMsgId: '#mobile_err'
           });
         });
       </script>
    
 <script type="text/javascript">
     (function() {
         [].slice.call(document.querySelectorAll('.sttabs')).forEach(function(el) {
             new CBPFWTabs(el);
         });

     })();

     $.ajaxSetup({
         headers: {
             'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
         }
     });

     $.blockUI.defaults.message =
         "<div class='blockUI-message'><svg class=\"spinner\" width=\"32px\" height=\"32px\" viewBox=\"0 0 66 66\" xmlns=\"http://www.w3.org/2000/svg\">\n" +
         "<circle class=\"path-out\" fill=\"none\" stroke=\"#ddd\" stroke-width=\"6\" stroke-linecap=\"round\" cx=\"33\" cy=\"33\" r=\"30\"></circle>\n" +
         "   <circle class=\"path\" fill=\"none\" stroke-width=\"6\" stroke-linecap=\"round\" cx=\"33\" cy=\"33\" r=\"30\"></circle>\n" +
         "</svg>Processing your information. Please wait...</div>";

     $(document).ajaxStart(function() {
         $.blockUI();
     });
     $(document).ajaxComplete(function() {
         $.unblockUI();
     });
     $(document).ajaxError(function() {
         $.unblockUI();
     });

     // Search for an order
     //Searching at the top
     timer = null;
     var container = $('#middle-content');

     function showPreLoader(status) {
         var preloader = $('.preloader');
         if (status == 1) {
             preloader.css('z-index', 100);
             preloader.fadeIn();
         } else {
             preloader.css('z-index', 100);
             preloader.fadeOut();
         }
     }

     /**
      * Format the 4 date digits of the ordernum in red color
      */
     function dbOrdernumFormat(ordernum) {
         let originalOrdernum = String(ordernum);

         originalOrdernum = originalOrdernum.replace(originalOrdernum.substring(3, 7), '<span style="color:red;"><b>' +
             originalOrdernum.substring(3, 7) + '</b></span>');

         return originalOrdernum;
     }

     function ajaxSearch() {
         $('table.dataTable.fixedHeader-floating').remove();
         //showPreLoader(1);
         $.ajax({
             url: '/',
             method: 'post',
             global: true,
             data: {
                 search: $('#search_field').val()
             },
             success: function(data) {
                 if (data) {
                     container.html(data);
                     //Apply DataTable again for search result
                     $('.search_result').DataTable({
                         paging: false,
                         fixedHeader: true,
                         pageLength: 1000,
                         info: false,
                         searching: false,
                         "aaSorting": [
                             [1, 'desc']
                         ],
                     });
                     $('[data-toggle="tooltip"]').tooltip({
                         html: true
                     });

                     $(document).on({
                         mouseenter: function() {
                             var nameLength = $(this).find('.name-inside-2').outerWidth() + 180;
                             $(this).addClass('btn-default btn-outline btn-rounded');
                             $(this).css('width', nameLength + 'px');
                             $(this).find('.btn').show();
                         },
                         mouseleave: function() {
                             $(this).removeClass('btn-default btn-outline btn-rounded');
                             $(this).css('width', 'auto');
                             $(this).find('.btn').hide();
                         }
                     }, 'div.wrapper-comp-2');

                     // Copy company name to clipboard
                     $(document).on('click', 'button.copy-2', function() {
                         var compname = $(this).data('comp-name');
                         compname = compname.replace(/_blabla_/gi, "'", compname);
                         var name_search_link = $(this).data('name-search-link');

                         var $tempInput = $("<input>");
                         $("body").append($tempInput);
                         $tempInput.val(compname).select();
                         document.execCommand("copy");
                         $tempInput.remove();

                         window.open(name_search_link);
                     });

                     $(document).on('click', 'button.view_comp_detail-2', function() {
                         var order_detail_link = $(this).data('view-link');
                         window.open(order_detail_link);
                     });

                     showPreLoader(0);
                 } else {
                     showPreLoader(0);
                 }
             }
         });
     }

     function searchOrders(state, type = null, orderType, withoutFiledArticles = null) {
         let miscMainType = "&main_orderType=" + type;
         let miscType = "";
         let status = $('#status').val();
         sessionStorage.setItem('needToReload', true);
         if (type != 'main') {
             miscType = "&misc_orderType=" + orderType;
         }
         let mainWithoutFiledArtickes = '';
         if (withoutFiledArticles) {
             mainWithoutFiledArtickes = '&main_withoutFiledArticles=true';
         }

         let newTab = '/order-tracker/orders/order-search?sort=asc&state=' + state + '&status=' + status + miscMainType +
             miscType + mainWithoutFiledArtickes;

         window.open(newTab);

     }

     function searchOrdersByStatus() {
         let status = $('#status').val();

         window.location.href = '/forwarded-orders/?status=' + status;
     }

     $(document).ready(function() {
         $('#search_field').bind('keypress', function(e) {
             if (e.keyCode == 13) {
                 ajaxSearch();
             }
         });

         $('#mainSearching').click(function() {
             ajaxSearch();
         });

         $('#ra_per_month, #ra_per_state, #ra_per_provider').change(function () {
             $.blockUI();
             window.location.href = "https://db.incfile.com/incfile/orders/reporting/ra-renewals/?month=" + $('#ra_per_month').val() + '&entityState=' + $('#ra_per_state').val() + '&provider=' + $('#ra_per_provider').val();
         });
     });
 </script>

                                                         <script src="./DB_SEARCH_RESULTS_EXAMPLE_files/jquery.simplePagination.js"></script>
    <script>
        var ordernum = "225070363866";
        var transnum = "2663866";
        var currentIssue = '';
        var currentStatus = '1';
        var orderStateStatus = '0';
        var ship_no_mail = '';
        var exceedingLimit = "0";
        var admin_level = '3';
        var orderEntityState = '225070363866';
        var orderStatus = '1';
    </script>
    
        <script>
        var instructionsURL = 'http://45.76.17.84/webauto/instructions/entity/ma.json?hash=UXjgC6Tr6l';
        var validurl = '1';
        var dataURL = 'https://atomic.incfile.com/api/webauto/order/ma/llc';
        var pdfUploadURL = 'https://atomic.incfile.com/api/webauto/upload-internal';
        var pdfUploadDashbordURL = 'https://atomic.incfile.com/api/webauto/upload-dashboard';
        var pdfDownloadURL = '/articles/ma/llc/225070363866';
        var waDistributionPlan = 'https://atomic.incfile.com/api/webauto/wa-distributionplan?id=225070363866&apikey=SoGyiRJXefoY';
        var azPdfDownload = 'https://atomic.incfile.com/api/webauto/az-agent-acceptance/tjdr8vv6yjcw34a4j6vntgmxr1g9rpymkmphhlbvm3na0tc7d72m35svq7jn5xjymxl3q6m92z65ykgppclmzx4q?apikey=SoGyiRJXefoY';
        var orderNnum = '225070363866';
        var entityState = 'ma';
        var entityType = 'llc';
        var restrictedWordsList = ["[\"army\",\"navy\",\"marine corps\",\"coast guard\",\"government\",\"px\",\"gi\",\"police\",\"state\",\"federal\",\"cannabis\",\"insurance\"]"];
        var instructionsURLDev = 'https://atomic.master.mavapartners.test.incfile.me/api/webauto/instructions/entity/ma.json';
        var dataURLDev = 'https://atomic.master.mavapartners.test.incfile.me/api/webauto/order/ma/llc';
        var instructionExist = '1';
        var automationArticleStateList = JSON.parse('["ia","ne","va","nm"]');
        var annualInstructionsURL = 'http://45.76.17.84/webauto/instructions/reports/ma.json?hash=mxLXollfB8';
        var annualValidurl = '1';
        var annualDataURL = 'https://atomic.incfile.com/api/webauto/misc-order/ma/llc&apikey=SoGyiRJXefoY';
        var annualInstructionsURLDev = 'https://atomic.master.mavapartners.test.incfile.me/api/webauto/instructions/reports/ma.json';
        var annualDataURLDev = 'https://atomic.master.mavapartners.test.incfile.me/api/webauto/misc-order/ma/llc';
        var annualInstructionExist = '1';
        var hasAutoArticle = '';

        $(function () {
            $(document).on('click','#oregon-ps-1',function(){
                $("#divProfessionalService").show();
            })
            $(document).on('click','#oregon-ps-2',function(){
                $("#divProfessionalService").hide();
            })

            $('.m_compname').click(function () {
                var compname = $(this).data('comp-name');
                var name_search_link = $(this).data('name-search-link');
                var $tempInput = $("<input>");
                $("body").append($tempInput);
                $tempInput.val(compname).select();
                document.execCommand("copy");
                $tempInput.remove();
                window.open(name_search_link);
            });

            $('input[name="wy-f-language"]').change(function () {
               if($(this).val() == 1) {
                   $('#input-wy-f-l').removeClass('hide');
               } else {
                   $('#input-wy-f-l').addClass('hide');
                   $('#entity_foreign_language').val('');
               }
            });

            $('#modalUpdateIssue').on('shown.bs.modal', function () {
                $('#comment').focus();
            });
            $('#modalAddNote').on('shown.bs.modal', function () {
                $('#commentText').focus();
            });

            $('#refresh-action-items').on('click', function (event) {
                event.preventDefault();
                $.ajax({
                    type: 'POST',
                    dataType: 'json',
                    url: 'https://db.incfile.com/incfile/order/action-items-refresh',
                    data: { ordernum: ordernum },
                    success: function (response) {
                        if (response.status) {
                            swal({
                                title: 'Refresh is in process.',
                                type: 'success',
                            });
                            //window.location.reload();
                        }
                    },
                    error: function () {
                        swal('Error', 'Please try again!', 'error');
                    },
                });
            });

            $('#process-boir').on('click', function (event) {
                event.preventDefault();
                swal({
                        title: 'Process BOIR',
                        type: 'warning',
                        text: 'Are you sure you want to process this BOIR?',
                        showCancelButton: true,
                        confirmButtonText: 'Confirm',
                        cancelButtonText: 'Cancel',
                    },
                    function (usersConfirms) {
                        if (usersConfirms) {
                            $.ajax({
                                type: 'POST',
                                dataType: 'json',
                                url: 'https://db.incfile.com/incfile/order/process-boir',
                                data: { ordernum: ordernum },
                                success: function (response) {
                                    if (response.status) {
                                        swal({
                                            title: 'BOIR is in process.',
                                            type: 'success',
                                        });
                                        setTimeout(function(){
                                            window.location.reload();
                                        }, 1000);
                                    }
                                },
                                error: function () {
                                    swal('Error', 'Please try again!', 'error');
                                },
                            });
                        }
                    }
                );
            });
        });

        $('#print_order_detail').click(function(){

            var tabs = $('#main-tab-information li');
            var html = '';
            for (var i = 0; i < tabs.length; i++){
                var ob = $(tabs[i]);
                    if (ob.find('a').length > 0) {
                    var title = ob.find('.hidden-xs').text();
                    var id = ob.find('a').attr('href').replace('#', '');
                    html += '<div class="row"><div class="col-md-12"><input type="checkbox" name="print-list-chk" id="ch'+id+'" value="'+id+'" class="form-control"/> <label for="ch'+id+'">' + title + ' Info</label></div></div>';
                }
            }
            $('#print-list').html(html);
            $('#modalPrinting').modal('show');
            return false;
        });

        $('#main-tab-content .tab-pane').addClass('print');

        $('#btnTextPrint').click(function(){
            var ch = $('input[name="print-list-chk"]:checked');
            $('#main-tab-content .tab-pane').removeClass('print');
            for (var i = 0; i < ch.length; i++){
                var ob = $(ch[i]);
               $('#' + ob.val()).addClass('print');
            }
            window.print();
        });

        toggleStateDropdown = function () {
            if($('#ss4Country').val() == 'USA') {
                $('input#ss4State').attr('id', 'ss4State-non-us-temp').attr('name', 'ss4State-non-us-temp');
                $('select#ss4State-temp').attr('id', 'ss4State').attr('name', 'ss4State');

                $('#ss4NonUsState').addClass('hide');
                $('#ss4UsState').removeClass('hide');
            } else {
                $('select#ss4State').attr('id', 'ss4State-temp').attr('name', 'ss4State-temp');
                $('input#ss4State-non-us-temp').attr('id', 'ss4State').attr('name', 'ss4State');

                $('#ss4UsState').addClass('hide');
                $('#ss4NonUsState').removeClass('hide');
            }
        }
    </script>

    <script src="./DB_SEARCH_RESULTS_EXAMPLE_files/launch_automate_tool.js"></script>
    
    <script src="./DB_SEARCH_RESULTS_EXAMPLE_files/interface.js"></script>
<script>
    var ordernum = 225070363866;
    var transnum = 2663866;
    var orderOrigin = 0;
    const countries = [43,145,240];
    const providerIDWise = 3;
    const providerVAVerification = 4;
    const USA = 240;
    const BOIR_ID_DOCUMENT_TYPE = {
        'PASSPORT': 1,
        'STATE_ID': 2,
        'DRIVERS_LICENSE': 3
    };
    const RESIGNED               = '-1';
    const NO_SERVICE             = '0';
    const YES                    = '1';
    const STAGED_FOR_RESIGNATION = '2';
    const TRANSFERRED            = '3';

    var identityConfirmationIssueText = `Please provide the following:

1. A clear photo of the card used to pay for the order. Please make sure the cardholder's name and the last 4 digits of the card are fully visible. If you are using a digital card, we require a screenshot of the card and a bank statement showing the funds were removed. 

2. Please send us a selfie holding your ID. If the client and the cardholder are different, please send a selfie of each person holding their ID for authentication purposes (passport, driver's license, or resident card). 

Please send the requested documentation in PDF format. Once submitted, it takes 24 to 48 business hours for your information to be reviewed by our billing department.

If we do not receive the information within 5 business days your order will be canceled and refunded. Please reply back to this email with the requested information or email us at billing@incfile.com.`;
    let emailExists = false;

    /**********************************************************************************************
        Init functions
     *********************************************************************************************/
    $(document).ready(function () {
        // Current URL to get the possible parameters.
        let url = new URL(window.location.href),
            activeTabFromUrl = url.searchParams.get('activeTab') ?? '',
            activeSection = activeTabFromUrl !== ''
                ? activeTabFromUrl
                : sessionStorage.getItem('activeTab');

        if (activeSection !== null) {
            changeActiveTab(activeSection);
        }

        manageBankingOptions();

        // Convert to upper first word
        $(document).on('blur', '.js-upper-first', function () {
            var $this = $(this),
                $thisVal = $this.val();
            $this.val(interface.capitalize($thisVal));
        });

        $(document).on('blur', '.js-format-sentence', function (e) {
            var code = (e.keyCode ? e.keyCode : e.which);
            var s = String.fromCharCode(e.keyCode);
            var isCapsLockOn = (s.toUpperCase() === s && s.toLowerCase() !== s && !e.shiftKey);
            if (code !== 9) {
                var $this = $(this),
                    $thisVal = $this.val();

                $this.val(interface.sentenceCase($thisVal, true, isCapsLockOn));

            }
        });

        // Convert the string to all uppercase
        $(document).on('blur', '.js-convert-to-uppercase', function (e) {
            var code = (e.keyCode ? e.keyCode : e.which);
            if (code !== 9) {
                var $this = $(this),
                    $thisVal = $this.val();

                $this.val($thisVal !== '' ? $thisVal.toUpperCase() : $thisVal);

            }
        });

        // Apply mask for some fields
        $('.phone').mask('(000) 000-0000');
        $('.zip').mask('00000');
        $('.card').mask('0000');
        $('.ssn').mask('000-00-0000');
        $('.fein').mask('00-0000000');

        var modalFullScreen = $(".modal-fullscreen");
        modalTransparent = $(".modal-transparent");
        modalTransparent.on('show.bs.modal', function () {
            setTimeout(function () {
                $(".modal-backdrop").addClass("modal-backdrop-transparent");
            }, 0);
        });
        modalTransparent.on('hidden.bs.modal', function () {
            $(".modal-backdrop").addClass("modal-backdrop-transparent");
        });

        modalFullScreen.on('show.bs.modal', function () {
            setTimeout(function () {
                $(".modal-backdrop").addClass("modal-backdrop-fullscreen");
            }, 0);
        });
        modalFullScreen.on('hidden.bs.modal', function () {
            $(".modal-backdrop").addClass("modal-backdrop-fullscreen");
        });

        // Focus event on input fields
        var formFields = $('.frmEdit input, .frmEdit select');
        formFields.focus(function () {
            $(this).closest('div').prev('label').addClass('bold');
        });
        formFields.blur(function () {
            $(this).closest('div').prev('label').removeClass('bold');
        });


        // ---- Comments modal actions ------------------------------------------------------------
        // Load recent comments
        notes.loadComments('2663866', 0);

        // Load upcoming compliance
        notes.loadCompliance('225070363866', 0);

        // Load all comments into modal
        notes.loadCommentsToModal();

        // Load all child comments into modal
        notes.loadChildCommentsToModal();

        // Load parent comments to modal
        notes.loadParentCommentsToModal();

        // ---- Compliance modal actions ----------------------------------------------------------
        // Load 5 upcoming compliance into modal
        notes.loadComplianceToModal();

        $('#compliance-email-modal').on('show.bs.modal', function () {
            $(this).find('.modal-dialog').css({
                width: '690px', //probably not needed
            });
        });

        // Enable/Disable Compliance Notification
        manual_click = true;

        $('.compliance-switch-form, .boir-switch-form').mouseover(function () {
            manual_click = true;
        });

        $('input[name="compliance_notification_status"], input[name="boir_notification_status"]').change(function () {
            if (manual_click === true) {
                var status = $(this).val();
                var formId = $(this).closest('form').attr('id');
                var inputName = $(this).attr('name');
                var notificationType = inputName === 'compliance_notification_status' ? 'Compliance' : 'BOIR';
                var text = status == 1 ? "Enable" : "Disable";
                var polarStatus = status == 1 ? 0 : 1;

                swal({
                    title: text + " " + notificationType + " Notification",
                    text: "Are you sure you want to " + text.toLowerCase() + " notification for this order?",
                    type: "warning",
                    showCancelButton: true,
                    confirmButtonColor: "#3cb81e",
                    confirmButtonText: "Yes, " + text + " it!",
                    cancelButtonText: "No, cancel please!",
                    closeOnCancel: false,
                    closeOnConfirm: false
                }, function (inputValue) {
                    if (inputValue === false) {
                        $('#' + formId + ' input:radio').each(function () {
                            if ($(this).val() == polarStatus) {
                                manual_click = false;
                                $(this).closest('.btn').button('toggle');
                            }
                        });
                        swal.close();
                    } else {
                        $.ajax({
                            type: "POST",
                            dataType: "json",
                            data: {
                                'requestData': $('#' + formId).serializeFormJSON(),
                                'ordernum': ordernum,
                                'updateType': notificationType.toLowerCase() + '-notification-status'
                            },
                            url: "https://db.incfile.com/incfile/order/edit-ajax/225070363866",
                            success: function (res) {
                                if (res.status) {
                                    swal({
                                        title: res.title_text,
                                        type: "success",
                                        confirmButtonText: "OK",
                                        closeOnConfirm: false
                                    }, function () {
                                        location.reload(true);
                                    });
                                }
                            }
                        });
                    }
                });
            }
        });

        // ---- Issue modal actions ---------------------------------------------------------------
        // Remove red border of message input on change issue type
        $('#type_id').change(function () {
            $('#comment').css({'border': ''});
        });

        // Hide spelling confirmation issue box on page load
        $('#spelling_issue_sec').hide();
        $('#additional_funds_request_sec').hide();
        $('#additionalInformationRequestContainer').hide();


        // ---- IP actions ------------------------------------------------------------------------
        //Showing IP based details in a POP UP while clicking on that link
        $('#ip_info_popup').click(function () {
            event.preventDefault();

            var city = $(this).data('city');
            var region = $(this).data('region');
            var postal = $(this).data('postal');
            var latitude = $(this).data('latitude');
            var longitude = $(this).data('longitude');

            swal({
                title: 'IP Based Details',
                type: 'info',
                text:'City : '+ city+'<br/> State : '+ region+'<br/> Postal Code : '+ postal+'<br/>'+
                'Latitude : '+ latitude+'<br/> Longitude : '+ longitude,
                html: true,
                showCloseButton: true,
                showCancelButton: false
            })
        });

        // ---- Clients actions -------------------------------------------------------------------
        // Remove Enter action on New Owner input
        $('#newOwnerId').keypress(function (e) {
            if (e.which === 13) {
                return false;
            }
        });

        // ---- Fraud actions ---------------------------------------------------------------------
        // Click action to show Fraud Review action modal.
        $('#fraud_review_action').click(function () {
            $('#fraud-review-action-modal').modal('show');
        });

        $('#modalEditContactInfo').on('shown.bs.modal', function () {
            $('#contactEmail').removeClass('error');
            $('#contactEmail').css({'border': ''});
            $('#update-contact-info').removeClass('disabled');
        });

        // Click action on Yes button of Fraud Review action modal.
        $(document).on('click', '#fraud-review-yes-button', function () {
            var fraudStatus = $('#fraud_review_action').data('fraud_status');
            var tab = '';
            var url = fraudStatus === 2 ? '/order-tracker/orders/mark-as-potential-fraud' : '/order-tracker/orders/mark-not-fraud';

            if (fraudStatus !== 2) {
                tab = fraudStatus === 0 ? 'potential_fraud' : 'to_confirm_fraud';
            }

            $.ajax({
                url: url,
                method: 'POST',
                data : {
                    order_id: transnum,
                    tab: tab,
                },
                success: function (response) {
                    $('#fraud-review-action-modal').modal('hide');
                    var title = fraudStatus === 2 ? 'The order was added to Fraud Review' : 'The order was removed from Fraud Review';

                    swal({
                        title: title,
                        type: "success",
                        confirmButtonText: "OK",
                        closeOnConfirm: false
                    }, function () {
                        location.reload(true);
                    });
                }, error: function () {

                }, timeout: 5000
            })
        });

        // Click action to show Mark as Fraud modal in order detail page.
        $('#marked_fraud_not_fraud, #cancel_fraud_status').click(function () {
            $('#js-modal-refund-fraud').modal('show');
        });

        $(document).on('click', '#confirm-fraud-action', function () {
            var selectedAction = $('#fraud-action-select').val();
            var data = { order_id: transnum, page: 'order_detail', source: 'order-detail' };
            var successMessage = '';

            switch (selectedAction) {
                case 'refund':
                    refundFraud();
                    return;
                case 'chargeback':
                    data.chargeback = true;
                    successMessage = 'Order Marked as Fraud and charged back';
                    break;
                case 'no-modify':
                    successMessage = 'Order Marked as Fraud';
                    break;
                default:
                    return;
            }

            $.ajax({
                url: '/order-tracker/orders/mark-fraud',
                method: 'POST',
                data: data,
                success: function (response) {
                    $('#js-modal-refund-fraud').modal('hide');

                    swal({
                        title: successMessage,
                        type: "success",
                        confirmButtonText: "OK",
                        closeOnConfirm: false
                    }, function () {
                        location.reload(true);
                    });
                },
                error: function (msg) {
                    showErrorMessageToMarkAsFraudOrder('It is not possible to make a Chargeback for this order.');
                },
                timeout: 50000
            });
        });

        function refundFraud() {
                                        $('#js-modal-refund-fraud').modal('hide');
                                    refundFraudOrder({
                        'amount': parseInt('669'),
                        'reason_id': 12,
                        'cancel': 1,
                        'description': 'Order Marked as Fraud and refunded',
                        'is_fraud': 1,
                        'source': 'order-detail'
                    }, 'https://db.incfile.com/api/payments/transactions/6772995/reverse');
                                    }

        $("#possible-fraud-notify").fadeOut(1000).fadeIn(2000);

        // ---- Probable Parent actions -----------------------------------------------------------
        // To link a Probable Parent order.
        $('.probable-parent-link').on('click', function () {
            var probableParentOrdernum = $(this).data('ordernum'),
                companyName = $(this).data('company-name');

            probableParent.linkToParentOrder(probableParentOrdernum, companyName);
        });

        // To link a Probable Parent order and transfer the Registered Agent service.
        $('.probable-parent-transfer-registered-agent').on('click', function () {
            var probableParentOrdernum = $(this).data('ordernum'),
                companyName = $(this).data('company-name');

            probableParent.linkAndTransferRegisteredAgent(probableParentOrdernum, companyName);
        });

        // To link a Probable Parent order and transfer the Virtual Address service.
        $('.probable-parent-transfer-virtual-address').on('click', function () {
            var probableParentOrdernum = $(this).data('ordernum'),
                companyName = $(this).data('company-name');

            probableParent.linkAndTransferVirtualAddress(probableParentOrdernum, companyName);
        });

        // To discard and remove a Probable Parent order.
        $('.probable-parent-discard').on('click', function () {
            var probableParentOrdernum = $(this).data('ordernum'),
                companyName = $(this).data('company-name');

            probableParent.discard(probableParentOrdernum, companyName);
        });


        // Refresh/Replace in Int Doc page
        $(document).on('click', '.int_doc_refresh_replace_manual', function () {
            event.preventDefault();
            let url = $(this).data('url');
            $.blockUI();
            window.location.href = url;
        });

        $(document).on('click', '.int_doc_refresh_replace', function () {
            let ttleMain = 'Hello Sign or Manual';
            let textMAin = 'Use Hello Sign signature request or Manual Upload option?';

            let ttleSub = 'Exist or Not';
            let textSub = 'This will replace existing doc. Are you sure you want to continue ?';
            let meth = $(this).data('meth');

            Swal.fire({
                title: ttleMain,
                text: textMAin,
                icon: 'warning',
                showDenyButton: true,
                showConfirmButton: true,
                showCancelButton: false,
                denyButtonColor: "#e4e7ea",
                confirmButtonColor: "#707cd2",
                confirmButtonText: "Manual",
                denyButtonText: "Hello Sign",
                allowEscapeKey: true,
                allowOutsideClick: true,
                width: '25%',
                customClass: {
                    actions: 'vertical-buttons'
                },
            }).then((result) => {
                if (result.isConfirmed) {
                    Swal.fire({
                    title: ttleSub,
                    text: textSub,
                    icon: 'warning',
                    showCancelButton: true,
                    confirmButtonColor: '#707cd2',
                    confirmButtonText: 'YES',
                    cancelButtonText: 'NO',
                    closeOnConfirm: true,
                    closeOnCancel: true,
                    width: '25%',
                    }).then((result) => {
                        if (result.isConfirmed) {
                            $.blockUI();
                                window.location.href = 'https://db.incfile.com/incfile/order/update-formation-docs/225070363866/' + meth + '/replace/?option=manual';
                        }

                        return false;
                    })
                } else if (result.isDenied) {
                    $.blockUI();
                    window.location.href = 'https://db.incfile.com/incfile/order/update-formation-docs/225070363866/' + meth + '/replace/?option=hello_sign';
                }
            });
        });


        // ---- Virtual Address actions -----------------------------------------------------------
        // To cancel the virtual address service through the Company tab.
        $('#cancel_va_renewal').on('click', function () {
          subscription.cancelVirtualAddressSubscription(transnum);
        });

        // To Reinstate a cancelled virtual address service through the Company tab.
        $('#reinstate_va_renewal').on('click', function () {
          subscription.reinstateVirtualAddressSubscription(transnum);
        });

        // Reactivate virtual address order in client dashboard
        $('#reactivate_va').click(function () {

            let data= '';
            data = {transnum:transnum};
            ttleMain = 'Reactivate Virtual Address';
            textMAin = 'Are you sure you want to activate Virtual Address action item in Dashboard?';

            swal({
                title: ttleMain,
                text: textMAin,
                type: 'warning',
                showCancelButton: true,
                confirmButtonColor: "#DD6B55",
                confirmButtonText: "YES",
                cancelButtonText: "NO",
                closeOnConfirm: true,
                closeOnCancel: true
            }, function (isConfirm) {
                if (isConfirm) {
                    $.ajax({
                        url: "https://db.incfile.com/incfile/order/reactivate-va-action-item",
                        method: 'POST',
                        data: data,
                        success: function(response) {
                            let title = 'Reactivated virtual Address order';
                            swal({
                                title: title,
                                type: "success",
                                confirmButtonText: "OK",
                                closeOnConfirm: false
                            }, function () {
                                location.reload(true);
                            });
                        },
                        error: function(msg) {

                        },
                        timeout:50000
                    });
                }
            });
        });

        // To Cancel a subscription through the Subscriptions / Virtual Address tab.
        $('.cancel-subscription').on('click', function () {
          var type = $(this).data('type'),
            orderId = $(this).data('order-id'),
            subscriptionId = $(this).data('subscription-id'),
            name = $(this).data('plan-name');

          // ToDo: Apply logic for Registered Agent subscriptions here.
          switch (type) {
                case 'va':
                    subscription.cancelVirtualAddressSubscription(orderId, name);
                    break;
                case 'domain':
                    subscription.cancelDomainEmailSubscription(subscriptionId);
                    break;
                case 'listing':
                    subscription.cancelListingSubscription(subscriptionId);
                    break;
                case 'stateFilings':
                    subscription.cancelStateFilingsBundleSubscription(subscriptionId, name);
                    break;
                case 'tax':
                    subscription.cancelTaxSubscription(subscriptionId);
                    break;
                default:
                    console.log('Unkwon subscription type');
                    break;
            }
        });

        // To Reinstate a subscription through the Virtual Address tab.
        $('.reinstate-subscription').on('click', function () {
          var type = $(this).data('type'),
            orderId = $(this).data('order-id'),
            name = $(this).data('plan-name');

          if (type === 'va') {
            subscription.reinstateVirtualAddressSubscription(orderId, name);
          }
        });

        /*
         * Cancel subscription
         */
        $('.cancelPrivacyAddOn').click(function () {
            name = $(this).data('name');
            subscription.cancelDomainPrivacy(name);
        });

        $('.cancelMailAddOn').click(function () {
            name = $(this).data('name');

            subscription.cancelMailAddOn(name);
        });

                    // load billing info
            let paymentMethods = billing.loadProfiles('225070363866');
            let profile = paymentMethods.find(paymentMethod => paymentMethod.id == $('#selectPaymentMethods').val());
            billing.loadSelectedProfileInfo(profile);

            $('#selectPaymentMethods').change(function () {
                profile = paymentMethods.find(paymentMethod => paymentMethod.id == $(this).val());
                billing.loadSelectedProfileInfo(profile);
            });
        
        let $totalRevenue = $('#total_revenue');
        let $taxpayer = $('#taxpayer');
        let $webfile = $('#webfile');

        $('#modalEditCompInfo').on('shown.bs.modal', function () {
            if($totalRevenue.is(':visible')){
                $totalRevenue.bind('paste', function(e) {
                    e.preventDefault();
                });
            }

            if ($taxpayer.is(':visible')) {
                $taxpayer.blur(function() {
                    if ($taxpayer.val() != "" && $taxpayer.val().length != 11) {
                        $(this).next('.reserved-err').removeClass('hide').text('This field must be 11 numbers')
                    } else {
                        $(this).next('.reserved-err').addClass('hide').text("");
                    }
                }).bind('paste', function(event) {
                    if (event.originalEvent.clipboardData.getData('Text').match(/[^\d]/)) {
                        event.preventDefault();
                    }
                });
            }

            if ($webfile.is(':visible')) {
                $webfile.mask('AA000000', {'translation': {A: {pattern: /^[A-Za-z]/}}})
                $webfile.blur(function() {
                    var reg_webfile = /^[A-Za-z]{2}[0-9]{6}$/;
                    if ($webfile.val() != "" && $webfile.val().length <= 8 && !$webfile.val().match(reg_webfile)) {
                        $(this).next('.reserved-err').removeClass('hide').text('This field must be 2 letters + 6 numbers')
                    } else {
                        $(this).next('.reserved-err').addClass('hide').text("");
                    }
                });
            }
        });

        $('#modalEditCompInfo').on('shown.bs.modal', function () {
            if ($taxpayer.is(':visible')) {
                $taxpayer.next('.reserved-err').addClass('hide').text("");
            }
            if ($webfile.is(':visible')) {
                $webfile.next('.reserved-err').addClass('hide').text("");
            }
        });

        checkNaicCode();

        $('#modalBouncedEmails').on('hidden.bs.modal', function (event) {
            event.preventDefault();

            $('li').removeClass('active');

            $('#modalBouncedEmails li:contains(1)').addClass('active');
        });

        $(document).on('click', '.pagination a',function(event) {
            event.preventDefault();

            $('li').removeClass('active');
            $(this).parent('li').addClass('active');

            var page= $(this).attr('href').split('page=')[1];

            loadBouncedEmails(page);
        });

        $('#delete-bounced-emails').click(function () {
            deleteBouncedEmails();
        });

        $('#paymentMethodLastDigits, #confirmationPaypalEmail').on('input', function() {
            billing.validateUnlink();
        });

        $('#unlinkButton').on('click', function() {
            if (window.preferredPaymentMethod.type.slug === 'paypal') {
                $('#modalUnlinkPayPal').modal('show');
                return;
            }

            $('#modalUnlinkPaymentMethod').modal('show');
            $('#unlinkTitle').html('Are you sure you want to unlink ' + $('#preferredProfileCardType').html() + ' ending in ' + $('#preferredProfileLast4').html() + '?');
        });

        checkReservedWords();
        toggleFincenSections();
        showApplicant();
        showOwners();

        var timer;

        // Reserved names check on focusout
        $('#compName1, #amendmentCompName1').on('keyup', function () {
            clearTimeout(timer);

            // Set a new timer
            timer = setTimeout(function() {
                checkReservedWords();
            }, 500);

        });

        $('#modalEditCompInfo').on('hidden.bs.modal', function () {
            clearFormAndClose('#frmEditCompInfo', '#modalEditCompInfo');
        });

        $('#update-boir-info-modal').on('hidden.bs.modal', function () {
            clearFormAndClose('#frmUpdateBoirInfo', '#update-boir-info-modal');
            toggleFincenSections();
        });

        $('#ownerTotal').change(function () {
            showOwners();
        });

        $('input[name="applicant][has_fincen_id]"]').on('change', function() {
            toggleFincenSections();
        });

        $('.country-id').change(function () {
            var formGroup = $(this).closest('.form-group').next('.form-group');
            var stateInput = formGroup.find('.owner-state-input');
            var stateSelect = formGroup.find('.owner-state-select');

            if (countries.includes(parseInt($(this).val()))) {
                stateSelect.removeClass('hide');
                stateInput.addClass('hide');
                populateStates($(this).val(), stateSelect.find('select'));
            } else {
                stateInput.removeClass('hide');
                stateSelect.addClass('hide');
            }
        });

        $('.document_type_id').change(function () {
            toggleShowDocumentState($(this));
        });

        $('#registered-agent-service').val(
            $('#registered-agent-service').data('oldValue')
        ).trigger('change');
    });

    // Setup Ajax start
    $(document).ajaxStart(function () {
        $.blockUI({
            message: '<i class="fa fa-spinner fa-spin"></i> Please wait...'
        });
    }).ajaxStop(function () {
        $.unblockUI();
    }).ajaxComplete(function () {
        $.unblockUI();
    }).ajaxError(function () {
        $.unblockUI();
        sweetAlert("Oops...", "Something went wrong!", "error");
    });

    (function ($) {
        $.fn.serializeFormJSON = function () {

            var o = {};
            var a = this.serializeArray();
            $.each(a, function () {
                if (o[this.name]) {
                    if (!o[this.name].push) {
                        o[this.name] = [o[this.name]];
                    }
                    o[this.name].push(this.value || '');
                } else {
                    o[this.name] = this.value || '';
                }
            });
            return o;
        };
    })(jQuery);

    $(window).on('hashchange', function() {
        if (window.location.hash) {
            var page = window.location.hash.replace('#', '');
            if (page == Number.NaN || page <= 0) {
                return false;
            }else{
                loadBouncedEmails(page);
            }
        }
    });

    function showOwners() {
        $('.owners').addClass('hide');

        for (let i = 0; i < $('#ownerTotal').val(); i++) {
            let owner = $('.owner-' + i);
            let countryId = owner.find('.country-id').val();
            let stateSelect = owner.find('.owner-state-select select');
            let stateInput = owner.find('.owner-state-input');
            let documentType = owner.find('.document_type_id');

            owner.removeClass('hide');
            toggleShowDocumentState(documentType);

            if (countries.includes(parseInt(countryId))) {
                owner.find('.owner-state-select').removeClass('hide');
                stateInput.addClass('hide');
                populateStates(countryId, stateSelect, stateSelect.data('old-value'));
            } else {
                stateInput.removeClass('hide');
                owner.find('.owner-state-select').addClass('hide');
            }
        }
    }

    function toggleFincenSections() {
        if ($('#existing_id').is(':checked')) {
            $('.existing-id').show();
            $('.non-existing-id').hide();
        } else if ($('#non_existing_id').is(':checked')) {
            $('.existing-id').hide();
            $('.non-existing-id').show();
        }
    }

    function loadBouncedEmails(page) {
        $.ajax(
        {
            url: "https://db.incfile.com/incfile/order/get-bounced-emails?ordernum=" + ordernum + '&page=' + page,
            type: "get",
            datatype: "html"
        }).done(function(data){
            $("#bounced-emails-container").empty().html(data);
            location.hash = page;
        }).fail(function(jqXHR, ajaxOptions, thrownError){
            alert('No response from server');
        });
    }

    function deleteBouncedEmails(){
        swal({
            title: 'Confirm',
            text: 'Do you like to resolve the Bad Email Address?',
            type: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#3cb81e',
            confirmButtonText: 'Yes',
            cancelButtonText: 'No',
            closeOnCancel: true,
            closeOnConfirm: true
        }, function(confirm) {
            if (confirm) {
                $.ajax({
                    url: "https://db.incfile.com/incfile/order/delete-bounced-emails?order_id=" + transnum,
                    type: 'POST',
                }).done(function (response) {
                    if (response) {
                        sweetAlert("Success", "Bad Email Address was resolved!", "success");
                        location.reload();
                    } else {
                        swal('Error', 'Error when sending request. Please try again.', 'error');
                    }
                })
            }
        });
    }


    /**********************************************************************************************
        Left Column Functionality
     *********************************************************************************************/
    // AJAX function to handle the change of the status
    function changeStatus(value, colorClass, statusName, updateType) {
        var btnTextStatus = $('.btn-status-text');
        var caret = '<span class="caret"  style="margin-left: 4px"></span>';
        var textAlert = 'The orders status successfully updated.';

        if (updateType === 'status' && value != currentStatus) {
            $.ajax({
                type: "POST",
                dataType: "json",
                data: {
                    'newValue': value,
                    'ordernum': ordernum,
                    'updateType': updateType,
                    'ship_no_mail': ship_no_mail
                },
                url: "https://db.incfile.com/incfile/order/update-status-ajax?ordernum=" + ordernum,
                success: function (res) {
                    if (res.status) {
                        btnTextStatus.html(statusName + caret);
                        btnTextStatus.removeClass('btn-danger btn-warning');
                        btnTextStatus.addClass(colorClass);

                        // Sync these info to TUNE - Only BOA customer
                        if (value === '0') {
                            tune.identify({
                                isProduction,
                                'origin': order.orderOrigin,
                                'ordernum': order.ordernum,
                                'packageName': order.orderType,
                                'mapping': '15_Cancel',
                                'boaOpted': order.businessBanking
                            });
                        }

                        swal({
                            title: 'Good Job!',
                            text: textAlert,
                            type: "success",
                            confirmButtonText: "OK",
                            closeOnConfirm: true
                        }, function () {
                            $.unblockUI();

                            location.reload(true);
                        });
                    }
                },
            });
        }
    }

    function showApplicant() {
        let applicant = $('#boir_applicant_information');
        let countryId = applicant.find('.country-id').val();
        let stateSelect = applicant.find('.owner-state-select select');
        let stateInput = applicant.find('.owner-state-input');
        let documentType = applicant.find('.document_type_id');

        toggleShowDocumentState(documentType);

        if (countries.includes(parseInt(countryId))) {
            applicant.find('.owner-state-select').removeClass('hide');
            stateInput.addClass('hide');
            populateStates(countryId, stateSelect, stateSelect.data('old-value'));
        } else {
            stateInput.removeClass('hide');
            applicant.find('.owner-state-select').addClass('hide');
        }
    }

    /**********************************************************************************************
        Update Order Info functionality
     *********************************************************************************************/
    // ---- Update Order Info : prosecution -------------------------------------------------------
    // Function to validate forms before to update data.
    function updateData(frmData, updateType, modal, activeTab) {
        var validUpdate = true,
            frm = $('#' + frmData),
            textAlert = 'The order has been updated.',
            swalText = '';

        switch (updateType) {
            case ('add-note'): // Add New Comment
                if ($('#commentText').val() === '') {
                    swal({
                        type: 'error',
                        html: true,
                        title: 'Error',
                        text: 'Please write some on message section'
                    });
                    return;
                }

                textAlert = 'The note has been added';

                break;

            case ('forwarded-email'):
                textAlert = 'The email has been sent';

                break;

            case ('resend-order-email'):
                textAlert = 'The email has been sent';

                break;

            case ('renew-agent'):
                swalText = validateAgentInfoForRenewServiceProcess();

                if (swalText !== '') {
                    validUpdate = false;

                    swal({
                        type: 'error',
                        html: true,
                        title: 'Error',
                        text: swalText
                    });

                    return;
                } else {
                    textAlert = 'The agent service has been renewed';
                }

                break;

            case ('update-agent-info'):
                swalText = validateAgentInfoForDataUpdateProcess();

                if (swalText !== '') {
                    validUpdate = false;

                    swal({
                        type: 'error',
                        html: true,
                        title: 'Error',
                        text: swalText
                    });

                    return;
                }  else {
                    textAlert = 'The agent info has been updated';
                }

                break;

            case ('update-billing-info'):
                var response = validateBillingInfoForDataUpdateProcess();

                if (response['valid'] === false && response['errorMessage'] !== "") {
                    swal({
                        type: 'error',
                        html: true,
                        title: 'Error',
                        text: response['errorMessage']
                    });
                    return;
                }

                break;

            case ('update-client-info'):
                swalText = validateClientInfoForDataUpdateProcess();

                if (swalText !== '') {
                    swal({
                        type: 'error',
                        html: true,
                        title: 'Error',
                        text: swalText
                    });

                    return;

                }  else {
                    textAlert = 'The client info has been updated';
                }
                break;

            case ('update-comp-info'):
                validUpdate = validateCompanyInfoForDataUpdateProcess(frmData, updateType, modal);

                break;

            case ('update-contact-info'):
                validUpdate = validateContactInfoForUpdateProcess();

                break;

            case ('update-issue'): // Add New Issue
                swalText = validateIssueInfoForDataUpdateProcess(frmData);

                // Additional Information Request special case
                if ($('#type_id').val() === '8' && swalText === 'AdditionalInformationIssueSuccess') {
                    return;
                } else if (swalText !== '') {
                    swal({
                        type: 'error',
                        html: true,
                        title: 'Error',
                        text: swalText
                    });

                    return;

                } else {
                    textAlert = 'The order issue has been updated';
                }

                break;

            case ('update-license-logix-info'):
                if (!orderDetailJs._checkValidationLicenseLogixForm(frmData)) {
                    swal({
                        type: 'error',
                        html: true,
                        title: 'Error',
                        text: "Please fill out the form fields"
                    });
                    return false;
                }

                break;

            case ('update-ss4-info'):
                var identificationNumberType = $('#identification_number_type').val();
                var identificationNumberValue = $('#ss4ssn').val();
                var isForeignEIN = $('#foreign_ein').val();

                if (isForeignEIN == 0 && identificationNumberType == 1 && !interface.isSSN(identificationNumberValue)) {
                    swal({
                        type: 'error',
                        html: true,
                        title: 'Error',
                        text: "Please provide a valid SSN number"
                    });
                    return false;
                } else if (isForeignEIN == 0 && identificationNumberType == 0 && !interface.isITIN(identificationNumberValue)) {
                    var message = "Please provide a valid ITIN number";

                    if (!identificationNumberValue.startsWith(9)) {
                        message = "ITIN number must start with 9";
                    }

                    swal({
                        type: 'error',
                        html: true,
                        title: 'Error',
                        text: message
                    });
                    return false;
                }

                break;
            case ('update-boir-info'):
                validUpdate = validateBoirInfoForDataUpdateProcess(frm, updateType, modal);
                break;
            case ('correct-boir-info'):
                validUpdate = validateBoirInfoForDataUpdateProcess(frm, updateType, modal);
                break;
            case ('pin-comment'):
                textAlert = 'The pin has been updated';
                break;
        }

        if (validUpdate) {
            processUpdate(frm, textAlert, updateType, frmData, modal, activeTab);
        }
    }

    // AJAX function to process data updating.
    function processUpdate(frm, textAlert, updateType, frmData, modal, activeTab) {
        $.ajax({
            type: 'POST',
            dataType: 'json',
            data: {
                'requestData': frm.serializeFormJSON(),
                'ordernum': ordernum,
                'transnum': transnum,
                'updateType': updateType,
                'activeTab': activeTab
            },
            url: "https://db.incfile.com/incfile/order/edit-ajax/225070363866",
            success: function (response) {
                if (response.status) {
                    if (updateType === 'add-note') {
                        // Set on null comment fields
                        $('#commentText, #commentId').val('');
                        $('#btnTextSaveComment').text('Add');

                        // Hide modal with update info
                        $('#' + modal).modal('hide');

                        if (frm.find('#commentOnAutomationModal').first().is(':checked')) {
                            location.reload();
                        } else {
                            notes.loadComments(transnum);
                            notes.loadCommentsToModal();
                            notes.loadChildCommentsToModal();
                            notes.loadParentCommentsToModal();
                        }
                    } else {
                        swal({
                            title: 'Good Job!',
                            text: textAlert,
                            type: 'success',
                            confirmButtonText: 'OK',
                            closeOnConfirm: true
                        }, function () {
                            $.unblockUI();
                            $('#' + modal).modal('hide');

                            if (updateType !== 'forwarded-email') {
                                // Store of active tab for reload action.
                                if (response.activeTab) {
                                    sessionStorage.setItem('activeTab', response.activeTab);
                                }
                                location.reload(true);
                            }
                        });
                    }
                } else if (response.text){
                    swal({
                            title: 'Error',
                            text: response.text,
                            type: 'error',
                            confirmButtonText: 'OK',
                            closeOnConfirm: true
                        }, function () {
                            $.unblockUI();
                            $('#' + modal).modal('hide');
                    });
                }
            }
        });
    }

    // AJAX function to update the registered agent subscription information.
    function updateAgentSubscriptionData(frmData, updateType, modal, activeTab, ordernum, transnum, url) {
        var frm = $('#' + frmData);

        $.ajax({
            type: "POST",
            dataType: "json",
            data: {
                'requestData': frm.serializeFormJSON(),
                'ordernum': ordernum,
                'transnum': transnum,
                'updateType': updateType,
                'activeTab': activeTab
            },
            url: url,
            success: function (res) {
                if (res.status) {
                    swal({
                        title: 'Good Job!',
                        text: 'The order has been updated.',
                        type: "success",
                        confirmButtonText: "OK",
                        closeOnConfirm: true
                    }, function () {
                        $.unblockUI();
                        $('#' + modal).modal('hide');

                        if (res.activeTab) {
                            sessionStorage.setItem('activeTab', res.activeTab);
                        }
                        location.reload(true);
                    });
                }
            }
        });
    }

    // ---- Update Order Info : validations -------------------------------------------------------
    // Auxiliary function to validate the Registered Agent info before to data Renew the Agent Service process.
    function validateAgentInfoForRenewServiceProcess () {
        var newExpirationDate = $('#new-expiration-date'),
            renewPrice = $('#renew-service-agent-price'),
            checkNumber = $('#check-number');

        if (newExpirationDate.val() === '') {
            newExpirationDate.css({'border': '1px solid red'});
            return 'Please enter a valid date';
        } else {
            newExpirationDate.css({'border': ''});
        }

        if (renewPrice.val() === '' || parseInt(renewPrice.val()) === 0) {
            renewPrice.css({'border': '1px solid red'});
            return 'Please enter a valid Service Price';
        }  else {
            renewPrice.css({'border': ''});
        }

        if ($('#check-transaction-yes').is(':checked') && checkNumber.val( ) === '') {
            checkNumber.css({'border': '1px solid red'});
            return 'Please enter a valid Check Number';
        } else {
            checkNumber.css({'border': ''});
        }

        return '';
    }

    // Auxiliary function to validate the Registered Agent info before to data update process.
    function validateAgentInfoForDataUpdateProcess() {
        var agentService = $('#registered-agent-service').val(),
            individualType = $('#agent-individual-type'),
            agentCountyRequired = false;

        if (agentService === NO_SERVICE) {
            // Agent from client.
            if (individualType.is(':checked') || individualType.attr('checked')) {
                // Individual type validations.
                var firstNameField = $('#agent-first-name'),
                    lastNameField = $('#agent-last-name');

                if (firstNameField.val() === '') {
                    firstNameField.css({'border': '1px solid red'});
                    return 'Please complete the First Name field';
                } else {
                    firstNameField.css({'border': ''});
                }

                if (lastNameField.val() === '') {
                    lastNameField.css({'border': '1px solid red'});
                    return 'Please complete the Last Name field';
                } else {
                    lastNameField.css({'border': ''});
                }
            } else {
                // Company type validations.
                var agentCompField = $('#agent-comp');

                if (agentCompField.val() === '') {
                    agentCompField.css({'border': '1px solid red'});
                    return 'Please complete the Agent Company field';
                } else {
                    agentCompField.css({'border': ''});
                }

                if (1) {
                    var authorizedFirstName = $('#ap-first-name'),
                        authorizedLastName = $('#ap-last-name');

                    if (authorizedFirstName.val() === '') {
                        authorizedFirstName.css({'border': '1px solid red'});
                        return 'Please complete the Authorized Person/Signer - First Name field';
                    } else {
                        authorizedFirstName.css({'border': ''});
                    }

                    if (authorizedLastName.val() === '') {
                        authorizedLastName.css({'border': '1px solid red'});
                        return 'Please complete the Authorized Person/Signer - Last Name field';
                    } else {
                        authorizedLastName.css({'border': ''});
                    }
                }

                if (0) {
                    var authorizedPhone = $('#ap-phone');

                    if (authorizedPhone.val() === '') {
                        authorizedPhone.css({'border': '1px solid red'});
                        return 'Please complete the Authorized Person/Signer - Phone Number field';
                    } else if (authorizedPhone.val().length !== 14) {
                        authorizedPhone.css({'border': '1px solid red'});
                        return 'Please enter a valid Phone Number';
                    } else {
                        authorizedPhone.css({'border': ''});
                    }
                }
            }

            // Address validations.
            var street1Field = $('#agent-street-1'),
                cityField = $('#agent-city'),
                zipCodeField = $('#agent-zip'),
                countyField = $('#agent-county');

            if (street1Field.val() === '') {
                street1Field.css({'border': '1px solid red'});
                return 'Please complete the Street Address field';
            } else {
                street1Field.css({'border': ''});
            }

            if (cityField.val() === '') {
                cityField.css({'border': '1px solid red'});
                return 'Please complete the City field';
            } else {
                cityField.css({'border': ''});
            }

            if (zipCodeField.val() === '') {
                zipCodeField.css({'border': '1px solid red'});
                return 'Please complete the Zip Code field';
            } else if (!interface.validZip(zipCodeField.val())) {
                zipCodeField.css({'border': '1px solid red'});
                return 'Please enter a valid Zip Code';
            } else {
                zipCodeField.css({'border': ''});
            }

            if (agentCountyRequired && countyField.is(':visible') && countyField.val() === '') {
                countyField.css({'border': '1px solid red'});
                return 'Please select a County';
            } else {
                countyField.css({'border': ''});
            }
        }

        return '';
    }

    // Auxiliary function to validate the Billing Profile info before to data update process.
    function validateBillingInfoForDataUpdateProcess() {
        // Validate Card info
        var name = $('#frmEditBillingInfo [name="name"]').val();
        var cardNumber = $('#frmEditBillingInfo [name="cardnumber"]').val();
        var cardType = $('#frmEditBillingInfo [name="cctype"]').val();
        var cardCCV = $('#frmEditBillingInfo [name="cvm"]').val();
        var expMonth = $('#frmEditBillingInfo [name="expmonth"]').val()
        var expYear = $('#frmEditBillingInfo [name="expyear"]').val();
        var street = $('#frmEditBillingInfo [name="street1"]').val();
        var city = $('#frmEditBillingInfo [name="city"]').val();
        var state = $('#frmEditBillingInfo [name="state"]').val();
        var zip = $('#frmEditBillingInfo [name="zip"]').val();

        var validCard = false;
        var d = new Date();
        var curMonth = d.getMonth() + 1;
        var valid = false;
        var errorMessage = "";

        if (cardNumber !== '' && cardType !== '') {
            if (cardType === 'A') {
                validCard = (cardNumber.length === 15);
            } else if (['D', 'V', 'M'].indexOf(cardType) !== -1) {
                validCard = (cardNumber.length === 16);
            } else {
                validCard = true;
            }
        }

        if (name === '') {
            errorMessage = "Please enter name of the credit card holder";
        } else if (cardType === '') {
            errorMessage = "Please enter card type";
        } else if (cardNumber === '') {
            errorMessage = 'Please enter a card number';
        } else if (validCard === false) {
            errorMessage = 'Please enter a valid credit card';
        } else if (expMonth === "") {
            errorMessage = "Please enter the expiration month of the credit card";
        } else if (expYear === "") {
            errorMessage = "Please enter the expiration year of the credit card";
        } else if ((expYear === d.getFullYear()) && (expMonth < curMonth)) {
            errorMessage = "The date you have entered shows the card to be expired.";
        } else if (expYear < d.getFullYear()) {
            errorMessage = "The date you have entered shows the card to be expired.";
        } else if (cardCCV === '') {
            errorMessage = 'Please enter the security card code.';
        } else if (cardType === 'A' && cardCCV.length !== 4) {
            errorMessage = "The Card code must be 4 digits";
        } else if (cardType !== 'A' && (cardCCV === '' || cardCCV.length !== 3)) {
            errorMessage = "The Card code must be 3 digits";
        } else if (street === "") {
            errorMessage = "Please enter address";
        } else if (city === "") {
            errorMessage = "Please enter a city";
        } else if (state === "") {
            errorMessage = "Please select a state";
        } else if (!interface.validZip(zip)) {
            errorMessage = "Please enter a valid postal/zip code";
        } else {
            valid = true;
        }

        return [valid, errorMessage];
    }

    // Auxiliary function to validate the Client info before to data update process.
    function validateClientInfoForDataUpdateProcess() {
        var text = '';
        var firstNameInput = $('#clientFirstName');
        var lastNameInput = $('#clientLastName');
        var emailInput = $('#clientEmail');
        var phoneInput = $('#clientPhone');

        firstNameInput.css({'border': ''});
        lastNameInput.css({'border': ''});

        if (firstNameInput.val() === '') {
            text = 'Please complete the first name field';
            firstNameInput.css({'border': '1px solid red'});
        }

        if (lastNameInput.val() === '') {
            text = 'Please complete the last name field';
            lastNameInput.css({'border': '1px solid red'});
        }

        if (emailInput.hasClass('error')) {
            text = 'Please complete the email address field';
        }

        if (phoneInput.hasClass('error')) {
            text = 'Please complete the phone number field';
        }

        return text;
    }

    // Auxiliary function to validate the Company info before to data update process.
    function validateCompanyInfoForDataUpdateProcess(frmData, updateType, modal) {
        var validInfo = true;

        if (admin_level && parseInt(admin_level, 10) != 1) {
            if (!isValidCompFilingDate('#compFilingDate')) {
                return false;
            }
        }

        if (!isValidTaxPayerInformation()) {
            return false;
        }

        if (!validateNaicCode()) {
            return false;
        }

        if (validInfo) {
            if ($('#orig_ordernum').val() > 0) {
                validationToChangeParentOrder(frmData, updateType, modal);
            } else {
                validateReservedWordsInCompanyName(frmData, updateType, modal);
            }
        }
    }

    function validateBoirInfoForDataUpdateProcess(frm, updateType, modal) {
        let validForm = true;

        const addInvalidClass = (element) => {
            element.classList.add('invalid');
            validForm = false;
        };

        const isEmpty = (value) => value.trim() === '';

        const shouldSkipInput = (input, ownerElement) => {
            const id = input.id;
            const countryId = parseInt(ownerElement.querySelector('.country-id')?.value || 0);
            const documentTypeId = parseInt(ownerElement.querySelector('.document_type_id')?.value || 0);

            const isPassport = documentTypeId === BOIR_ID_DOCUMENT_TYPE.PASSPORT;
            const countryIncluded = countries.includes(countryId);

            const skipConditions = [
                id.includes('fincen_id'),
                id.includes('[document][number]'),
                id.includes('_file'),
                (id.includes('[address][state_other]') && countryIncluded),
                (id.includes('[address][state_id]') && !countryIncluded),
                (id.includes('[document][state_id]') && isPassport)
            ];

            return skipConditions.some(condition => condition);
        };

        const validateInputs = (selector, ownerElement) => {
            const inputs = ownerElement.querySelectorAll(selector);
            inputs.forEach(input => {
                if (shouldSkipInput(input, ownerElement)) return;
                if (isEmpty(input.value)) addInvalidClass(input);
            });
        };

        // Validate #fincen_id
        if ($('#existing_id').prop("checked")) {
            const fincenIdElement = document.getElementById('fincen_id');
            if (isEmpty(fincenIdElement.value)) {
                addInvalidClass(fincenIdElement);
            }
        } else if ($('#non_existing_id').prop("checked")) {
            // Validate applicant inputs
            const applicantSection = document.getElementById('boir_applicant_information');
            validateInputs('input, select', applicantSection);
        }

        // Validate company inputs
        const companySection = document.getElementById('boir_company_information');
        validateInputs('input, select', companySection);

        const ownerTotalElement = document.getElementById('ownerTotal');
        const ownerTotalValue = parseInt(ownerTotalElement.value || 0);

        // Validate owner inputs
        for (let i = 0; i < ownerTotalValue; i++) {
            const ownerSection = document.querySelector(`.owner-${i}`);
            if (ownerSection) {
                validateInputs('input, select', ownerSection);
            }
        }

        return validForm;
    }

    // Auxiliary function to validate the Contact info before to data update process.
    function validateContactInfoForUpdateProcess() {
        var contactFields = [
            $('#contactFirstName'),
            $('#contactLastName'),
            $('#contactEmail'),
            $('#contactStreet1'),
            $('#contactCity'),
            $('#contactState'),
            $('#contactZip')
        ];

        if (!validateEmptyFields(contactFields)) {
            return false;
        }

        if (!validateFormatEmail($('#contactEmail'))) {
            return false;
        }

        if (!contactPhoneInput.isValidPhone()) {
            swal({
                type: 'error',
                html: true,
                title: 'Error',
                text: "Please enter a valid phone number"
            });

            $('#contactPhone').addClass('invalid');

            return false;
        }

        let currentEmail = "contato@panthermamakids.com";


        if (currentEmail != $('#contactEmail').val()) {
            validateEmailExists($('#contactEmail'), $('#update-contact-info'));
            if (emailExists) {
                return false;
            } else {
                $('#contactEmail').css({'border': ''});
            }
        }

        return true;
    }

    // Auxiliary function to validate the Issue info before to data update process.
    function validateIssueInfoForDataUpdateProcess(frmData) {
        var text = '';
        var issueTypeId = $('#type_id');

        issueTypeId.css({'border': ''});

        switch (issueTypeId.val()) {
            case (''):
                text = 'Please select an issue type';
                issueTypeId.css({'border': '1px solid red'});

                break;

            case ('2'): // Pending issue
            case ('3'): // Payment issue
            case ('5'): // EIN issue
                var comment = $('#comment');

                comment.css({'border': ''});

                if (comment.val().trim().length === 0) {
                    text = 'Please complete the message field';
                    $('#comment').css({'border': '1px solid red'});
                }

                break;

            case ('4'): // Spelling Confirmation issue
                if ($('#' + frmData + " input:checkbox:checked").length === 0) {
                    text = 'Please select any option';
                }

                break;

            case ('7'): // Additional Funds Request issue
                var amount = $('#frmUpdateIssue [name="amount"]');
                var description = $('#frmUpdateIssue [name="description"]');
                var message = $('#frmUpdateIssue [name="comment"]');

                amount.css({'border': ''});
                description.css({'border': ''});
                message.css({'border': ''});

                if (message.val().trim().length === 0) {
                    text = 'Please complete the email message field';
                    message.css({'border': '1px solid red'});
                }

                if (description.val().length === 0) {
                    text = 'Please complete the amount description field';
                    description.css({'border': '1px solid red'});
                }

                if (amount.val().length === 0) {
                    text = 'Please complete the amount field';
                    amount.css({'border': '1px solid red'});
                } else if (amount.val() <= 0) {
                    text = 'Invalid amount value';
                    amount.css({'border': '1px solid red'});
                }

                break;

            case ('8'): // Additional Information issue
                text = processAdditionalInformationRequest();
        }

        return text;
    }

    // ---- Update Order Info : Auxiliary validation functions ------------------------------------
    // CompanyInfoData : Swal function to validate if the company filing date is not on future.
    function isValidCompFilingDate(formDateSelector) {
        var compFilingDate = $(formDateSelector);

        if (compFilingDate && isFutureDate(compFilingDate.val())) {
            swal({
                type: 'error',
                html: true,
                title: 'Error',
                text: 'The date of formation can not be in the future'
            });

            compFilingDate.css({'border': '1px solid red'});

            return false;
        }

        compFilingDate.css({'border': ''});

        return true;
    }

    // CompanyInfoData : Auxiliary function to know if some date is on future.
    function isFutureDate(formDate) {
        var currentDate = new Date();
        var givenDate = new Date(formDate);

        return currentDate < givenDate;
    }

    // CompanyInfoData : Auxiliary function to validate correct format of the taxpayer and web file information.
    function isValidTaxPayerInformation() {
        let taxpayer = $('#taxpayer');
        let webFile = $('#webfile');
        let regWebFile = /^[A-Za-z]{2}[0-9]{6}$/;

        if (taxpayer.is(':visible') && webFile.is(':visible')) {
            if(taxpayer.val() != '' && taxpayer.val() > 0 && (!interface.isNumber(event) || taxpayer.val().length != 11)) {
                return false;
            }

            if(webFile.val() != '' && (webFile.val().length != 8 || !regWebFile.test(webFile.val()))) {
                return false;
            }
        }

        return true;
    }

    // CompanyInfoData : Auxiliary function to validate if the naic code length.
    function validateNaicCode() {
        let naicCode = $('#naicCodeId');

        if (naicCode.is(':visible') && naicCode.val().length) {
            let naicSubCode = $('#naicSubcodeId');

            if (naicSubCode.is(':visible') && naicSubCode.val().length) {
                return true;
            }

            naicSubCode.css('border-color', 'red');

            return false;
        }

        return true;
    }

    // CompanyInfoData : AJAX Function to validate the info to change the parent order.
    function validationToChangeParentOrder(frmData = null, updateType, modal = null, newOrdernum = null) {
        var orig_ordernum = newOrdernum ?? $('#orig_ordernum').val();

        $.ajax({
            type: 'POST',
            dataType: 'JSON',
            data: {
                currentOrdernum: ordernum,
                newOrigOrdernum: orig_ordernum,
            },
            url: 'https://db.incfile.com/incfile/order/client/validate-same-client',
            success: function (response) {
                if (response.error) {
                    var message = 'The transfer can\'t be processing.';

                    // Set the error message to show it in the swal alert.
                    switch (response.error) {
                        case ('no_current_order'):
                            message = 'The current order doesn\'t match with no one record on DB.';
                            break;

                        case ('no_new_parent_order'):
                            message = 'The new parent order doesn\'t match with no one record on DB.';
                            break;

                        case ('no_new_main_order'):
                            message = 'The new parent order type is not a main order type.';
                            break;

                        case ('no_current_client_id'):
                            message = 'The client of the current order doesn\'t match with any existing client.';
                            break;

                        case ('no_new_client_id'):
                            message = 'The client of the new parent order doesn\'t match with any existing client.';
                            break;

                        case ('not_same_client'):
                            message = 'The clients of orders don\'t match. The client needs to be the same.';
                            break;

                        case ('not_same_company_name'):
                            message = 'The orders don\'t have the same company name';
                            break;

                        case ('not_same_entity_type'):
                            message = 'The orders don\'t have the same entity type';
                            break;

                        case ('orders_with_ra_service_active'):
                            message = 'The order would be replaced for an existing Main order, however, it\'s not possible because both orders had an active RA service';
                            break;

                        case ('orders_with_ra_service_active_fq_flow'):
                            message = 'The order would be replaced for an existing FQ order, however, it\'s not possible because both orders had an active RA service';
                            break;
                    }

                    if (updateType === 'update-comp-info') {
                        $('#orig_ordernum').css({'border': '1px solid red'});
                    }

                    setTimeout(() => {
                        swal({
                            type: 'error',
                            html: true,
                            title: 'Error',
                            text: message
                        });
                    }, 1000);
                } else {
                    if (updateType === 'update-comp-info') {
                        $('#orig_ordernum').css({'border': ''});
                        validateReservedWordsInCompanyName(frmData, updateType, modal);

                    } else if (updateType === 'link-parent') {
                        probableParent.processingLinkToParent(newOrdernum);

                    } else if (
                        updateType === 'link-and-transfer-registered-agent'
                        || updateType === 'link-and-transfer-virtual-address'
                    ) {
                        var transferService = true,
                            serviceType = updateType === 'link-and-transfer-registered-agent'
                                ? 'registered-agent' : 'virtual-address';

                        probableParent.processingLinkToParent(newOrdernum, transferService, serviceType);
                    }
                }
            }
        });
    }

    // ContactInfoData : Function to validate a correct format of phone number.
    // ---- Contact Phone (intlTelInput) ----------------------------------------------------------
    if (document.getElementById('contactPhone')) {
        var contactPhoneInput = window.phoneInput({
            phoneInputId: '#contactPhone',
            countryInputId: '#contactPhoneCountry',
            dialCodeInputId: '#contactPhoneDialCode',
            errorMsgId: '#error-msg'
        });
    }

    // IssueInfoData : Function to validate Additional Information Request Issue before to data update process.
    function processAdditionalInformationRequest() {
        var questions = $(".questionRow");
        var text = '';
        var requestBody = [];
        var commentText = '\n';
        var exit = false;

        // No selected question
        if (questions.length === 0) {
            text = 'Please add at least one question';
            exit = true;
        }

        // Clean inputs after validations
        questions.each(function () {
            var element = $(this);
            element.find('.slcQuestionReason').css('border-color','');
        })

        // Validate each question
        questions.each(function (index, value) {
            var element = $(this);
            var field = element.attr('data-field');
            var readableField = element.attr('data-field-readable');
            var reason = element.find('.slcQuestionReason').val();

            // No reason selected
            if (reason === '') {
                element.attr('data-value-selector');
                element.find('.slcQuestionReason').css('border-color','red');
                element.find('.slcQuestionReason').focus();
                text = 'Please provide a valid reason for the highlighted field';
                exit = true;
            }

            // Other reason selected but no content in the Explain of reason
            if (reason === 'other') {
                reason = element.find('.txtReasonOther').val();

                if (reason.toString().trim() === '') {
                    let textBox = element.find('.txtReasonOther');
                    textBox.css('border-color','red');
                    textBox.focus();
                    text = 'Please provide a valid reason for the highlighted field';
                    exit = true;
                }
            }

            var member = element.attr('data-member');
            if (member && member !== '') {
                member = $("#" + element.attr('data-value-selector')).val();
            } else {
                member = 'no member';
            }

            // Looking for duplicates in the requestBody Array
            requestBody.forEach(( obj ) => {
                if (obj.field === field && obj.reason === reason && obj.member === member) {
                    element.css('border-color','red');
                    text = 'Duplicated questions have been found, please review the questions elements';
                    exit = true;
                }
            });

            requestBody.push({
                field: field,
                reason: reason,
                member: member
            });

            var pipe = index === 0 ? '' : '| ';

            commentText += pipe + readableField + ': ' + reason + ' ';
        })

        if (!exit) {
            sendAdditionalInformationRequest(requestBody, commentText);
            text = 'AdditionalInformationIssueSuccess';
        }

        return text;
    }

    // IssueInfoData : AJAX function to raise an Additional Information Request issue.
    function sendAdditionalInformationRequest(requestBody, comment) {
        $.blockUI();
        $.ajax({
            type: "POST",
            dataType: "json",
            url: "https://db.incfile.com/incfile/order/edit-ajax/225070363866",
            data: {
                updateType: 'update-issue',
                requestData:{
                    type_id: 8,
                    ordernum: ordernum,
                    transnum: transnum,
                    issueData: requestBody,
                    comment: comment
                }
            },
            success: function(res) {
                swal({
                    title: 'Good Job!',
                    text: 'Additional Information Requested To The Customer',
                    type: "success",
                    confirmButtonText: "OK",
                    closeOnConfirm: true
                },function(){
                    $.unblockUI();
                    document.location.reload();
                });
            },
            error: function(res) {
                swal({
                    type: 'error',
                    html: true,
                    title: 'Error',
                    text: "Something went wrong while updating the order status, please retry"
                });
            }
        });
    }


    /**********************************************************************************************
        Validations : Auxiliary functions from field validations
     *********************************************************************************************/
    // General validations : Function to validate content in some fields (array).
    function validateEmptyFields(fields) {
        var validInfo = true;

        for (var i = 0; i < fields.length; i++) {
            if (fields[i].val() === '') {
                swal({
                    type: 'error',
                    html: true,
                    title: 'Error',
                    text: "Please complete the field"
                });

                fields[i].addClass('invalid');
                fields[i].css({'border': '1px solid red'});
                validInfo = false;

                return;

            } else {
                fields[i].removeClass('invalid');
                fields[i].css({'border': ''});
                validInfo = true;
            }
        }

        return true;
    }

    // General validations : Function to validate a correct format of email.
    function validateFormatEmail(emailInput) {
        var reg = new RegExp(/^([\w\.\-]+)@([\w\-]+)((\.(\w)+)+)$/i);

        if (!reg.test(emailInput.val())) {
            swal({
                type: 'error',
                html: true,
                title: 'Error',
                text: "Please enter a valid email address"
            });

            emailInput.addClass('invalid');
            emailInput.css({'border': '1px solid red'});

            return false;
        }

        emailInput.removeClass('invalid');
        emailInput.css({'border': ''});

        return true;
    }


    /**********************************************************************************************
        Date of Formation & State of Formation of FQ orders functionality
     *********************************************************************************************/
    // Update Date of Formation for Foreign Qualification
    function updateForeignDOQ() {
        $.ajax({
            type: "POST",
            dataType: "json",
            data: {
                'ordernum': ordernum,
                'foreign_qual_dof' : $('#foreign_qual_dof').val()
            },
            url: "https://db.incfile.com/incfile/order/update-formation-date",
            success: function (res) {
                if (res.status) {
                    swal({
                        title: 'Good Job!',
                        text: 'The Date of Formation has been updated.',
                        type: "success",
                        confirmButtonText: "OK",
                        closeOnConfirm: true
                    }, function () {
                        window.location.reload();
                    });
                }
            }
        });
    }

    // Update State of Formation for Foreign Qualification
    function updateForeignSOF() {
        $.ajax({
            type: "POST",
            dataType: "json",
            data: {
                'ordernum': ordernum,
                'foreign_qual_sof' : $('#foreign_qual_sof').val()
            },
            url: "https://db.incfile.com/incfile/order/update-formation-state",
            success: function (res) {
                if (res.status) {
                    $('#js-reload-sof-after-updated').text($('#foreign_qual_sof').val());

                    swal({
                        title: 'Good Job!',
                        text: 'The State of Formation has been updated.',
                        type: "success",
                        confirmButtonText: "OK",
                        closeOnConfirm: true
                    }, function () {
                        window.location.reload();
                    });
                }
            }
        });
    }


    /**********************************************************************************************
        Billing Profile functionality
     *********************************************************************************************/
    var billing = {
        loadProfiles: function (ordernum) {
            var paymentMethods;
            $.ajax({
                type: "GET",
                dataType: "json",
                global: false,
                async: false,
                url: "https://db.incfile.com/incfile/order/load-billing-profiles?ordernum=" + ordernum,
                success: function (response) {
                    if (response.status) {
                        paymentMethods = response.paymentMethods;
                        $.each(paymentMethods, function(key, paymentMethod) {
                            let option = paymentMethod.type.slug === 'paypal'
                                ? '<option value=' + paymentMethod.id + '> Paypal: ' + paymentMethod.details.paypalEmail + (paymentMethod.is_primary ? ' (Primary)' : '') + '</option>'
                                : '<option value=' + paymentMethod.id + '>' + paymentMethod.details.last_digits + (paymentMethod.is_primary ? ' (Primary)' : '') + '</option>';
                            $("#selectPaymentMethods").append(option);
                        });
                    } else {
                        // Hide billing tab
                        $('.vbilling').hide();
                        $('#vbilling').hide();
                        $('#raSubscriberButton').hide();
                    }
                }
            });
            return paymentMethods;
        },

        loadSelectedProfileInfo: function (paymentMethod) {
            window.preferredPaymentMethod = paymentMethod;
            // Set tab heading.
            $('#preferredProfileTitle').html('COMPANY PAYMENT METHODS');
            // Fill information for content section.
            $('#preferredProfileClient').html(paymentMethod.wallet.billable.full_name + ' (<a href="/incfile/companies/' + paymentMethod.wallet.billable.id + '" target="_blank" title="View Client Companies">' + paymentMethod.wallet.billable.id + '</a>)');
            $('#preferredProfileId').val(paymentMethod.id);

            if (paymentMethod.type.slug !== 'paypal') {
                $('#preferredProfileCardHolderName').html(paymentMethod.details.cardholder);
                $('#preferredProfileAddress').html(paymentMethod.details.address?.line_1 ?? 'N/A');
                if (paymentMethod.details.address?.city) {
                    $('#preferredProfileCityStateZip').html(paymentMethod.details.address.city + ', ' + paymentMethod.details.address.state + ' ' + paymentMethod.details.address.zip);
                } else {
                    $('#preferredProfileCityStateZip').html('N/A');
                }
                $('#preferredProfileCountry').html(paymentMethod.details.address?.country ?? 'N/A');
                $('#preferredProfileCardType').html(paymentMethod.type.name);
                $('#preferredProfileExpiry').html(paymentMethod.details.expiry_month + '/' + paymentMethod.details.expiry_year);
                $('#preferredProfileLast4').html(paymentMethod.details.last_digits);
                $('#avsResponse').html(paymentMethod.avs);
                // Add profile information on the edit modal.
                let firstName = paymentMethod.details.cardholder.split(' ', 1)[0];
                $('#frmEditBillingInfo [name="bFirstName"]').val(firstName);
                $('#frmEditBillingInfo [name="bLastName"]').val(paymentMethod.details.cardholder.substring(firstName.length));
                $('#frmEditBillingInfo [name="cctype"]').val(paymentMethod.type.name);
                $('#frmEditBillingInfo [name="expmonth"]').val(paymentMethod.details.expiry_month);
                $('#frmEditBillingInfo [name="expyear"]').val(paymentMethod.details.expiry_year);
                $('#frmEditBillingInfo [name="street1"]').val(paymentMethod.details.address?.line_1);
                $('#frmEditBillingInfo [name="city"]').val(paymentMethod.details.address?.city);
                $('#frmEditBillingInfo [name="state"]').val(paymentMethod.details.address?.state);
                $('#frmEditBillingInfo [name="zip"]').val(paymentMethod.details.address?.zip);
                $('#frmEditBillingInfo [name="paymentMethodId"]').val(paymentMethod.id);
                return;
            }
            $('#avsResponse, #preferredProfileLast4, #preferredProfileExpiry, #preferredProfileCardType, #preferredProfileCountry, #preferredProfileCityStateZip, #preferredProfileCityStateZip, #preferredProfileAddress, #preferredProfileCardHolderName' ).html('N/A');
        },

        validateUnlink: function () {
            let isConfirmed = window.preferredPaymentMethod.type.slug === 'paypal'
                ? window.preferredPaymentMethod.details.paypalEmail === $('#confirmationPaypalEmail').val()
                : $('#paymentMethodLastDigits').val() === $('#preferredProfileLast4').html()

            if (isConfirmed) {
                $('.js-confirmUnlink').removeAttr("disabled");
                $('.js-confirmUnlink').attr('onClick', 'unlinkPaymentMethod();');
            } else {
                $('.js-confirmUnlink').attr("disabled", 'disabled');
                $('.js-confirmUnlink').removeAttr('onclick');
            }
        },
    };
    // AJAX function to unlink the selected payment method.
    function unlinkPaymentMethod() {
        $.ajax({
            type: "POST",
            dataType: "json",
            data: {
                'paymentMethodId': $('#preferredProfileId').val(),
                'ordernum': ordernum,
            },
            url: "https://db.incfile.com/incfile/unlink",
            success: function (response) {
                if (response.status) {
                    swal({
                        title: 'Good Job!',
                        text: 'Payment Method Unliked',
                        type: "success",
                        confirmButtonText: "OK",
                        closeOnConfirm: true
                    }, function () {
                        $.unblockUI();
                        $('#modalUnlinkPaymentMethod').modal('hide');
                        document.location.reload();
                    });

                } else {
                    swal({
                        type: 'error',
                        html: true,
                        title: 'Error',
                        text: 'Something went wrong while unliking the payment method, please retry'
                    });
                }
            },
            error: function() {
                swal({
                    type: 'error',
                    html: true,
                    title: 'Error',
                    text: 'Something went wrong while unliking the payment method, please retry'
                });
            }
        });
    }


    /**********************************************************************************************
        Clients functionality
     *********************************************************************************************/
    // Function to pre-load client modal to edit client info with specific client id.
    function loadUpdateClientInfoModal(clientId, firstName, lastName) {
        var contactInfo = getClientPhoneAndEmail(document.getElementById('clientContact-' + clientId).innerText);

        window.clientEmailSelected = contactInfo.email;
        window.clientPhoneSelected = contactInfo.phone;

        $('#clientFirstName').css({'border': ''});
        $('#clientLastName').css({'border': ''});
        $('#clientEmail').css({'border': ''});
        $('#clientPhone').css({'border': ''});

        document.getElementById('clientId').value = clientId;
        document.getElementById('clientFirstName').value = firstName;
        document.getElementById('clientLastName').value = lastName;
        document.getElementById('clientEmail').value = window.clientEmailSelected;
        document.getElementById('clientPhone').value = window.clientPhoneSelected;

        $('#modalEditClientInfo').modal('show');
    }

    // Blur event to validate the client email before to be edit.
    $('#clientEmail').on('blur', function () {
        validateClientEmailForDataUpdateProcess();
    });

    // Function to validate client email before data update process.
    function validateClientEmailForDataUpdateProcess() {
        var emailInput = $('#clientEmail');
        var saveClientButton = $('#update-client-info');

        emailInput.css({'border': ''});

        if (emailInput.val() === '') {
            swal({
                type: 'error',
                html: true,
                title: 'Error',
                text: 'Please complete the email address field',
            });

            emailInput.css({'border': '1px solid red'});
            emailInput.addClass('error');
            saveClientButton.addClass('disabled');

        } else if (!validateFormatEmail(emailInput)) {
            saveClientButton.addClass('disabled');

        } else if (window.clientEmailSelected !== emailInput.val()) {
            $.ajax({
                type: 'POST',
                dataType: 'JSON',
                data: {email: emailInput.val()},
                url: 'https://db.incfile.com/incfile/order/client/exist-email',
                success: function (response) {
                    if (response.exist) {
                        swal({
                            type: 'error',
                            html: true,
                            title: 'Error',
                            text: 'The email address is already used',
                        });
                        emailInput.css({'border': '1px solid red'});
                        emailInput.addClass('error');
                        saveClientButton.addClass('disabled');
                    } else {
                        emailInput.removeClass('error');
                        saveClientButton.removeClass('disabled');
                    }
                }
            });
        } else {
            emailInput.removeClass('error');
            saveClientButton.removeClass('disabled');
        }
    }

    // Blur event to validate the client phone number before to be edit.
    $('#clientPhone').on('blur', function () {
        validateClientPhoneNumberForDataUpdateProcess();
    });

    // Function to validate client phone number before data update process.
    function validateClientPhoneNumberForDataUpdateProcess() {
        var phoneInput = $('#clientPhone');
        var phone = phoneInput.val().split(/\s+/).join('').replace(/[()-]/g, '');
        var currentClientPhone = window.clientPhoneSelected.split(/\s+/).join('').replace(/[()-]/g, '');
        var saveClientButton = $('#update-client-info');

        phoneInput.css({'border': ''});

        if (phone === '' || phone.length !== 10) {
            swal({
                type: 'error',
                html: true,
                title: 'Error',
                text: 'Please complete the phone number field',
            });

            phoneInput.css({'border': '1px solid red'});
            phoneInput.addClass('error');
            saveClientButton.addClass('disabled');

        } else if (currentClientPhone !== phone) {
            $.ajax({
                type: 'POST',
                dataType: 'JSON',
                data: {email: '', phone: phone},
                url: 'https://db.incfile.com/incfile/order/client/exist-phone-number',
                success: function (response) {
                    if (response.exist) {
                        swal({
                            type: 'error',
                            html: true,
                            title: 'Error',
                            text: 'The phone number is already used',
                        });

                        phoneInput.css({'border': '1px solid red'});
                        phoneInput.addClass('error');
                        saveClientButton.addClass('disabled');
                    } else {
                        phoneInput.removeClass('error');
                        saveClientButton.removeClass('disabled');
                    }
                }
            });
        } else {
            phoneInput.removeClass('error');
            saveClientButton.removeClass('disabled');
        }
    }

    // Function to get the client phone and email.
    function getClientPhoneAndEmail(contactText) {
        contactText = contactText.trim();
        var separatedContactInfo = contactText.split('\n');

        return {
            email: separatedContactInfo[0] || '',
            phone: separatedContactInfo[1] || ''
        };
    }


    /**********************************************************************************************
        Transfer Company functionality
     *********************************************************************************************/
    // Function to validate the info to Transfer Company to other client.
    function validationsToTransferCompany (currentOwnerId, order_id, trasnferType) {
        var newOwnerIdInput = $('#newOwnerId');
        var newOwnerId = newOwnerIdInput.val();
        newOwnerIdInput.css({'border': ''});

        if (newOwnerId === '') {
            swal({
                type: 'error',
                html: true,
                title: 'Error',
                text: 'Please complete the new owner field.',
            });

            newOwnerIdInput.css({'border': '1px solid red'});

        } else if (newOwnerId == currentOwnerId) {
            swal({
                type: 'error',
                html: true,
                title: 'Error',
                text: 'Please enter a new client id.',
            });

            newOwnerIdInput.css({'border': '1px solid red'});

        } else {
            $.ajax({
                type: 'POST',
                dataType: 'JSON',
                data: {
                    currentOwnerId: currentOwnerId,
                    newOwnerId: newOwnerId,
                    order_id: order_id,
                    forValidation: true,
                },
                url: 'https://db.incfile.com/incfile/order/client/transfer-company',
                success: function (response) {
                    if (response.success) {
                        var transferData = {
                            currentOwnerId: currentOwnerId,
                            newOwnerId: newOwnerId,
                            order_id: order_id,
                            newOwnerName: response.newOwnerName,
                            newOwnerEmail: response.newOwnerEmail
                        };

                        if (trasnferType == 'single') {
                            transferCompany(transferData);
                        } else if (trasnferType == 'multiple') {
                            transferAllCompanies(transferData);
                        } else {
                            swal({
                                type: 'error',
                                html: true,
                                title: 'Error',
                                text: 'The transfer can\'t be processing.',
                            });
                        }
                    } else {
                        var message = 'The transfer can\'t be processing.';

                        switch (response.error) {
                            case ('missing_data'):
                                message = 'There are missing data to provide.';
                                break;
                            case ('no_current_owner_client_record'):
                                message = 'The current owner ID does not match with no one record on DB.';
                                break;
                            case ('no_new_owner_client_record'):
                                message = 'The entered ID does not match with any existing client.';
                                break;
                            case ('no_current_owner_client_order_record'):
                                message = 'The current owner ID does not have client order.';
                                break;
                        }

                        swal({
                            type: 'error',
                            html: true,
                            title: 'Error',
                            text: message,
                        });

                        newOwnerIdInput.css({'border': '1px solid red'});
                    }
                }
            });
        }
    }

    // AJAX Function to Transfer Company to other client.
    function transferCompany(data) {
        var companyName = $('#compName1').val();
        var message = 'This action will transfer ' + companyName + ' to ' + data.newOwnerEmail + '.';

        swal({
                title: "Transferring Company",
                text: message,
                type: 'warning',
                showCancelButton: true,
                confirmButtonClass: "btn-danger",
                confirmButtonText: "Yes, transfer it!",
                closeOnConfirm: false
            },
            function () {
                $.ajax({
                    type: 'POST',
                    dataType: 'JSON',
                    data: {
                        currentOwnerId: data.currentOwnerId,
                        newOwnerId: data.newOwnerId,
                        order_id: data.order_id
                    },
                    url: 'https://db.incfile.com/incfile/order/client/transfer-company',
                    success: function (response) {
                        message = 'The company has been transferred to ' + data.newOwnerEmail + ' successfully.';
                        swal({
                            title: 'Good Job!',
                            type: 'success',
                            html: true,
                            text: message,
                        }, function() {
                            $.unblockUI();
                            sessionStorage.setItem('activeTab', 'vclient');
                            document.location.reload();
                        });
                    }
                });
            }
        );
    }

    function transferAllCompanies(data) {
        var message = 'This action will transfer ALL companies owned by the current client to ' + data.newOwnerEmail + '.';

        swal({
                title: "Transferring All Companies",
                text: message,
                type: 'warning',
                showCancelButton: true,
                confirmButtonClass: "btn-danger",
                confirmButtonText: "Yes, transfer all!",
                closeOnConfirm: false
            },
            function () {
                $.ajax({
                    type: 'POST',
                    dataType: 'JSON',
                    data: {
                        currentOwnerId: data.currentOwnerId,
                        newOwnerId: data.newOwnerId,
                        transfer_all: true
                    },
                    url: 'https://db.incfile.com/incfile/order/client/transfer-company',
                    success: function (response) {
                        if (response.success) {
                            var successMessage = 'All companies have been successfully transferred to ' + response.clientEmail + '.';
                            swal({
                                title: 'Good Job!',
                                type: 'success',
                                html: true,
                                text: successMessage,
                            }, function() {
                                $.unblockUI();
                                sessionStorage.setItem('activeTab', 'vclient');
                                document.location.reload();
                            });
                        } else {
                            swal("Error", response.ResponseData, "error");
                        }
                    }
                });
            }
        );
    }

    /**********************************************************************************************
        Subscriptions functionality
     *********************************************************************************************/
    var subscription = {
      cancelVirtualAddressSubscription: function (transnum, name = null) {
        var serviceName = name ? name : 'Virtual Address';
        swal({
          title: 'Cancel ' + serviceName + ' service',
          text: 'This will cancel subscription and remove company address. Are you sure you want to continue?',
          type: 'warning',
          showCancelButton: true,
          confirmButtonColor: '#DD6B55',
          confirmButtonText: 'YES',
          cancelButtonText: 'NO',
          closeOnConfirm: true,
          closeOnCancel: true
        }, function (isConfirm) {
          if (isConfirm) {
            $.ajax({
              url: "https://db.incfile.com/incfile/order/cancel-va-renewal",
              method: 'POST',
              data: { transnum: transnum },
              success: function(response) {
                swal({
                  title: 'Virtual Address service canceled',
                  type: 'success',
                  confirmButtonText: 'OK',
                  closeOnConfirm: false
                }, function () {
                  if (name) {
                    sessionStorage.setItem('activeTab', 'vvirtual-address');
                  }
                  location.reload(true);
                });
              },
              error: function(msg) {
              }, timeout:50000
            });
          }
        });
      },
      cancelTaxSubscription: function (subscription_id) {
        swal({
          title: 'Cancel Bizee Tax service',
          text: 'This will cancel the Bizee Tax subscription. Are you sure you want to continue?',
          type: 'warning',
          showCancelButton: true,
          confirmButtonColor: '#DD6B55',
          confirmButtonText: 'YES',
          cancelButtonText: 'NO',
          closeOnConfirm: true,
          closeOnCancel: true
        }, function (isConfirm) {
          if (isConfirm) {
            $.ajax({
              url: "https://db.incfile.com/incfile/order/cancel-tax-subscription",
              method: 'POST',
              data: { subscription_id },
              success: function(response) {
                swal({
                  title: 'Bizee Tax service canceled',
                  type: 'success',
                  confirmButtonText: "OK",
                  closeOnConfirm: false
                }, function () {
                  location.reload(true);
                });
              },
              error: function(msg) {
                swal({
                  type: 'error',
                  html: true,
                  title: 'Error',
                  text: 'Something went wrong while cancelling the subscription, please retry'
                });
              },
              timeout:50000
            });
          }
        });
      },
      cancelDomainEmailSubscription: function (subscriptionId) {
        swal({
          title: 'Cancel Domain and Email Subscription',
          text: 'This will cancel the domain and add on service. Are you sure you want to continue?',
          type: 'warning',
          showCancelButton: true,
          confirmButtonColor: '#DD6B55',
          confirmButtonText: 'YES',
          cancelButtonText: 'NO',
          closeOnConfirm: true,
          closeOnCancel: true
        }, function (isConfirm) {
          if (isConfirm) {
            $.ajax({
              url: "https://db.incfile.com/incfile/order/domain-and-email/cancel-subscription",
              method: 'POST',
              data: { subscriptionId: subscriptionId },
              success: function(response) {
                swal({
                  title: 'Canceled Domain and Email Subscription',
                  type: 'success',
                  confirmButtonText: "OK",
                  closeOnConfirm: false
                }, function () {
                  location.reload(true);
                });
              },
              error: function(msg) {
                swal({
                  type: 'error',
                  html: true,
                  title: 'Error',
                  text: 'Something went wrong while cancelling the subscription, please retry'
                });
              },
              timeout:50000
            });
          }
        });
      },
      cancelListingSubscription: function (subscriptionId) {
        swal({
          title: 'Cancel Business Listing Subscription',
          text: 'This will cancel the business listing subscription. Are you sure you want to continue?',
          type: 'warning',
          showCancelButton: true,
          confirmButtonColor: '#DD6B55',
          confirmButtonText: 'YES',
          cancelButtonText: 'NO',
          closeOnConfirm: true,
          closeOnCancel: true
        }, function (isConfirm) {
          if (isConfirm) {
            $.ajax({
              url: "https://db.incfile.com/incfile/order/business-listing/cancel-subscription",
              method: 'POST',
              data: { subscriptionId: subscriptionId },
              success: function(response) {
                swal({
                  title: 'Canceled Business Listing Subscription',
                  type: 'success',
                  confirmButtonText: 'OK',
                  closeOnConfirm: false
                }, function () {
                  location.reload(true);
                });
              },
              error: function(msg) {
                swal({
                  type: 'error',
                  html: true,
                  title: 'Error',
                  text: 'Something went wrong while cancelling the subscription, please retry'
                });
              },
              timeout:50000
            });
          }
        });
      },
      cancelStateFilingsBundleSubscription: function (subscriptionId, name) {
        swal({
          title: `Cancel ${name} Subscription`,
          text: `This will cancel the ${name} subscription. Are you sure you want to continue?`,
          type: 'warning',
          showCancelButton: true,
          confirmButtonColor: '#DD6B55',
          confirmButtonText: 'YES',
          cancelButtonText: 'NO',
          closeOnConfirm: true,
          closeOnCancel: true
        }, function (isConfirm) {
          if (isConfirm) {
            $.ajax({
              url: "https://db.incfile.com/incfile/order/state-filings-bundle/cancel",
              method: 'POST',
              data: { subscriptionId: subscriptionId },
              success: function(response) {
                swal({
                  title: response.message,
                  type: 'success',
                  confirmButtonText: 'OK',
                  closeOnConfirm: false
                }, function () {
                  location.reload(true);
                });
              },
              error: function(msg) {
                swal({
                  type: 'error',
                  html: true,
                  title: 'Error',
                  text: 'Something went wrong while cancelling the subscription, please try again'
                });
              },
              timeout:50000
            });
          }
        });
      },
      cancelDomainPrivacy: function (name) {
        swal({
          title: 'Cancel Domain Privacy',
          text: 'This will cancel the domain privacy add-on for ' + name + ' service. Are you sure you want to continue?',
          type: 'warning',
          showCancelButton: true,
          confirmButtonColor: '#DD6B55',
          confirmButtonText: 'YES',
          cancelButtonText: 'NO',
          closeOnConfirm: true,
          closeOnCancel: true
        }, function (isConfirm) {
          if (isConfirm) {
            $.ajax({
              url: "https://db.incfile.com/incfile/order/domain-and-email/cancel-privacy",
              method: 'POST',
              data: { domainName: name, privacyState: 0 },
              success: function(response) {
                var title = response.success ? 'Canceled Domain Privacy Add-On' : response.msg;
                var type = response.success ? 'success' : 'error';
                swal({
                  title: title,
                  type: type,
                  confirmButtonText: 'OK',
                  closeOnConfirm: false
                }, function () {
                  location.reload();
                });
              },
              error: function(msg) {
                swal({
                  type: 'error',
                  html: true,
                  title: 'Error',
                  text: 'Something went wrong while cancelling the privacy add-on, please retry'
                });
              },
              timeout:50000
            });
          }
        });
      },
      cancelMailAddOn: function (name) {
        $.ajax({
            url: "https://db.incfile.com/domain-and-email/get-mailbox",
            method: 'GET',
            data: { domainName: name },
            success: function(response) {
                var domainInfo = response.domainInfo;
                var mailboxOrderInfo = domainInfo.mailboxOrderInfo;
                var mailAddonInfo = domainInfo.mailAddonInfo;
                var orderTocancel = null;
                var text =  `Are you sure you want to downgrade the mailbox service for ${name}? Are you sure you want to continue?`;
                if (mailboxOrderInfo && !mailboxOrderInfo.includesPrivacy) {
                    text = `${text} This will also cancel the order ${mailboxOrderInfo.ordernum}`;
                    orderTocancel = mailboxOrderInfo.ordernum;
                }
                swal({
                    title: 'Cancel Domain Mailbox',
                    text,
                    type: 'warning',
                    showCancelButton: true,
                    confirmButtonColor: '#DD6B55',
                    confirmButtonText: 'YES',
                    cancelButtonText: 'NO',
                    closeOnConfirm: true,
                    closeOnCancel: true
                    }, function (isConfirm) {
                        if (!isConfirm) {
                            return;
                        }
                        var data = {
                            'ordernum': domainInfo.ordernum,
                            'mailAddonId': mailAddonInfo.mailAddonId,
                            'orderToCancel': orderTocancel
                        };
                        $.ajax({
                            url: "https://db.incfile.com/domain-and-email/downgrade-mailbox",
                            dataType: "json",
                            method: 'POST',
                            data,
                            success: function (response) {
                                if (response.status) {
                                    swal("Success", response.message, "success");
                                    swal({
                                        title: '',
                                        text: response.message,
                                        type: "success",
                                        confirmButtonText: 'OK',
                                        closeOnConfirm: true
                                    }, function () {
                                        location.reload(true);
                                    });
                                } else {
                                    swal("Error", response.error, "error");
                                }
                            }
                        });
                    }
                );
            },
            error: function(response) {
                swal({
                  type: 'error',
                  html: true,
                  title: 'Error',
                  text: response.error
                });
            }
        });
      },
      reinstateVirtualAddressSubscription: function (transnum, name = null) {
        var serviceName = name ? name : 'Virtual Address';
        swal({
          title: 'Reinstate ' + serviceName + ' service',
          text: 'Are you sure you want to reinstate?',
          type: 'warning',
          showCancelButton: true,
          confirmButtonColor: '#DD6B55',
          confirmButtonText: 'YES',
          cancelButtonText: 'NO',
          closeOnConfirm: true,
          closeOnCancel: true
        }, function (isConfirm) {
          if (isConfirm) {
            $.ajax({
              url: "https://db.incfile.com/incfile/order/reinstate-va-renewal",
              method: 'POST',
              data: { transnum: transnum },
              success: function(response) {
                swal({
                  title: 'Virtual Address service reinstated',
                  type: 'success',
                  confirmButtonText: 'OK',
                  closeOnConfirm: false
                }, function () {
                  if (name) {
                    sessionStorage.setItem('activeTab', 'vvirtual-address');
                  }
                  location.reload(true);
                });
              },
              error: function(msg) {
              }, timeout:50000
            });
          }
        });
      }
    };


    /**********************************************************************************************
        Issues functionality
     *********************************************************************************************/
    var issue = {
        resend: function (issue_id) {
            var route = "https://db.incfile.com/incfile/order/issues/resend";
            $.ajax({
                type: 'GET',
                dataType: 'json',
                url: route + '/?issue_id=' + issue_id,
                success: function (data) {
                    if (data.status) {
                        swal({
                            title: 'Good Job!',
                            text: 'The email has been sent.',
                            type: "success",
                            confirmButtonText: "OK",
                            closeOnConfirm: true
                        }, function () {
                            $.unblockUI();
                        });

                    }
                }
            })
        },
        markResolved: function (id) {
            var route = "https://db.incfile.com/incfile/order/issues/resolve";
            $.ajax({
                type: 'GET',
                dataType: 'json',
                url: route + '/?id=' + id,
                success: function (response) {
                    if (response.status == true) {
                        location.reload();
                    } else if (response.status == false) {
                        sweetAlert("Oops...", response.message, "error");
                    }
                }
            })
        }
    };

    // On change action for Issue type.
    function typeChange() {
        var type = $('#type_id').val();

        $("#comment").text('').attr('readonly', false);

        if (type == 4) {
            $('#message_sec').hide();
            $('#spelling_issue_sec').show();
            $("label[for='comment']").text('Email Message');
            $('#additional_funds_request_sec').hide();
            $('#additionalInformationRequestContainer').hide();
        } else if(type == 7){
            $('#message_sec').show();
            $("label[for='comment']").text('Email Message');
            $('#spelling_issue_sec').hide();
            $('#additional_funds_request_sec').show();
            $('#additionalInformationRequestContainer').hide();
        } else if (type == 8) {
            $('#message_sec').hide();
            $('#spelling_issue_sec').hide();
            $('#additional_funds_request_sec').hide();
            $('#additionalInformationRequestContainer').show();
        } else if (type == 11) {
            $('#message_sec').show();
            $("label[for='comment']").text('Message');
            $("#comment").text(identityConfirmationIssueText).attr('readonly', true);
        } else {
            $('#message_sec').show();
            $("label[for='comment']").text('Message');
            $('#spelling_issue_sec').hide();
            $('#additional_funds_request_sec').hide();
            $('#additionalInformationRequestContainer').hide();
        }
    }


    /**********************************************************************************************
        Comments functionality
     *********************************************************************************************/
    var ClassColor = ['red', 'gray', 'blue', 'yellow', 'darkGray'];
    var rand = '';
    const commentTemplate = ( comment ) => {
        const pinButton = ( comment ) => {

            if (comment.is_pinned === undefined) {
                return '';
            }

            const isPinned = comment.is_pinned === 1;
            const pinnedIcon = '<img style="width: 1.6rem;" src="https://db.incfile.com/static/img/pin-angle.svg">';
            const unPinnedIcon = '<img style="width: 1.6rem;" src="https://db.incfile.com/static/img/pin-angle-fill.svg">';

            window.toggleIcon = (e, type) => {
                if (e.dataset['original'] !== 'true') {
                    e.innerHTML = type === 'toggle'
                        ? '<span class="text-primary">pin</span>'
                        : pinnedIcon
                    ;
                    return;
                }

                e.innerHTML = type === 'original' &&  e.dataset[type] === 'true'
                    ? unPinnedIcon
                    : '<span class="text-danger">unpin<span/>'
                ;
            }

            return `
                <button class="btn btn-link"
                    data-original=${isPinned}
                    data-toggle=${!isPinned}
                    data-comment=${comment.id}
                    onmouseenter="toggleIcon(this, 'toggle')"
                    onmouseleave="toggleIcon(this, 'original')"
                    onclick="updateData('togglePin${comment.id}', 'pin-comment')"
                >
                    ${isPinned ? unPinnedIcon : pinnedIcon}
                </button>

                <form hidden id="togglePin${comment.id}">
                    <input type="text" name="comment" value="${comment.id}">
                </form>
            `;
        }

        const template = comment.ordernum
        ? ({ who, created_at, orderdetail, ordernum, text }) => `
        <div class="comment-body">
            <div class="mail-contnet">
                <h5 class="text-capitalize">
                    ${who}
                    <span class="time" style="text-transform: none"> ${created_at} </span>
                    ${pinButton(comment)}
                    <a target="_blank" href="${orderdetail}" class="detail_link">${dbOrdernumFormat(ordernum)}</a>
                </h5>
                <span class="mail-desc" style="margin:10px 0 5px 0; word-break: break-word">
                    ${text}
                </span>
            </div>
        </div>
        `
        : ({ who, created_at, text }) => `
        <div class="comment-body">
            <div class="mail-contnet">
                <h5 class="text-capitalize">
                    ${who}
                    <span class="time" style="text-transform: none">${created_at}</span>
                    ${pinButton(comment)}
                </h5>
                <span class="mail-desc" style="margin:10px 0 5px 0; word-break: break-word"> ${text} </span>
            </div>
        </div>
        `

        return template(comment)
    }

    var notes = {
        loadComments: function (transnum, offset) {
            var container = $('#list-comments');
            var html = '';
            $.ajax({
                type: "GET",
                dataType: "json",
                global: false,
                url: "https://db.incfile.com/incfile/order/load-comments?transnum=" + transnum + "&offset=" + offset,
                success: function (res) {
                    if (!res.comments.length) {
                        container.append('<p class="text-center m-b-20">No comments to see</p>');
                        return;
                    }

                    html = res.comments.map(( comment ) => {
                        rand = ClassColor[Math.floor(Math.random() * ClassColor.length)];
                        return commentTemplate(comment)
                    }).join('');

                    container.empty();
                    container.append(html);
                    if (res.totals > 3) {
                        $('#renderPageNotes').pagination ({
                            items: res.totals,
                            itemsOnPage: 3,
                            prevText: '<i class="ti-angle-left"></i>',
                            nextText: '<i class="ti-angle-right"></i>',
                            onPageClick: function (pageNumber, event) {
                                $('#renderPageNotes ul').addClass('pagination');
                                notes.loadComments2(transnum, pageNumber);
                            }
                        });
                        $('#renderPageNotes ul').addClass('pagination');
                        $('#list-comments').addClass('bottom-border');
                    }
                }
            });
        },
        loadComments2: function (transnum, offset) {
            var container = $('#list-comments');
            var html = '';
            container.block({message: null});
            $.ajax({
                type: "GET",
                dataType: "json",
                global: false,
                url: "https://db.incfile.com/incfile/order/load-comments?transnum=" + transnum + "&offset=" + offset,
                success: function (res) {

                    html = res.comments.map(( comment ) => {
                        rand = ClassColor[Math.floor(Math.random() * ClassColor.length)];
                        return commentTemplate(comment)
                    }).join('');

                    container.empty();
                    container.append(html);
                    container.unblock();
                }
            });
        },
        loadCommentsToModal: function () {
            var container = $('#list-comments-in-modal');
            var html = '';
            $.ajax({
                type: "GET",
                dataType: "html",
                global: false,
                url: "https://db.incfile.com/incfile/order/load-comments-to-modal?ordernum=" + ordernum,
                success: function (res) {
                    container.empty();
                    container.append(res);
                }
            });
        },
        loadChildCommentsToModal: function () {
            var container = $('#list-child-comments-in-modal');
            var html = '';
            $.ajax({
                type: "GET",
                dataType: "html",
                global: false,
                url: "https://db.incfile.com/incfile/order/load-child-comments-to-modal?ordernum=" + ordernum,
                success: function (res) {
                    if (res.length > 0) {
                        container.empty();
                        container.append(res);
                        $('#child-comments').removeClass('hide');
                    }
                }
            });
        },
        loadParentCommentsToModal: function () {
                    },
        deleteComment: function (commentId) {
            swal({
                title: 'Are you sure?',
                text: 'Are you sure you want to delete this comment?',
                type: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#DD6B55',
                confirmButtonText: 'Yes, delete it!',
                cancelButtonText: 'No, cancel.',
                closeOnConfirm: true,
                closeOnCancel: true
            }, function (isConfirm) {
                if (isConfirm) {
                    $.ajax({
                        url: 'https://db.incfile.com/incfile/order/delete-comment',
                        type: 'POST',
                        data: {
                            id: commentId
                        },
                        success: function () {
                            notes.loadCommentsToModal();
                            notes.loadChildCommentsToModal();
                            notes.loadParentCommentsToModal();
                            notes.loadComments(transnum, 0);
                        }
                    });
                }
            });

            return false;
        },
        loadCommentToEdit: function (commentId) {
            $.ajax({
                type: 'GET',
                dataType: 'json',
                global: false,
                url: "https://db.incfile.com/incfile/order/load-comment-to-edit?commentId=" + commentId,
                success: function (res) {
                    $('#commentText').val(res.commentText);
                    $('#commentId').val(res.commentId);
                    $('#btnTextSaveComment').text('Save');
                    $('#a-clearForm').removeClass('hide');
                    if ($('#commentOnAutomationModal').length > 0) {
                        if(res.visibleOnAutomation == 1) {
                            $('#commentOnAutomationModal')[0].checked = true;
                        } else {
                            $('#commentOnAutomationModal')[0].checked = false;
                        }
                    }
                }
            })
        },
        loadComplianceToModal: function () {
            var container = $('#list-compliance-in-modal');
            $.ajax({
                type: "GET",
                dataType: "html",
                global: false,
                url: "https://db.incfile.com/load-compliance-to-modal?ordernum=" + ordernum,
                success: function (res) {
                    container.empty();
                    container.append(res);
                }
            });
        },
        loadCompliance: function (ordernum, offset) {
            var container = $('#list-compliance');
            var html = '';
            $.ajax({
                type: "GET",
                dataType: "json",
                global: false,
                url: "https://db.incfile.com/load-compliance?ordernum=" + ordernum + "&offset=" + offset,
                success: function (res) {
                    if (res.total > 0) {
                        $.each(res.notifications, function (key, notification) {
                            rand = ClassColor[Math.floor(Math.random() * ClassColor.length)];
                            html += '<div class="comment-body"> <div class="mail-contnet" style="padding-left:0"> <h5 class="text-capitalize" style="white-space:normal; line-height:20px;">' + notification.item_type + ' due on ' + notification.due_date + '</h5></div> </div>';
                        });
                        container.empty();
                        container.append(html);

                    } else {
                        container.append('<p class="text-center m-b-20 col-sm-12 m-t-20">No upcoming notifications</p>');
                    }
                }
            });
        }
    };

    // Comment Back button click action
    function commentBackButtonAction() {
        $('#modalAddNote').modal('hide');
        $('#commentText, #commentId').val('');
        $('#btnTextSaveComment').text('Add');
        if ($('#commentOnAutomationModal').length > 0) {
            $('#commentOnAutomationModal')[0].checked = false;
        }
    }

    // Comment Cancel button click action
    function commentCancelButtonAction() {
        $('#commentText').val('');
        $('#commentId').val('');
        if ($('#commentOnAutomationModal').length > 0) {
            $('#commentOnAutomationModal')[0].checked = false;
        }
        $('#btnTextSaveComment').text('Add'); $(this).parent().addClass('hide')
    }


    /**********************************************************************************************
        Probable Parent functionality
     *********************************************************************************************/
    var probableParent = {
        linkToParentOrder: function (probableParentOrdernum, companyName) {
            swal({
                title: 'Link Parent Order',
                text: 'Are you sure you want to link #' + dbOrdernumFormat(probableParentOrdernum) + ' (' + companyName + ') as Parent Order?',
                type: 'warning',
                html: true,
                showCancelButton: true,
                confirmButtonText: 'Yes, Link it',
                cancelButtonText: 'Cancel',
                closeOnConfirm: true,
                closeOnCancel: true
            }, function (isConfirm) {
                if (isConfirm) {
                    var orig_ordernum = $('#orig_ordernum').val();

                    orig_ordernum
                        ? validationToChangeParentOrder(null, 'link-parent', null, probableParentOrdernum)
                        : probableParent.processingLinkToParent(probableParentOrdernum);
                }
            })
        },
        linkAndTransferRegisteredAgent: function (probableParentOrdernum, companyName) {
            swal({
                title: 'Link and Transfer Registered Agent',
                text: 'Are you sure you want to link #' + dbOrdernumFormat(probableParentOrdernum) + ' (' + companyName + ') as Parent Order and transfer Registered Agent?',
                type: 'warning',
                html: true,
                showCancelButton: true,
                confirmButtonColor: '#DD6B55',
                confirmButtonText: 'Yes, Link & Transfer',
                cancelButtonText: 'Cancel',
                closeOnConfirm: true,
                closeOnCancel: true
            }, function (isConfirm) {
                if (isConfirm) {
                    var orig_ordernum = $('#orig_ordernum').val(),
                        transferService = true;

                    orig_ordernum > 0
                        ? validationToChangeParentOrder(null, 'link-and-transfer-registered-agent', null, probableParentOrdernum)
                        : probableParent.processingLinkToParent(probableParentOrdernum, transferService, 'registered-agent');
                }
            });

            return false;
        },
        linkAndTransferVirtualAddress: function (probableParentOrdernum, companyName) {
            swal({
                title: 'Link and Transfer Virtual Address',
                text: 'Are you sure you want to link #' + dbOrdernumFormat(probableParentOrdernum) + ' (' + companyName + ') as Parent Order and transfer Virtual Address?',
                type: 'warning',
                html: true,
                showCancelButton: true,
                confirmButtonColor: '#DD6B55',
                confirmButtonText: 'Yes, Link & Transfer',
                cancelButtonText: 'Cancel',
                closeOnConfirm: true,
                closeOnCancel: true
            }, function (isConfirm) {
                if (isConfirm) {
                    var orig_ordernum = $('#orig_ordernum').val(),
                        transferService = true;

                    orig_ordernum > 0
                        ? validationToChangeParentOrder(null, 'link-and-transfer-virtual-address', null, probableParentOrdernum)
                        : probableParent.processingLinkToParent(probableParentOrdernum, transferService, 'virtual-address');
                }
            });
        },
        processingLinkToParent: function (probableParentOrdernum, transferService = false, serviceType = null) {
            $.ajax({
                type: 'POST',
                dataType: 'JSON',
                data: {
                    parentOrdernum: probableParentOrdernum,
                    transferService: transferService,
                    serviceType: serviceType
                },
                url: "https://db.incfile.com/incfile/order/225070363866/link-parent",
                success: function (response) {
                    if (response.status) {
                        swal({
                            title: response.message,
                            type: 'success',
                            confirmButtonText: 'OK',
                            closeOnConfirm: false
                        }, function () {
                            location.reload(true);
                        });
                    }
                }
            });
        },
        discard: function (probableParentOrdernum, companyName) {
            swal({
                title: 'Remove Probable Parent Order',
                text: 'Are you sure that order #' + dbOrdernumFormat(probableParentOrdernum) + ' (' + companyName + ') is not a Parent Order?',
                type: 'warning',
                html: true,
                showCancelButton: true,
                confirmButtonColor: '#DD6B55',
                confirmButtonText: 'Yes, Remove',
                cancelButtonText: 'Cancel',
                closeOnConfirm: true,
                closeOnCancel: true
            }, function (isConfirm) {
                if (isConfirm) {
                    $.ajax({
                        type: 'POST',
                        dataType: 'JSON',
                        data: {
                            parent_order_num: probableParentOrdernum,
                            order_num: ordernum
                        },
                        url: "https://db.incfile.com/order-tracker/orders/potential-misc-order/unlink-partnership?225070363866",
                        success: function (response) {
                            if (response.status) {
                                swal({
                                    title: response.message,
                                    type: 'success',
                                    confirmButtonText: 'OK',
                                    closeOnConfirm: false
                                }, function () {
                                    location.reload(true);
                                });
                            }
                        }
                    });
                }
            });

            return false;
        }
    };


    // ToDo: All next content need to be refactor or reformat for a better handle and reader of code

    function refundFraudOrder(data, url) {
        $.ajax(url, {
            method: 'POST',
            data: data,
            success: function (res) {
                swal('Success!', 'Order Marked as Fraud and refunded', 'success');
                location.reload(true);
            },
            error: function (res) {
                swal('Error', 'Error when sending request. Please try again.', 'error');
                location.reload(true);
            }
        });
    }

    function showErrorMessageToRefundFraudOrder() {
        swal({
            title: 'Order Marked as Fraud',
            text: 'It is not possible to make a refund for this order.',
            type: 'error',
            confirmButtonText: "OK",
            closeOnConfirm: true
        });
    }

    function showErrorMessageToMarkAsFraudOrder(error) {
        swal({
            title: 'Error!',
            text: error,
            type: 'error',
            confirmButtonText: "OK",
            closeOnConfirm: true
        });
    }

    // Reset a form and close current modal
    function clearFormAndClose(frm, modal) {
        $(frm + ' input, ' + frm + ' select').each(function () {
            let $this = $(this);
            let $thisOldVal = $(this).data('old-value');
            $thisOldVal = typeof $thisOldVal === "boolean" ? $thisOldVal.toString() : $thisOldVal;
            $this.val($thisOldVal);
        });
        $(frm + ' input[type="radio"]').each(function () {
            let $this = $(this);
            let $thisOldVal = $this.data('old-value');
            if ($thisOldVal) {
                $this.prop('checked', true);
            } else {
                $this.prop('checked', false);
            }
        });
        checkNaicCode();
        checkReservedWords();
        $(modal).modal('hide');
    }

    // CompanyInfoData : Function to validate the reserved words in the company name.
    function validateReservedWordsInCompanyName(frmData, updateType, modal) {
        var alertInfo = {
            frmData: frmData,
            modal: modal,
            updateType: updateType,
            showAlert: true,
            alertText: 'The order has been updated',
        }

        checkReservedWords(alertInfo);
    }

    function checkReservedWords(alertInfo = null)
    {
        let invalidNamesCount = 0;
        let state = "Massachusetts";

        $('.check-reserved-words').each(function(index) {
            var $input = $(this);

            $.ajax({
                'type': "GET",
                'url': "https://db.incfile.com/resources-guide/ajax-get-reserved-words",
                'data': {'state': state},
                'async': false,
                'success': function (data) {
                    var reservedWords = data;
                    var companyName = $input.val().toLowerCase();
                    var wordGroup = companyName.split(" "), found = null, restrictedWords, temp = [], message, msgString;
                    var newWords = $.parseJSON(reservedWords);

                    if (reservedWords) {
                        restrictedWords = newWords.join('", "');
                    } else {
                        restrictedWords = '';
                    }

                    var itemFound;

                    for (var j = 0, wLen = wordGroup.length; j < wLen; j++) {
                        itemFound = $.inArray(wordGroup[j], newWords);
                        if (itemFound !== -1) {
                            temp[j] = newWords[itemFound];
                        }
                    }

                    var passed = temp.filter(function (v) {
                        return v !== ''
                    });

                    if (passed.length > 1) {
                        msgString = passed.join('", "');
                        isInvalid = true;
                        invalidNamesCount++;
                        message = 'The words "' + msgString + '" are restricted keywords in the State of "' + state + '" and will require approval from the regulating state agency prior to submitting the articles.';
                    } else if (passed.length == 1) {
                        msgString = passed;
                        isInvalid = true;
                        invalidNamesCount++;
                        message = 'The word "' + msgString + '" is a restricted keyword in the State of "' + state + '" and will require approval from the regulating state agency prior to submitting the articles.';
                    } else {
                        msgString = '';
                        isInvalid = false;
                        message = "";
                    }
                    found = {word: msgString, elem: message, success: isInvalid};

                    if (isInvalid) {
                        $input.css({'border': '1px solid red'});
                        $input.closest('.form-group').find('.reserved-err').html(found.elem);
                        $input.closest('.form-group').find('.reserved-err').show();
                    } else {
                        $input.removeAttr('style');
                        $input.closest('.form-group').find('.reserved-err').hide();
                    }
                },
            });
        });

        if (alertInfo) {
            if (invalidNamesCount > 0) {
                swal({
                    title: 'Warning',
                    text: "Company name contains words restricted by the State of "+state+". Are you sure you want to continue?",
                    type: 'warning',
                    showCancelButton: true,
                    confirmButtonColor: "#DD6B55",
                    confirmButtonText: "YES",
                    cancelButtonText: "NO",
                    closeOnConfirm: true,
                    closeOnCancel: true
                }, function (isConfirm) {
                    if (isConfirm == false) {
                        return false;
                    } else {
                        processUpdate($('#' +  alertInfo.frmData), alertInfo.alertText, alertInfo.updateType, alertInfo.frmData, alertInfo.modal);
                    }
                });
            } else {
                processUpdate($('#' +  alertInfo.frmData), alertInfo.alertText, alertInfo.updateType, alertInfo.frmData, alertInfo.modal);
            }
        }
    }

    $('#naicCodeId').on('change', function() {
        if ($(this).val().length) {
            $("#naicSubcodeId" ).prop( "disabled", false );
            getNaicSubcodes($(this).val(), null);
            setOkSubcodes();
        } else {
            $("#naicSubcodeId" ).prop( "disabled", true );
            $("#naicSubcodeId" ).val("");
        }
    });

    $('#naicSubcodeId').on('change', function() {
        setOkSubcodes();
    });

    $('#naicSubcodeId').on('click', function() {
        if (!$('#naicCodeId').val().length) {
            $('#naicSubcodeId').css('border', '1px solid red');
            $('#subcode_error').removeClass('hide');
        }
    });

    function setOkSubcodes() {
        $("#naicSubcodeId" ).prop( "disabled", false );
        $('#subcode_error').addClass('hide');
        $('#naicSubcodeId').removeAttr('style');
    }

    function checkNaicCode() {
        let naicCode = $('#naicCodeId');
        let naicSubcode = $('#naicSubcodeId');
        let naicCodeVal = naicCode.val();
        if (naicCode.val() && naicCode.val().length) {
            setOkSubcodes();
            let subcodeId = naicSubcode.attr('data-old-value');
            getNaicSubcodes(naicCodeVal, subcodeId);
        }
    }

    function getNaicSubcodes(naicCode, subcodeId) {
        $.ajax({
            type: "GET",
            dataType: "json",
            data: {'naicCodeId': naicCode},
            url: "https://db.incfile.com/resources-guide/ajax-load-naic-subcodes-by-id",
            success: function (response) {
                if (response.status) {
                    var select = $('#naicSubcodeId').empty();
                    select.append( '<option value="">Select SUB CODE</option>' );
                    $.each(response.naicSubcodes, function(id, item) {
                        let selected = '';
                        if (subcodeId && subcodeId == item.id ) {
                            selected = 'selected="selected"';
                        }
                        select.append( '<option value="'
                        + item.id
                        + '"'
                        + selected
                        + '>'
                        + item.description + ' ('+item.subcode+')'
                        + '</option>' );
                    });
                }
            }
        });
    }

    /**
     * Email send bad address
     * @param  ordernum
     */
    function sendBadAddress(ordernum) {
        $.ajax({
            type: "POST",
            dataType: "json",
            data: {'ordernum': ordernum},
            url: "https://db.incfile.com/incfile/order/send-email/bad-address",
            success: function (res) {
                if (res.status) {
                    swal({
                        title: 'Good Job!',
                        text: 'The email has been sent.',
                        type: "success",
                        confirmButtonText: "OK",
                        closeOnConfirm: true
                    }, function () {
                        $.unblockUI();
                    });
                }
            },
        })
    }

    
    /**
     * Resend dashboard links
     */
    function resendDashboardLinks(link) {
        var text = '';
        $.ajax({
            type: "GET",
            dataType: 'json',
            data: {'destination': link},
            url: "https://db.incfile.com/incfile/order/dashboard/resend?ordernum=" + ordernum,
            success: function (data) {
                if (data.status) {

                    if (data.destination == 'order-confirm-email') {
                        text = 'The Order Confirmation Email has been sent.';
                    } else {
                        text = 'The Dashboard link has been sent.';
                    }

                    swal({
                        title: 'Good Job!',
                        text: text,
                        type: "success",
                        confirmButtonText: "OK",
                        closeOnConfirm: true
                    }, function () {
                        $.unblockUI();
                    });

                }
            }
        });
    }

    /**
     * Check the state status before show modal renew agent
     */
    function showModalRenewAgent() {
        if (orderStateStatus > 1) {
            swal({
                type: 'warning',
                html: true,
                title: 'Warning!',
                text: "<p style='text-align: left; margin-bottom: 15px'>The entity is not in good standing with the state, which could be due to a missed annual report filing or other type of compulsory filing requirement.</p><p style='text-align: left'>Under these circumstance we would require that you resolve any outstanding issue with the state before we can accept a a renewal for the registered agent service.</p>"
            });
        } else {
            $('#renew-agent-service-modal').modal('show');
            return false;
        }
    }

    /**
     * --------------------------------------------------
     * GET HASH FROM URL TO SHOW THE MODAL
     */
    var hash = '';
    if (window.location.hash) {
        hash = window.location.hash;

        if (hash !== '') {
            $(hash).modal('show');
        }
    }

    // Add event listener for opening and closing notifications of compliance
    $(document).on('click', 'td.details-control', function () {
        var tr = $(this).closest('tr');

        if (tr.hasClass('shown')) {
            // This row is already open - close it
            tr.next('tr').remove();
            tr.removeClass('shown');
            $(this).html('+');
        }
        else {
            // Open this row
            $(this).html('-');
            $("<tr><td colspan='5'>" + format(tr.data('child-value'), tr.data('is-offering-service'), tr.data('compliance-item'), tr.data('ordernum'), tr.data('due-date'), tr.data('show-resend-button'), tr.data('is-past-notification')) + "</td></tr>").insertAfter(tr);
            tr.addClass('shown');
        }
    });

    // Add event listener for notification view modal
    $(document).on('click', 'a.complianceModalView', function () {
        type = $(this).data('type');

        if (type != 'real_email') {
            if ($(this).data('status') === 1) {
                statusText = "Active";
            } else {
                statusText = "Inactive";
            }

            $('#compliance-status').html(statusText);
            $('#compliance-subject').html($(this).data('subject'));
        }
        //get email message
        $.ajax({
            type: "GET",
            dataType: "json",
            data: {
                'ordernum': ordernum,
                'is_offering_service': $(this).data('is-offering-service'),
                'item_type': $(this).data('compliance-item'),
                'due_date': $(this).data('due-date'),
                'message': $(this).data('message'),
                'subject': $(this).data('subject'),
                'type': type
            },
            url: "https://db.incfile.com/get-compliance-notification-message",
            success: function (res) {
                if (type !== 'real_email' && type !== 'gmail_content') {
                    $('#compliance-message').html(res.html);
                    //Show modal
                    $('#compliance-modal-view').modal('show');
                } else {
                    $('#compliance-email').html(res.html);
                    $('#compliance-email-modal').modal('show');
                }
            }
        });
    });

    // Add event listener for notification view email events modal
    $(document).on('click', 'button.complianceEmailEventView', function (event) {
        event.preventDefault();

        // Get email events from HubSpot
        $.ajax({
            type: "GET",
            dataType: "json",
            data: {
                'ordernum': ordernum,
                'due_date': $(this).data('due-date'),
                'notification_date': $(this).data('notification-date')
            },
            url: "https://db.incfile.com/get-compliance-notification-email-events",
            success: function (res) {
                if (_.isEmpty(res.dataEvents)) {
                    content = '<div class="sl-item"><div class="sl-left bg-info"><i class="fa fa-info"></i></div><div class="sl-right" style="padding: 10px 0;"><div><a href="javascript:void(0)">No email events found</a></div></div></div>';
                } else {
                    content = '';

                    _.forEach(res.dataEvents, function(event) {
                        // Append the child events
                        if (event.child.length) {
                            _.forEach(event.child, function(childEvent) {
                                // get the icons
                                switch (childEvent.type) {
                                    case ('SENT'):
                                        icon = 'fa-paper-plane';
                                        bg = 'bg-success';
                                        break;
                                    case ('DELIVERED'):
                                        icon = 'fa-envelope';
                                        bg = 'bg-success';
                                        break;
                                    case ('OPEN'):
                                        icon = 'fa-check';
                                        bg = 'bg-success';
                                        break;
                                    case ('CLICK'):
                                        icon = 'fa-external-link-square';
                                        bg = 'bg-success';
                                        break;

                                    case ('BOUNCE'):
                                        icon = 'fa-repeat';
                                        bg = 'bg-red';
                                        break;

                                    case ('DROPPED'):
                                        icon = 'fa-ban';
                                        bg = 'bg-red';
                                        break;

                                    default:
                                        icon = 'fa-check';
                                        bg = 'bg-success';
                                        break;
                                }

                                content += '<div class="sl-item"><div class="sl-left ' + bg + '"><i class="fa ' + icon + '"></i></div><div class="sl-right"><div><a href="javascript:void(0)">' + childEvent.type + '</a><span class="sl-date" style="display:block; margin-bottom: 20px"><i class="fa fa-clock-o" style="font-size: 15px"></i> ' + childEvent.datetime + '</span></div></div></div>';

                            });
                        }
                    });
                }

                $('#emaileventhistory').html(content);
                $('#email-events-modal').modal('show');
            }
        });
    });

    // appends notification content to modal
    function format(notifications, isOfferingService, complianceItem, orderNum, dueDate, showResendButton, isPastNotification) {
        content = '';
        $.each(notifications, function (key, notification) {
            resendButton = '';
            btnContainingClass = 'col-sm-4';
            cancelledNotificationClass = '';
            emailEventView = '';
            gmailPreview = '';

            if (notification.btn_class != 'undefined') {
                cancelledNotificationClass = notification.btn_class;
            }

            if (showResendButton == 1 && notification.notification_content.email.status == 1 && isPastNotification == 0) {
                // Button text for Send / Resend
                btnText = notification.mail_send_btn_text;

                resendButton = '<button class="btn btn-default btn-outline btn-rounded waves-effect waves-light complianceModalResend ' + cancelledNotificationClass + '"' +
                    'data-rule-id="' + notification.compliance_system_rule_id + '" ' +
                    'data-dashboard-status="' + notification.notification_content.dashboard.status + '" ' +
                    'data-prior-days="' + notification.notification_prior_days + '" ' +
                    'data-later-days="' + notification.notification_later_days + '" ' +
                    'data-is-offering-service="' + isOfferingService + '" ' +
                    'data-compliance-item="' + complianceItem + '" ' +
                    'data-due-date="' + dueDate + '" ' +
                    'data-notification-date="' + notification.date + '" ' +
                    'data-ordernum="' + orderNum + '">' +
                    btnText +
                '</button>';
            }

            if (notification.mail_status === 'Sent' && notification.preview_hubspot_mail === 1) {
                // Email event button
                emailEventView = '<button class="btn btn-default btn-outline btn-rounded waves-effect waves-light complianceEmailEventView ' + cancelledNotificationClass + '"' +
                    'data-rule-id="' + notification.compliance_system_rule_id + '" ' +
                    'data-prior-days="' + notification.notification_prior_days + '" ' +
                    'data-later-days="' + notification.notification_later_days + '" ' +
                    'data-due-date="' + dueDate + '" ' +
                    'data-notification-date="' + notification.date + '" ' +
                    'data-ordernum="' + orderNum + '">' +
                    'View Email Events' +
                '</button>';

                // Gmail preview button
                gmailPreview = '<li>' +
                    '<a href="javascript:void(0)" data-status="' + notification.notification_content.email.status + '" data-subject="' + notification.notification_content.email.subject + '" data-message="' + notification.notification_content.email.message + '" data-is-offering-service="' + isOfferingService + '" data-compliance-item="' + complianceItem + '" data-due-date="' + dueDate + '" data-ordernum="' + orderNum + '" data-type="gmail_content" class="complianceModalView ' + cancelledNotificationClass + '">From HubSpot' +
                    '</a>' +
                '</li>';
            }

            content += '<div class="col-sm-12 m-b-10">' +
                    '<div class="col-sm-3" title="' + notification.mail_status + '" style="padding-top: 6px; cursor: pointer;">Notification on ' + notification.date + ' <i class="fa ' + notification.mail_status_btn_class + '" aria-hidden="true"></i></div>' +
                    '<div class="col-sm-9">' +
                        '<div class="btn-group">' +
                            '<div class="btn-group">' +
                                '<button type="button" class="btn btn-default btn-rounded btn-outline waves-effect waves-light dropdown-toggle" data-toggle="dropdown">' +
                                    'View Content <span class="caret"></span></button>' +
                                '<ul class="dropdown-menu">' +
                                    '<li>' +
                                        '<a href="javascript:void(0)" data-status="' + notification.notification_content.dashboard.status + '" data-subject="' + notification.notification_content.dashboard.subject + '" data-message="' + notification.notification_content.dashboard.message + '" data-is-offering-service="' + isOfferingService + '" data-compliance-item="' + complianceItem + '" data-due-date="' + dueDate + '" data-ordernum="' + orderNum + '" data-type="dashboard_content" class="complianceModalView ' + cancelledNotificationClass + '">View Dashboard Content' +
                                        '</a>' +
                                    '</li>' +
                                    '<li>' +
                                        '<a href="javascript:void(0)" data-status="' + notification.notification_content.email.status + '" data-subject="' + notification.notification_content.email.subject + '" data-message="' + notification.notification_content.email.message + '" data-is-offering-service="' + isOfferingService + '" data-compliance-item="' + complianceItem + '" data-due-date="' + dueDate + '" data-ordernum="' + orderNum + '" data-type="email_content" class="complianceModalView ' + cancelledNotificationClass + '">View Email Content' +
                                        '</a>' +
                                    '</li>' +
                                '</ul>' +
                            '</div>' +
                            '<div class="btn-group">' +
                                '<button type="button" class="btn btn-default btn-rounded btn-outline waves-effect waves-light dropdown-toggle" data-toggle="dropdown">' +
                                    'Preview Email <span class="caret"></span></button>' +
                                '<ul class="dropdown-menu">' +
                                    gmailPreview +
                                    '<li>' +
                                        '<a href="javascript:void(0)" data-status="' + notification.notification_content.email.status + '" data-subject="' + notification.notification_content.email.subject + '" data-message="' + notification.notification_content.email.message + '" data-is-offering-service="' + isOfferingService + '" data-compliance-item="' + complianceItem + '" data-due-date="' + dueDate + '" data-ordernum="' + orderNum + '" data-type="real_email" class="complianceModalView ' + cancelledNotificationClass + '">From Compliance Tool' +
                                        '</a>' +
                                    '</li>' +
                                '</ul>' +
                            '</div>' +
                            emailEventView +
                            resendButton +
                        '</div>' +
                    '</div>' +
                '</div>';
        });

        return content;
    }

    // Add event listener for notification resend modal
    $(document).on('click', 'button.complianceModalResend', function (event) {
        event.preventDefault();

        $notification = $(this);
        $('#send_confirm').show();
        $('#save_no').show();
        $('#confirm_text').show();
        $('#sent_text').hide();
        $('#send_close').hide();
        $('#send_confirm').button('reset');

        $('#compliance-resend-modal').modal({
            backdrop: 'static',
            keyboard: false
        }).off('click', '#send_confirm').one('click', '#send_confirm', function (e) {
            e.stopPropagation();
            $("#send_confirm").button('loading');

            $.ajax({
                type: "POST",
                dataType: "json",
                data: {
                    'rule_id': $notification.data('rule-id'),
                    'prior_days': $notification.data('prior-days'),
                    'later_days': $notification.data('later-days'),
                    'is_offering_service': $notification.data('is-offering-service'),
                    'compliance_item': $notification.data('compliance-item'),
                    'due_date': $notification.data('due-date'),
                    'notification_date': $notification.data('notification-date'),
                    'ordernum': $notification.data('ordernum'),
                    'dashboard_status': $notification.data('dashboard-status')
                },
                url: "https://db.incfile.com/manual-send-notification",
                success: function (res) {
                    $('#send_confirm').button('reset');
                    if (res.status) {
                        $('#send_confirm').hide();
                        $('#save_no').hide();
                        $('#confirm_text').hide();
                        $('#sent_text').show();
                        $('#send_close').show();
                    }
                }
            });
        });
    });

    // validation for entity name for florida state
    $('.entity-name').on( 'focusout', function () {
        var companyStateId = this.id.split('FirstName');
        var companyNameValue = $('#' + this.id).val();
        var companyState = $('#' + companyStateId[0] + 'State').val();

        if (exceedingLimit > 0 && companyNameValue.length > exceedingLimit) {
            $('.' + companyStateId[0] + 'companyErr').show();
            $('.' + companyStateId[0] + 'companyErr').html('Company name cannot exceed ' + exceedingLimit + ' characters').css('color', 'red');
            $(this.id).focus();
        } else {
            $('.' + companyStateId[0] + 'companyErr').html('');
            $('.' + companyStateId[0] + 'companyErr').hide();
        }
    });

    // Character limit validation on submit
    function limitCompanyNameCharacterLengthOnSubmit() {
        var members = ['pres', 'vp', 'sec', 'treas', 'member5', 'member6'];
        var companyNameValue = '';
        var companyState = '';
        var limitExceeded = false;
        var totalPercentage = 0;

        $.each(members, function (i, val) {
            i++;
            companyNameValue = $('#' + val + 'FirstName').val();
            companyState = $('#' + val + 'State').val();
            isMemberCompany = $('#' + val + 'Radio2').val();
            let ownership = $('[name=' + val + 'Ownership]').val();
            totalPercentage += parseInt(ownership);

            if (exceedingLimit > 0 && companyNameValue.length > exceedingLimit) {
                $('.' + val + 'companyErr').show();
                $('.' + val + 'companyErr').html('Company name cannot exceed ' + exceedingLimit + ' characters').css('color', 'red');
                sweetAlert('Oops...', 'Company name cannot exceed ' + exceedingLimit + ' characters for member ' + i, 'error');
                limitExceeded = true;
            }

            //remove last name if member type equals company else remove signer
            if (isMemberCompany == 1) {
                $('#' + val + 'LastName').val('');
            } else {
                $('#' + val + 'PersonSign').val('');
            }
        });


        //Validate total of membership percentage
        if (totalPercentage > 100) {
            sweetAlert('Oops...',
                'The percentage of total ownership can not exceed 100%',
                'error'
            );

            return;
        }

        if (!limitExceeded) {
            //remove radio buttons before data update
            $('input:radio', '#frmEditMemberInfo').remove();

            updateData('frmEditMemberInfo', 'update-member-info', 'modalEditMemberInfo', 'vmembers');
        }
    }

    // Use personal name or company name
    function switchField(mem, type) {
        if (type == 1) {
            $('.' + mem + '_individual').show();
            $('.' + mem + '_signer').hide();
            $('#' + mem + 'Radio1').prop('checked', true);
            $("label[for = " + mem + "FirstName]").text("First Name");
            $('#' + mem + 'Radio1').val('1');
            $('#' + mem + 'Radio2').val('0');
        } else {
            $('.' + mem + '_signer').show();
            $("#" + mem + "Radio2").prop('checked', true);
            $('.' + mem + '_individual').hide();
            $("label[for = " + mem + "FirstName]").text("Company Name");
            $('#' + mem + 'Radio1').val('0');
            $('#' + mem + 'Radio2').val('1');
        }
    }

    $('input[name="compliance_notification_ra_status"]').change(function () {

            if(manual_click === true) {
                var status = $(this).val();
                formId = $(this).closest('form').attr('id');

                if (status == 1) {
                    text = "Domestic";
                    polarStatus = 0;
                } else {
                    text = "Foreign";
                    polarStatus = 1;
                }

                swal({
                    title: text + " Notification",
                    text: "Are you sure you want to change the filing entity status to " + text.toLowerCase() + " for this order?",
                    type: "warning",
                    showCancelButton: true,
                    confirmButtonColor: "#3cb81e",
                    confirmButtonText: "Yes, " + text + " !",
                    cancelButtonText: "No, cancel please!",
                    closeOnCancel: false,
                    closeOnConfirm: false
                }, function(inputValue) {
                    if (inputValue === false) {
                        $('#' + formId + ' input:radio').each(function() {
                            if ($(this).val() == polarStatus) {
                                manual_click = false;
                                $(this).closest('.btn').button('toggle');
                            }
                        });
                        swal.close();
                    } else {
                        $.ajax({
                            type: "POST",
                            dataType: "json",
                            data: {'requestData': $('#' + formId).serializeFormJSON(), 'ordernum': ordernum, 'updateType': 'compliance-notification-ra-filing-status'},
                            url: "https://db.incfile.com/incfile/order/edit-ajax/225070363866",
                            success: function (res) {
                                if (res.status) {
                                    swal({
                                        title: res.title_text,
                                        type: "success",
                                        confirmButtonText: "OK",
                                        closeOnConfirm: false
                                    }, function () {
                                        location.reload(true);
                                    });
                                }
                            }
                        });
                    }
                });
            }
        });

    var changeActiveTab = function (activeSection) {
        let activeTabHtml = $(`.tab.${activeSection}`);
        let sectionToHide = $('.active.tab').children().attr('href').substring(1);//remove # from <a href> and we got an id

        $(`.tab.active`).removeClass('active');
        $(`#${sectionToHide}`).removeClass('active');

        activeTabHtml.addClass('active');
        activeTabHtml.children().attr('aria-expanded', true);
        let sectionToShow = $('.active.tab').children().attr('href').substring(1);
        $(`#${sectionToShow}`).addClass('active');
        sessionStorage.removeItem('activeTab');
    };

    var orderDetailJs = {
        _checkValidationLicenseLogixForm: function (formId) {
            var invalid = [];
            var formElements = document.querySelectorAll('#' + formId + ' .required');
            _.forEach(formElements, function(el) {
                if (el.value === '') {
                    invalid.push(el.getAttribute('id'));
                }
            });
            return invalid.length === 0;
        }
    };

    $(document).on('hidden.bs.modal', '.modal', function () {
        $('.modal:visible').length && $(document.body).addClass('modal-open');
    });

    function toggleOptOutOfEin(value) {
        if (value === 'true') {
            $('#opt_out_of_ein_div').removeClass('hide');
        } else {
            $('#opt_out_of_ein_div').addClass('hide');
        }
    }

    function validateEmailExists(emailInput, saveButton) {
        $.ajax({
            type: 'POST',
            dataType: 'JSON',
            data: {email: emailInput.val()},
            url: 'https://db.incfile.com/incfile/order/client/exist-email',
            async: false,
            success: function (response) {
                if (response.exist) {
                    swal({
                        type: 'error',
                        html: true,
                        title: 'Some problems have occurred',
                        text: '<li>Email Address is already associated with existing client</li>',
                    });

                    emailInput.css({'border': '1px solid red'});
                    emailInput.addClass('error');
                    emailExists = true;
                } else {
                    emailInput.css({'border': ''});
                    emailInput.removeClass('error');
                    emailExists = false;
                }
            }
        });
    }

    // IDWise functions
    function manualReview(journeyId, decision, provider) {
        let comment = $('#idwiseComment').val();
        if (comment == '') {
            swal('Error', 'You must provide a reason for making the decision', 'error');
            return false;
        }
        let data = {
            journeyId: journeyId,
            decision: decision,
            comment: $('#idwiseComment').val(),
            email: 'moises.d@incfile.com',
            adminId: 168
        }
        $.blockUI();
        var ulr = '' ;
        if (provider == providerIDWise) {
            url = 'https://db.incfile.com/incfile/order/idwise/manual-reivew';
        }

        if (provider == providerVAVerification) {
            url = 'https://db.incfile.com/incfile/order/va-verification/manual-review';
        }
        setTimeout(() => {
            $.ajax({
                type: 'POST',
                dataType: 'JSON',
                data: data,
                url: url,
                async: false,
                success: function (response) {
                    $.unblockUI();
                    if (provider == providerIDWise) {
                        if (response.success == true) {
                            swal({
                                title: 'Manual Decision Updated',
                                type: 'success',
                                confirmButtonText: 'OK',
                                closeOnConfirm: false
                            }, function () {
                                window.location.reload();
                            });
                        } else {
                            $.unblockUI();
                            swal({
                                title: 'Manual Decision Not Updated',
                                type: 'error',
                                text: 'Something went wrong while updating the Manual Decision, please retry',
                                confirmButtonText: 'OK',
                                closeOnConfirm: false
                            }, function () {
                                window.location.reload();
                            });

                        }
                    }

                    if (provider == providerVAVerification) {
                        if (response.data.status_label) {
                            swal({
                                title: 'Manual Decision Updated',
                                type: 'success',
                                confirmButtonText: 'OK',
                                closeOnConfirm: false
                            }, function () {
                                window.location.reload();
                            });
                        } else {
                            $.unblockUI();
                            swal({
                                title: 'Manual Decision Not Updated',
                                type: 'error',
                                text: 'Something went wrong while updating the Manual Decision, please retry',
                                confirmButtonText: 'OK',
                                closeOnConfirm: false
                            }, function () {
                                window.location.reload();
                            });
                        }
                    }
                }
            });
        }, 500);
    }

    function manageBankingOptions()
    {
        var app = 'incfile';
        var nerdwallet = 'nerdwallet';
        var boa = 'bankofamerica';
        var bankingNameVal = $("#bankingName").val();

        var hideOptions = function(optionValues) {
            optionValues.forEach(function(value) {
                $('#bankingName option[value="' + value + '"]').toggle(false);
            });
        };

        var toggleBusinessBankingOptions = function(isRelay, isNone) {
            var toggle2  = isRelay || isNone;
            $('#businessBanking option[value="2"]').toggle(!toggle2);
            $('#businessBanking option[value="1"]').toggle(!isNone);
        };

        if (app === nerdwallet) {
            hideOptions(['relay', 'boa']);
        } else if (app === boa) {
            hideOptions(['relay', 'none']);
        }

        if (bankingNameVal === 'none') {
            toggleBusinessBankingOptions(false, true);
        } else if (bankingNameVal === 'relay') {
            toggleBusinessBankingOptions(true, false);
        }

        $("#bankingName").on("change", function() {
            var isRelay = $(this).val() === 'relay';
            var isNone = $(this).val() === 'none';
            toggleBusinessBankingOptions(isRelay, isNone);
            $('#businessBanking').val('0');
        });

    }

    function getStatesByCountry(countryId) {
        let states = [];
        $.ajax({
            url: "https://db.incfile.com/incfile/api/states",
            method: 'GET',
            dataTytpe: 'JSON',
            data: {'country': countryId},
            async: false,
            success: function (response) {
                states = response.data;
            },
            error: function (jqXHR, textStatus, errorThrown) {
                console.error(jqXHR, textStatus, errorThrown);
            }
        });

        return states;
    }

    function populateStates(countryId, element, oldValue = '') {
        let stateOptions = getStatesByCountry(countryId);

        element.empty();
        element.append('<option value="">Select State</option>');

        $.each(stateOptions, function(key, state) {
            let option = '<option value="' + state.id  + '"' + (oldValue == state.id ? 'selected' : '') + '>' + state.name + '</option>';
            element.append(option);
        });
    }

    function toggleShowDocumentState(documentType) {
        let documentTypeId = documentType.val();
        let documentState = documentType.closest('.form-group').nextAll('.document_state_id').first();
        let documentCountry = documentType.closest('.form-group').nextAll('.document_issuing_country').first().find('select');

        if (documentTypeId == BOIR_ID_DOCUMENT_TYPE.PASSPORT) {
            documentState.addClass('hide');
            documentCountry.removeAttr('disabled')
        } else {
            documentState.removeClass('hide');
            documentCountry.val(USA);
            documentCountry.attr('disabled', 'disabled');
        }
    }
</script>

<script type="text/javascript" src="./DB_SEARCH_RESULTS_EXAMPLE_files/datatables.min.js"></script>
<script type="application/javascript">
    $(document).ready(function () {
        window.companies = {};

        
        if ($('#mobile').length) {
            window.userPhoneInput = window.phoneInput({
                phoneInputId: '#mobile',
                countryInputId: '#phone_country',
                dialCodeInputId: '#contact_phone_dial_code',
                errorMsgId: '#mobile_err'
            });
        }
    });

    $('#user-form').submit(function (e) {
        e.preventDefault();
    });

    $(document).on('keyup', '#invite_user_email', function () {
        $(this).val($(this).val().trim());
    });

    $(document).on('click', '#save', function (e) {
        e.preventDefault();

        var $formType = $('#formType');
        var $form = $('#user-form');
        var url = $form.prop('action');
        var formData = $form.serializeArray();
        var data = {};
        var sendForm = true;

        window.userPhoneInput.validatePhone();

        if (document.querySelector(window.userPhoneInput.customOptions.phoneInputId).classList.contains('invalid-phone')) {
            sendForm = false;
            swal({
                title: 'Please enter a valid phone number',
                type: "error",
                confirmButtonText: "OK",
                closeOnConfirm: true,
            });
        }

        $.each(formData, function(index, obj) {
            data[obj.name] = obj.value;
        });

        data.email = data.email.toLowerCase();

        if ($('[name="all_companies"]:checked').val() === 'no' && getTotalOfSelectedCompanies() > 0) {
            var accessOrders = window.companies.allCompanies.filter(function (item) {
                return item.checked;
            });
            data.companies = {};

            $.each(accessOrders, function (i, order) {
                data.companies[order.company] = {
                    role: order.role,
                    cc: order.cc
                };
            });
        } else if ($('[name="all_companies"]:checked').val() === 'no' && getTotalOfSelectedCompanies() === 0) {
            sendForm = false;
            swal({
                title: 'You must select at least one company from the right side ',
                type: "error",
                confirmButtonText: "OK",
                closeOnConfirm: true,
            });
        } else if (!window.userPhoneInput.isValidPhone()) {
            sendForm = false;
            swal({
                title: 'Please enter a valid phone number',
                type: "error",
                confirmButtonText: "OK",
                closeOnConfirm: true,
            });
        }


        var email = $('#email').val();
        if (window.location.host.search('db') !== -1) {
            email = $('#client_email').val();
        }

        if (sendForm && $formType.val() === 'create') {
            if (typeof ordernum !== 'undefined') {
                data.ordernum = ordernum;
            }

            $.ajax('/api/clients/exists/' + email, {
                type: 'GET',
                dataType: 'json',
                data: data,
                beforeSend: function () {
                    $.blockUI();
                },
            }).done(function (response) {
                if (response.exists && response.isDescendant && response.hasOrderAccess) {
                    showExistingSubuserAlert();
                } else if (response.exists && response.isDescendant && !response.hasOrderAccess) {
                    showConfirmAddExistingSubUserAlert(url, data);
                } else if (response.exists && !response.isDescendant) {
                    showConfirmAddExistingUserAlert(url, data);
                } else {
                    sendClientForm(url, data);
                }
            }).fail(function (response) {
                $.unblockUI();
                console.log(response);
            });
        } else if (sendForm) {
            sendClientForm(url, data);
        }
    });

    function sendClientForm(url, data) {
        $.ajax(url, {
            type: 'POST',
            dataType: 'json',
            data: data,
            beforeSend: function () {
                $.blockUI();
            },
        }).done(function (response) {
            resetErrors();

            if (!response.status) {
                $.unblockUI();
                showErrors(response.errors);
                displayErrorsInForm(response.errors)
                unblockButtons();
            }

            if (response.redirect) {
                window.location.href = response.redirect;
            }
        }).fail(function (response) {
            $.unblockUI();
            console.log(response);
        });
    }

    function unblockButtons() {
        $('.confirm-buttons-section button').prop('disabled', false);
    }

    $(document).on('click', '.delete-form button', function () {
        var users = $.makeArray($('div.user div.checkbox input:checkbox:checked').map(function (index, element) {
            return $(element).data('id');
        }));

        if (users.length === 0) {
            showNotUsersSelectedAlert();
        } else {
            showConfirmDeleteUsersAlert(users);
        }
    });

    $(document).on('change', '[name="all_companies"]', function () {
        var value = $(this).val();

        if (value === 'yes') {
            $('#default-rol-block').show();
            $('.companies-section').hide();
            $('#no-companies').hide();
            $('.companies-section input[type="checkbox"]').prop('checked', false);
            $('.cc-email-section').show();
        } else {
            $('#default-rol-block').hide();
            $('.companies-section').show();
            $('.cc-email-section').hide();
            $('#q1_cc_no').prop('checked', true);
            checkPreviousSelectedCompanyCheckboxes();
        }
    });

    $(document).on('change', '#checked_all_companies', function () {
        window.companies.selectAll = $(this).prop('checked');
        $('.selected_company').prop('checked', window.companies.selectAll);
        $('.selected_cc').prop('disabled', !window.companies.selectAll);

        if (!window.companies.selectAll) {
            window.companies.selectAllCC = false;
            $('.selected_cc').prop('checked', false);
        }

        $('#checked_all_companies_cc').prop('checked', false);

        changeCheckedStatusAllCompanies(window.companies.selectAll);
    });

    $(document).on('change', '#checked_all_companies_cc', function () {
        window.companies.selectAllCC = $(this).prop('checked');
        $('.selected_cc').not(":disabled").prop('checked', window.companies.selectAllCC);

        changeCheckedStatusAllCC(window.companies.selectAllCC);
    });

    $(document).on('change', 'input.selected_company', function () {
        var index = $(this).data('index');
        var checked = $(this).prop('checked');
        var $ccCheckbox = $('[name=selected_cc\\['+index+'\\]]');
        $ccCheckbox.prop('disabled', !checked);

        if (!checked) {
            $ccCheckbox.prop('checked', false);
        }

        storeCompany(index, checked, $ccCheckbox.prop('checked'));
        checkSelectAllCheckbox();
    });

    $(document).on('change', 'input.selected_cc', function () {
        var index = $(this).data('index');
        var $companyCheckbox = $('[name=selected_company\\['+index+'\\]]');

        storeCompany(index, $companyCheckbox.prop('checked'), $(this).prop('checked'));
        checkSelectAllCCCheckbox();
    });

    $(document).on('change', 'select.roles', function () {
        var index = $(this).data('index');
        var $ccCheckbox = $('[name=selected_cc\\['+index+'\\]]');
        var $companyCheckbox = $('[name=selected_company\\['+index+'\\]]');

        storeCompany(index, $companyCheckbox.prop('checked'), $ccCheckbox.prop('checked'));
    });

    $(document).on('change', '[name="first_name"], [name="last_name"]', function () {
        var name = $(this).val().toLowerCase();
        $(this).val( name.replace(/(?:^|\s)\S/g, function(a) { return a.toUpperCase(); })  );
    });

    function showErrors(errors) {
        showNotificationAlert(errors, 'Some problems have occurred', 'error');
    }

    function showWarnings(errors) {
        showNotificationAlert(errors, 'Something has happened', 'warning');
    }

    function showNotificationAlert(messages, title, type) {
        var errorsHTML = '<ul>';

        $.each(messages, function (i, message) {
            errorsHTML += '<li class="error" style="text-align: center">' + message + '</li>';
        });
        errorsHTML += '</ul>';

        swal({
                title: title,
                text: errorsHTML,
                html: true,
                type: type,
                confirmButtonColor: '#DD6B55',
                confirmButtonText: 'Continue',
                closeOnConfirm: true,
            },
            function (isConfirm) {

            });
    }

    function displayErrorsInForm(errors) {
        const errorFields = Object.keys(errors);
        errorFields.forEach(function (field) {
            const $field = $('.user-' + field);

            $field.addClass('has-error');
            //$field.find('label').addClass('help-block-error');
            $field.find('span').removeClass('hide').text(errors[field]);
        });
    }

    function resetErrors() {
        const fields = ['first_name', 'last_name', 'email', 'mobile'];

        fields.forEach(function (field) {
            const $field = $('.user-' + field);

            $field.removeClass('has-error');
            //$field.find('label').removeClass('help-block-error');
            $field.find('span').addClass('hide').text('');
        });
    }

    function changeSelectColor(identifier, color) {
        $(identifier).find('button.btn.dropdown-toggle').removeClass().addClass('btn dropdown-toggle ' + color);
    }

    function showNotUsersSelectedAlert() {
        swal({
            title: 'Delete users',
            text: 'You have not selected any users',
            type: 'warning',
            confirmButtonText: 'Continue',
            closeOnConfirm: true,
        });
    }

    function showExistingSubuserAlert() {
        swal({
            title: 'Warning',
            text: 'The email address is already registered',
            type: "warning",
            confirmButtonText: "OK",
            closeOnConfirm: true,
        });
    }

    function showConfirmDeleteUsersAlert(users) {
        swal({
            title: 'Delete users',
            text: 'Are you sure you want to delete selected users?',
            type: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#DD6B55',
            confirmButtonText: 'Yes',
            cancelButtonText: 'No',
            closeOnConfirm: true,
            closeOnCancel: true
        },
        function (isConfirm) {
            if (isConfirm) {
                $.blockUI();

                $.each(users, function (i, id) {
                    $('<input>').attr({
                        type: 'hidden',
                        name: 'ids[]',
                        value: id,
                    }).appendTo('#delete-users-form');
                });

                $('#delete-users-form').submit();
            }
        });
    }

    function showConfirmAddExistingUserAlert(url, data) {
        swal({
            title: 'Add existing user',
            text: 'The email address is already registered. Would you like to add the user and send an invitation link?',
            type: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#DD6B55',
            confirmButtonText: 'Yes',
            cancelButtonText: 'No',
            closeOnConfirm: true,
            closeOnCancel: true
        },
        function (isConfirm) {
            if (isConfirm) {
                sendClientForm(url, data);
            }
        });
    }

    function showConfirmAddExistingSubUserAlert(url, data) {
        swal({
            title: 'Add existing user',
            text: 'This email belongs to one of your subusers. Would you like to grant the subuser access to the selected companies?',
            type: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#DD6B55',
            confirmButtonText: 'Yes',
            cancelButtonText: 'No',
            closeOnConfirm: true,
            closeOnCancel: true
        },
        function (isConfirm) {
            if (isConfirm) {
                sendClientForm(url, data);
            }
        });
    }

    function displayUserCompanies() {
        var $formType = $('#formType');
        
        if ($formType.length > 0) {
            var formType = $formType.val();
            var ownerID = $('#ownerID').val();
            var clientToEditID = null;
            
            if (formType === 'edit') {
                clientToEditID = $('#clientToEditID').val();
            }

            getUserCompanies(ownerID, clientToEditID);
        }
    }

    function getUserCompanies(ownerID, clientToEditID) {
        var $currentMainOrder = $('#currentMainOrder');
        var url = '/incfile/order/users/get-companies/' + ownerID + (clientToEditID ? '/' + clientToEditID : '');
        var showRoles = parseInt($('#showRoles').val()) === 1;
        var dataTableColumns = [
            {'data': 'checkbox'},
            {'data': 'cc'},
            {'data': 'order'},
            {'data': 'company_name'},
            {'data': 'roles'},
        ];
        var extraData = {};

        if ($currentMainOrder.length) {
            extraData.ordernum = $currentMainOrder.val();
        }

        window.companies.table = $('#companies').DataTable({
            columns: dataTableColumns,
            ordering: false,
            searching: false,
            info: false,
            processing: true,
            serverSide: true,
            ajax: {
                method: 'GET',
                url: url,
                data: extraData,
                complete: function (response) {
                    $.each($('.selected_company:checked'), function (index, element) {
                        var companyIndex = $(element).data('index');
                        var $cc = $('[name=selected_cc\\['+companyIndex+'\\]]');

                        storeCompany(companyIndex, $(element).prop('checked'), $cc.prop('checked'));
                    });

                    if (window.companies.selectAll) {
                        checkAllCompaniesCheckboxes(true);
                        checkAllCCCheckboxes(window.companies.selectAllCC);
                    } else {
                        checkSelectAllCheckbox();
                        checkSelectAllCCCheckbox();
                        checkPreviousSelectedCompanyCheckboxes();
                    }
                }
            },
            initComplete: function (settings, json) {
                window.companies.allCompanies = json.allCompanies;

                if (json.selectedCompanies.length > 0) {
                    var allCompaniesSelected = getTotalOfCompanies() === getTotalOfSelectedCompanies();

                    $('#checked_all_companies').prop('checked', allCompaniesSelected);
                    window.companies.selectAll = allCompaniesSelected;

                    window.companies.allCompanies = window.companies.allCompanies.map(function (info) {
                        var companyFound = json.selectedCompanies.find(function (item) {
                            return item.company === info.company;
                        });

                        if (companyFound) {
                            info.checked = companyFound.checked;
                            info.role = companyFound.role;
                            info.cc = companyFound.cc;
                        }

                        return info;
                    });
                }
            },
            drawCallback: function (settings) {
                if (window.companies.selectAll) {
                    checkAllCompaniesCheckboxes(true);
                    checkAllCCCheckboxes(window.companies.selectAllCC)
                } else {
                    checkPreviousSelectedCompanyCheckboxes();
                }

                if (!showRoles) {
                    $('#companies th:contains("Role")').hide();
                    $('select.roles').parent().hide();
                } else {
                    $('#companies th:contains("Role")').show();
                }

                if (window.companies.table.page.info().pages === 1) {
                    $('#companies_paginate').hide();
                } else {
                    $('#companies_paginate').show();
                }
            }
        });
    }

    function storeCompany(index, checked, cc) {
        window.companies.allCompanies = window.companies.allCompanies || [];

        var companyId = $('[name=company_id\\['+index+'\\]]').val();
        var roleId = $('[name=company_role\\['+index+'\\]]').val();
        var selectedCompany = {company: companyId, role: roleId, checked: checked, cc: cc};

        var elementIndex = window.companies.allCompanies.map(function(e) { return e.company; }).indexOf(companyId);

        if (elementIndex === -1) {
            window.companies.allCompanies.push(selectedCompany);
        } else {
            window.companies.allCompanies[elementIndex] = selectedCompany;
        }
    }

    function checkPreviousSelectedCompanyCheckboxes() {
        if (window.companies.allCompanies || window.companies.selectAllCC) {
            $.each($('.selected_company'), function (index, element) {
                var $ccCheckbox =  $('[name=selected_cc\\['+index+'\\]]');
                var $roleInput = $('[name=company_role\\['+index+'\\]]');
                var companyId = $('[name=company_id\\['+index+'\\]]').val();
                var company = window.companies.allCompanies.find(function (item) {
                    return item.company === companyId;
                });

                if (company) {
                    $(element).prop('checked', company.checked);
                    $ccCheckbox.prop('disabled', !company.checked);

                    if (company.checked) {
                        $ccCheckbox.prop('checked', company.cc);
                    }

                    $roleInput.val(company.role)
                }
            });
        }
    }

    function checkSelectAllCheckbox() {
        if (window.companies.table && window.companies.allCompanies) {
            var checkAllCompaniesInput = getTotalOfCompanies() === getTotalOfSelectedCompanies();

            $('#checked_all_companies').prop('checked', checkAllCompaniesInput);
            window.companies.selectAll = checkAllCompaniesInput;
        }
    }

    function checkSelectAllCCCheckbox() {
        var checkAllCCCompaniesInput = getTotalOfCompanies() === getTotalOfSelectedCC();

        $('#checked_all_companies_cc').prop('checked', checkAllCCCompaniesInput);
        window.companies.selectAllCC = checkAllCCCompaniesInput;
    }

    function checkAllCompaniesCheckboxes(checked) {
        checkPreviousSelectedCompanyCheckboxes();

        $.each($('.selected_company'), function (index, element) {
            var companyIndex = $(element).data('index');
            var $ccCheckbox = $('[name=selected_cc\\['+companyIndex+'\\]]');

            if (!$(this).prop('checked')) {
                $(element).prop('checked', checked);
                $($ccCheckbox).prop('disabled', !checked);
                storeCompany(companyIndex, checked, $ccCheckbox.prop('checked'));
            }
        });
    }

    function checkAllCCCheckboxes(checked) {
        checkPreviousSelectedCompanyCheckboxes();

        $.each($('.selected_cc'), function (index, element) {
            var companyIndex = $(element).data('index');
            var $companyCheckbox = $('[name=selected_company\\['+companyIndex+'\\]]');

            if (!$(this).prop('checked')) {
                $(element).prop('checked', !!checked);
                storeCompany(companyIndex, $companyCheckbox.prop('checked'), !!checked);
            }
        });
    }

    function getTotalOfSelectedCompanies() {
        return window.companies.allCompanies.filter(function (company) {
            return company.checked;
        }).length;
    }

    function getTotalOfSelectedCC() {
        var total = 0;
        var totalOfCompanies = getTotalOfCompanies();

        for (var i = 0; i < totalOfCompanies; i++) {
            total += window.companies.allCompanies[i].cc ? 1 : 0
        }

        return total;
    }

    function getTotalOfCompanies() {
        return window.companies.allCompanies.length;
    }

    function changeCheckedStatusAllCompanies(checked) {
        window.companies.allCompanies = window.companies.allCompanies.map(function (company) {
            company.checked = checked;
            return company;
        });

        if (!checked) {
            changeCheckedStatusAllCC(checked);
        }
    }

    function changeCheckedStatusAllCC(checked) {
        window.companies.allCompanies = window.companies.allCompanies.map(function (company) {
            company.cc = company.checked;
            return company;
        });
    }
</script>
<script>
    (function () {
        var $form = $('#user-form');
        var $formType = $('#formType');

        function getClient(url) {
            var response = $.ajax(url, {
                type: 'GET',
                dataType: 'json',
                async: false,
            });

            if (response.status === 200 && response.responseJSON.status) {
                return response.responseJSON.client;
            }

            return null;
        }

        function destroyDatatable() {
            $('#companies').DataTable().destroy();
        }

        function showConfirmDeleteUserAlert(id) {
            swal({
                title: 'Delete user',
                text: 'Are you sure you want to delete selected user?',
                type: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#DD6B55',
                confirmButtonText: 'Yes',
                cancelButtonText: 'No',
                closeOnConfirm: true,
                closeOnCancel: true
            },
            function (isConfirm) {
                if (isConfirm) {
                    sessionStorage.setItem('activeTab', 'vclient');
                    $('#delete-users-form-' + id).submit();
                }
            });
        }

        function showBlockClientAlert(clientId, blockClientUrl, isBlocked) {
            var title = isBlocked ? 'Unblock' : 'Block';
            swal({
                    title: title + ' Client Access',
                    text: 'Are you sure you want to '+ title.toLowerCase() +' selected client?',
                    type: 'warning',
                    showCancelButton: true,
                    confirmButtonColor: '#DD6B55',
                    confirmButtonText: 'Yes',
                    cancelButtonText: 'No',
                    closeOnConfirm: true,
                    closeOnCancel: true
                },
                function (isConfirm) {
                    if (isConfirm) {
                        $.ajax({
                            type: 'POST',
                            url: blockClientUrl,
                            data: {
                                id: clientId
                            },
                            dataType: 'json',
                            success: function (response) {
                                if (response.status == 1) {
                                    swal({
                                        title: 'User ' + (isBlocked ? 'unblocked' : 'blocked') + ' successfully',
                                        type: "success",
                                        confirmButtonColor: '#DD6B55',
                                        confirmButtonText: 'Ok',
                                        closeOnConfirm: true,
                                    }, function () {
                                        sessionStorage.setItem('activeTab', 'vclient');
                                        window.location.reload();
                                    });
                                } else {
                                    swal({
                                        title: 'Unable to ' + (isBlocked ? 'unblock' : 'block') + ' client. Try Again',
                                        type: "error",
                                        confirmButtonText: "OK",
                                        closeOnConfirm: true,
                                    }, function () {
                                        window.location.reload();
                                    });
                                }
                            },
                        });
                    }
                });
        }

        function showSuccessMessage() {
            swal({
                title: '',
                type: "success",
                confirmButtonText: "OK",
                closeOnConfirm: true,
            });
        }

        function showErrorMessage() {
            swal({
                title: '',
                type: "error",
                confirmButtonText: "OK",
                closeOnConfirm: true,
            });
        }

        function blockButtons() {
            $('.confirm-buttons-section button').prop('disabled', true);
        }

        $(document).on('click', '#save', function (e) {
            e.preventDefault();
            sessionStorage.setItem('activeTab', 'vclient');
        });

        $(document).on('click', '.add-user', function (e) {
            displayUserCompanies();

            $('[name="all_companies"]#q1_no').prop("checked", true);
            $('.companies-section').hide();
            $('div.user-access').hide();
        });

        $(document).on('click', '#block-client', function (e) {
            showBlockClientAlert($(this).data('id'), $(this).data('block-client-url'), $(this).data('is-blocked'));
        });

        $(document).on('click', '.edit-client', function (e) {
            e.preventDefault();

            var $clientOwner = $('#ownerID');
            var $clientToEdit = $('#clientToEditID');
            var $firstName = $('#client_first_name');
            var $lastName = $('#client_last_name');
            var $email = $('#client_email');
            var $phone = $('#client_mobile');
            var $phoneCountry = $('#phone_country');
            var $phoneDial = $('#contact_phone_dial_code');

            $formType.val('edit');
            $clientToEdit.val($(this).data('id'));

            var client = getClient($(this).data('client-url'));

            if (client) {
                var $accessToAllCompanies = client.hasAccessToAllCompanies ? $('#q1_yes') : $('#q1_no');

                $firstName.val(client.first_name);
                $lastName.val(client.last_name);
                $email.val(client.email);
                $phone.val(client.phone_number);
                $phoneCountry.val(client.phone_country);
                $phoneDial.val(client.phoneDialCode);
                $accessToAllCompanies.prop('checked', true);
                $form.attr('action', client.updateURL);
                
                window.userPhoneInput.reset(client.phone_country, client.phone_number);

                displayUserCompanies();

                $('.companies-section').hide();
                $('div.user-access').hide();

                if ($formType.val() === 'edit') {
                    $('#modal-user-title').text('Edit user');
                    $form.append('<input name="_method" type="hidden" value="PUT">');
                }
            }
        });

        $(document).on('click', '.delete-user', function (e) {
            e.preventDefault();

            var client = getClient($(this).closest('td').find('.edit-client').data('client-url'));
            var transnum = parseInt("2663866");

            $.ajax('/api/contact/get-contact/' + client.id + '?transnum=' + transnum, {
                method: 'GET',
                dataTytpe: 'JSON',
                success: function (response) {
                    if (!response.orders) {
                        return showConfirmDeleteUserAlert(client.id);
                    }

                    var isContactOfCurrentOrder = response.orders.find(
                        (order) => order.transnum === transnum
                    );

                    if (isContactOfCurrentOrder) {
                        swal({
                            title: 'Warning',
                            text: 'The primary contact cannot be deleted',
                            type: 'warning',
                            confirmButtonColor: '#DD6B55',
                            confirmButtonText: 'Ok',
                            closeOnConfirm: true,
                            closeOnCancel: true
                        });
                    } else {
                        return showConfirmDeleteUserAlert(client.id);
                    }
                },
                error: function (jqXHR, textStatus, errorThrown) {
                    console.error(jqXHR, textStatus, errorThrown);
                }
            });
        });

        $('#client-form').on('show.bs.modal', function (e) {
            destroyDatatable();

            window.userPhoneInput.cleanInput();

            $('.companies-section').hide();
            $('#client-form [name="_method"]').remove();
            $('#user-form input[type="text"].form-control').val("");
            $form.attr('action', 'https://db.incfile.com/incfile/order/users');

            if ($formType.val() === 'create') {
                $('#modal-user-title').text('Add new user');
                $('#q1_yes').prop('checked', true);
            }

            if (parseInt($('#totalOwnerCompanies').val()) <= 1) {
                $('div.user-access').hide();
            }
        });

        $('#client-form').on('hidden.bs.modal', function (e) {
            var $clientToEdit = $('#clientToEditID');

            $formType.val('create');
            $clientToEdit.val('');
        });

        $(document).ready(function () {
                    });
    })();
</script>


<script>
    // Helper methods
    let toggleModal = (event) => {
        event.preventDefault();
        $("#modalAdditionalInformationRequest").modal('toggle');
    };

    let cleanString = (string) => {
        // Escape newlines in order company purpose to avoid Unexpected token in JSON
        let order = string.replace(/(\r\n|\n|\r|\t)/gm, "\\n");
        return order.split('&quot;').join('"');
    };
</script>

<script>
/**
 * Additional Information Request Feature Script
 * This script will handle the available questions to add/remove when placing a new Additional Information Request issue.
 *
 * @author  @erickdev93  Erick Sandoval
 */
$(document).ready(function(){
    //Prefixes to get the current members, directors, shareholders and officers functions
    const memberPrefixes = ['pres', 'vp', 'sec', 'treas', 'member5', 'member6'];
    const shareHolderPrefixes = ['share1', 'share2', 'share3', 'share4', 'share5', 'share6'];
    const officerPrefixes = ['president', 'secretary', 'treasurer', 'vice_president'];

    //Converting the order to JSON Object
    let order = cleanString('{&quot;transnum&quot;:2663866,&quot;contactEmail&quot;:&quot;contato@panthermamakids.com&quot;,&quot;compName1&quot;:&quot;PANTHER MAMA &amp; KIDS LLC&quot;,&quot;originalName&quot;:&quot;PANTHER MAMA &amp; KIDS LLC&quot;,&quot;ordernum&quot;:225070363866,&quot;dateUpdated&quot;:0,&quot;dateOrdered&quot;:1751568657,&quot;dateExpiration&quot;:&quot;2026-07-03&quot;,&quot;status&quot;:1,&quot;entityType&quot;:&quot;LLC&quot;,&quot;entityState&quot;:&quot;Massachusetts&quot;,&quot;regagent&quot;:1,&quot;contact_id&quot;:1357604,&quot;contactFirstName&quot;:&quot;Edna&quot;,&quot;contactLastName&quot;:&quot;Barreto&quot;,&quot;contactStreet1&quot;:&quot;145 Tremont St Ste 201&quot;,&quot;contactStreet2&quot;:&quot;&quot;,&quot;contactCity&quot;:&quot;Boston&quot;,&quot;contactState&quot;:&quot;Massachusetts&quot;,&quot;contactZip&quot;:&quot;02111&quot;,&quot;contactPhone1&quot;:&quot;617&quot;,&quot;contactPhone2&quot;:&quot;682&quot;,&quot;contactPhone3&quot;:&quot;0347&quot;,&quot;contact_phone_country&quot;:&quot;US&quot;,&quot;contact_phone&quot;:&quot;6176820347&quot;,&quot;ss4Street1&quot;:&quot;145 Tremont St Ste 201&quot;,&quot;ss4Street2&quot;:&quot;&quot;,&quot;ss4City&quot;:&quot;Boston&quot;,&quot;ss4State&quot;:&quot;Massachusetts&quot;,&quot;ss4Country&quot;:&quot;USA&quot;,&quot;ss4Zip&quot;:&quot;02111&quot;,&quot;ss4County&quot;:&quot;Suffolk&quot;,&quot;foreign_ein&quot;:0,&quot;compStreet1&quot;:&quot;28 Church St, Ste 14 #5693&quot;,&quot;compStreet2&quot;:&quot;&quot;,&quot;compCity&quot;:&quot;Winchester&quot;,&quot;compState&quot;:&quot;Massachusetts&quot;,&quot;compZip&quot;:&quot;01890&quot;,&quot;compCounty&quot;:&quot;&quot;,&quot;agentFirstName&quot;:null,&quot;agentLastName&quot;:null,&quot;agentStreet1&quot;:null,&quot;agentStreet2&quot;:null,&quot;agentCity&quot;:null,&quot;agentState&quot;:null,&quot;agentZip&quot;:null,&quot;agentCounty&quot;:null,&quot;agentComp&quot;:null,&quot;joinedAgentUsed&quot;:301,&quot;orderType&quot;:&quot;Silver&quot;,&quot;orderOrigin&quot;:0,&quot;orig_ordernum&quot;:null,&quot;license_logix&quot;:0,&quot;license_logix_done&quot;:0,&quot;lawTrades&quot;:0,&quot;state_status&quot;:0,&quot;state_id&quot;:null,&quot;businessWebsite&quot;:0,&quot;virtualAddress&quot;:5693,&quot;members_are_married&quot;:0,&quot;llc_managed&quot;:0,&quot;list_members_directors&quot;:1,&quot;contract_library&quot;:1,&quot;has_kit_offer&quot;:0,&quot;companyagent_id&quot;:null,&quot;zendesk_id&quot;:38616982410907,&quot;businessBanking&quot;:2,&quot;promote&quot;:0,&quot;isLoyaltyClient&quot;:0,&quot;compliance_email_version&quot;:null,&quot;membersInfo&quot;:{&quot;transnumFK2&quot;:2663866,&quot;presFirstName&quot;:&quot;Edna&quot;,&quot;presLastName&quot;:&quot;Barreto&quot;,&quot;presStreet1&quot;:&quot;28 Church St, Ste 14 #5693&quot;,&quot;presStreet2&quot;:&quot;&quot;,&quot;presCity&quot;:&quot;Winchester&quot;,&quot;presState&quot;:&quot;Massachusetts&quot;,&quot;presZip&quot;:&quot;01890&quot;,&quot;presOwnership&quot;:&quot;100%&quot;,&quot;presPersonSign&quot;:null,&quot;presssn1&quot;:null,&quot;presssn2&quot;:null,&quot;presssn3&quot;:null,&quot;vpFirstName&quot;:null,&quot;vpLastName&quot;:null,&quot;vpStreet1&quot;:&quot;28 Church St, Ste 14 #5693&quot;,&quot;vpStreet2&quot;:&quot;&quot;,&quot;vpCity&quot;:&quot;Winchester&quot;,&quot;vpState&quot;:&quot;Massachusetts&quot;,&quot;vpZip&quot;:&quot;01890&quot;,&quot;vpOwnership&quot;:&quot;0&quot;,&quot;vpPersonSign&quot;:null,&quot;vpssn1&quot;:null,&quot;vpssn2&quot;:null,&quot;vpssn3&quot;:null,&quot;secFirstName&quot;:null,&quot;secLastName&quot;:null,&quot;secStreet1&quot;:&quot;28 Church St, Ste 14 #5693&quot;,&quot;secStreet2&quot;:&quot;&quot;,&quot;secCity&quot;:&quot;Winchester&quot;,&quot;secState&quot;:&quot;Massachusetts&quot;,&quot;secZip&quot;:&quot;01890&quot;,&quot;secOwnership&quot;:&quot;0&quot;,&quot;secPersonSign&quot;:null,&quot;secssn1&quot;:null,&quot;secssn2&quot;:null,&quot;secssn3&quot;:null,&quot;treasFirstName&quot;:null,&quot;treasLastName&quot;:null,&quot;treasStreet1&quot;:&quot;28 Church St, Ste 14 #5693&quot;,&quot;treasStreet2&quot;:&quot;&quot;,&quot;treasCity&quot;:&quot;Winchester&quot;,&quot;treasState&quot;:&quot;Massachusetts&quot;,&quot;treasZip&quot;:&quot;01890&quot;,&quot;treasOwnership&quot;:&quot;0&quot;,&quot;treasPersonSign&quot;:null,&quot;treasssn1&quot;:null,&quot;treasssn2&quot;:null,&quot;treasssn3&quot;:null,&quot;member5FirstName&quot;:null,&quot;member5LastName&quot;:null,&quot;member5Street1&quot;:&quot;28 Church St, Ste 14 #5693&quot;,&quot;member5Street2&quot;:&quot;&quot;,&quot;member5City&quot;:&quot;Winchester&quot;,&quot;member5State&quot;:&quot;Massachusetts&quot;,&quot;member5Zip&quot;:&quot;01890&quot;,&quot;member5Ownership&quot;:&quot;0&quot;,&quot;member5PersonSign&quot;:null,&quot;member5ssn1&quot;:null,&quot;member5ssn2&quot;:null,&quot;member5ssn3&quot;:null,&quot;member6FirstName&quot;:null,&quot;member6LastName&quot;:null,&quot;member6Street1&quot;:&quot;28 Church St, Ste 14 #5693&quot;,&quot;member6Street2&quot;:&quot;&quot;,&quot;member6City&quot;:&quot;Winchester&quot;,&quot;member6State&quot;:&quot;Massachusetts&quot;,&quot;member6Zip&quot;:&quot;01890&quot;,&quot;member6Ownership&quot;:&quot;0&quot;,&quot;member6PersonSign&quot;:null,&quot;member6ssn1&quot;:null,&quot;member6ssn2&quot;:null,&quot;member6ssn3&quot;:null,&quot;presIsEntityMember&quot;:false,&quot;vpIsEntityMember&quot;:false,&quot;secIsEntityMember&quot;:false,&quot;treasIsEntityMember&quot;:false,&quot;member5IsEntityMember&quot;:false,&quot;member6IsEntityMember&quot;:false},&quot;shareholdersInfo&quot;:[],&quot;officersInfo&quot;:[],&quot;agent&quot;:{&quot;agentNo&quot;:301,&quot;active&quot;:1,&quot;provider_id&quot;:1,&quot;agentName&quot;:&quot;REPUBLIC REGISTERED AGENT INC.&quot;,&quot;agentStreet1&quot;:&quot;28 Church St&quot;,&quot;agentStreet2&quot;:&quot;Ste 14&quot;,&quot;agentCity&quot;:&quot;Winchester&quot;,&quot;agentState&quot;:&quot;MA&quot;,&quot;agentZip&quot;:&quot;01890&quot;,&quot;llc&quot;:1,&quot;corp&quot;:1,&quot;nonp&quot;:1,&quot;updated_at&quot;:&quot;2022-11-10 23:53:25&quot;,&quot;updated_by&quot;:2},&quot;isMisc&quot;:false,&quot;contactCountry&quot;:&quot;US&quot;,&quot;contactPhoneCountry&quot;:&quot;US&quot;,&quot;companyAddress&quot;:&quot;28 Church St, Ste 14 #5693 Winchester, Massachusetts 01890&quot;,&quot;contactName&quot;:&quot;Edna Barreto&quot;,&quot;contactPhone&quot;:&quot;6176820347&quot;,&quot;contactPhoneFormatted&quot;:&quot;(617) 682-0347&quot;,&quot;members&quot;:{&quot;transnumFK2&quot;:2663866,&quot;presFirstName&quot;:&quot;Edna&quot;,&quot;presLastName&quot;:&quot;Barreto&quot;,&quot;presStreet1&quot;:&quot;28 Church St, Ste 14 #5693&quot;,&quot;presStreet2&quot;:&quot;&quot;,&quot;presCity&quot;:&quot;Winchester&quot;,&quot;presState&quot;:&quot;Massachusetts&quot;,&quot;presZip&quot;:&quot;01890&quot;,&quot;presOwnership&quot;:&quot;100%&quot;,&quot;presPersonSign&quot;:null,&quot;presssn1&quot;:null,&quot;presssn2&quot;:null,&quot;presssn3&quot;:null,&quot;vpFirstName&quot;:null,&quot;vpLastName&quot;:null,&quot;vpStreet1&quot;:&quot;28 Church St, Ste 14 #5693&quot;,&quot;vpStreet2&quot;:&quot;&quot;,&quot;vpCity&quot;:&quot;Winchester&quot;,&quot;vpState&quot;:&quot;Massachusetts&quot;,&quot;vpZip&quot;:&quot;01890&quot;,&quot;vpOwnership&quot;:&quot;0&quot;,&quot;vpPersonSign&quot;:null,&quot;vpssn1&quot;:null,&quot;vpssn2&quot;:null,&quot;vpssn3&quot;:null,&quot;secFirstName&quot;:null,&quot;secLastName&quot;:null,&quot;secStreet1&quot;:&quot;28 Church St, Ste 14 #5693&quot;,&quot;secStreet2&quot;:&quot;&quot;,&quot;secCity&quot;:&quot;Winchester&quot;,&quot;secState&quot;:&quot;Massachusetts&quot;,&quot;secZip&quot;:&quot;01890&quot;,&quot;secOwnership&quot;:&quot;0&quot;,&quot;secPersonSign&quot;:null,&quot;secssn1&quot;:null,&quot;secssn2&quot;:null,&quot;secssn3&quot;:null,&quot;treasFirstName&quot;:null,&quot;treasLastName&quot;:null,&quot;treasStreet1&quot;:&quot;28 Church St, Ste 14 #5693&quot;,&quot;treasStreet2&quot;:&quot;&quot;,&quot;treasCity&quot;:&quot;Winchester&quot;,&quot;treasState&quot;:&quot;Massachusetts&quot;,&quot;treasZip&quot;:&quot;01890&quot;,&quot;treasOwnership&quot;:&quot;0&quot;,&quot;treasPersonSign&quot;:null,&quot;treasssn1&quot;:null,&quot;treasssn2&quot;:null,&quot;treasssn3&quot;:null,&quot;member5FirstName&quot;:null,&quot;member5LastName&quot;:null,&quot;member5Street1&quot;:&quot;28 Church St, Ste 14 #5693&quot;,&quot;member5Street2&quot;:&quot;&quot;,&quot;member5City&quot;:&quot;Winchester&quot;,&quot;member5State&quot;:&quot;Massachusetts&quot;,&quot;member5Zip&quot;:&quot;01890&quot;,&quot;member5Ownership&quot;:&quot;0&quot;,&quot;member5PersonSign&quot;:null,&quot;member5ssn1&quot;:null,&quot;member5ssn2&quot;:null,&quot;member5ssn3&quot;:null,&quot;member6FirstName&quot;:null,&quot;member6LastName&quot;:null,&quot;member6Street1&quot;:&quot;28 Church St, Ste 14 #5693&quot;,&quot;member6Street2&quot;:&quot;&quot;,&quot;member6City&quot;:&quot;Winchester&quot;,&quot;member6State&quot;:&quot;Massachusetts&quot;,&quot;member6Zip&quot;:&quot;01890&quot;,&quot;member6Ownership&quot;:&quot;0&quot;,&quot;member6PersonSign&quot;:null,&quot;member6ssn1&quot;:null,&quot;member6ssn2&quot;:null,&quot;member6ssn3&quot;:null,&quot;presIsEntityMember&quot;:false,&quot;vpIsEntityMember&quot;:false,&quot;secIsEntityMember&quot;:false,&quot;treasIsEntityMember&quot;:false,&quot;member5IsEntityMember&quot;:false,&quot;member6IsEntityMember&quot;:false},&quot;parent&quot;:null,&quot;secondary&quot;:{&quot;transnumFK&quot;:2663866,&quot;expedited&quot;:&quot;true&quot;,&quot;kit&quot;:&quot;noKit&quot;,&quot;isDeluxeKit&quot;:0,&quot;isSilverUpgraded&quot;:1,&quot;isSilverToGold&quot;:0,&quot;isGoldToPlatinum&quot;:0,&quot;compFilingDate&quot;:0,&quot;scorp&quot;:null,&quot;ss4&quot;:&quot;true&quot;,&quot;opt_out_of_ein&quot;:0,&quot;electronic&quot;:null,&quot;taxClub&quot;:&quot;yes&quot;,&quot;priority&quot;:&quot;true&quot;,&quot;overnight&quot;:&quot;&quot;,&quot;compPurpose&quot;:&quot;Empowering moms and offering quality products for babies and children&quot;,&quot;professional_service&quot;:0,&quot;compShares&quot;:null,&quot;compParValue&quot;:null,&quot;ss4FirstName&quot;:&quot;Edna &quot;,&quot;ss4LastName&quot;:&quot;Barreto &quot;,&quot;ss4ssn1&quot;:&quot;746&quot;,&quot;ss4ssn2&quot;:&quot;89&quot;,&quot;ss4ssn3&quot;:&quot;2980&quot;,&quot;ss4month&quot;:null,&quot;ss4day&quot;:null,&quot;ss4year&quot;:null,&quot;chargetotal&quot;:669,&quot;activity&quot;:null,&quot;llcClass&quot;:1,&quot;NPmembers&quot;:0,&quot;npPurpose&quot;:&quot;0&quot;,&quot;incorpMonth&quot;:0,&quot;incorpYear&quot;:0,&quot;memberChange&quot;:null,&quot;authval&quot;:1,&quot;bar_code&quot;:null,&quot;fein&quot;:null,&quot;sub_public_benefit_purpose&quot;:null,&quot;compAmendment&quot;:null,&quot;filing_entity&quot;:null,&quot;members_organizers&quot;:null,&quot;business_type&quot;:10},&quot;shareholders&quot;:null,&quot;officers&quot;:null,&quot;licenselogixaddress&quot;:null,&quot;filing_year&quot;:null,&quot;contact_address&quot;:{&quot;order_id&quot;:2663866,&quot;country_id&quot;:240,&quot;type&quot;:&quot;contact&quot;,&quot;country&quot;:{&quot;id&quot;:240,&quot;name&quot;:&quot;United States of America&quot;,&quot;native_name&quot;:&quot;United States&quot;,&quot;iso_code_2&quot;:&quot;US&quot;,&quot;iso_code_3&quot;:&quot;USA&quot;}},&quot;contact&quot;:{&quot;id&quot;:1357604,&quot;first_name&quot;:&quot;Edna&quot;,&quot;last_name&quot;:&quot;Barreto&quot;,&quot;email&quot;:&quot;contato@panthermamakids.com&quot;,&quot;phone_country&quot;:&quot;US&quot;,&quot;phone_number&quot;:&quot;6176820347&quot;,&quot;verified&quot;:0,&quot;access_shared_with&quot;:null,&quot;created_at&quot;:&quot;2025-07-03T18:50:57.000000Z&quot;,&quot;updated_at&quot;:&quot;2025-07-03T18:50:57.000000Z&quot;,&quot;deleted_at&quot;:null,&quot;is_blocked&quot;:0,&quot;formattedPhone&quot;:&quot;617-682-0347&quot;,&quot;formattedUSPhone&quot;:&quot;(617) 682-0347&quot;,&quot;formattedAddedDate&quot;:&quot;Jul. 03, 2025&quot;,&quot;phoneDialCode&quot;:&quot;1&quot;,&quot;international_phone_number&quot;:&quot;+16176820347&quot;}}');
    order = JSON.parse(order);

    let annualReportType = "20";

    let reasons = cleanString('[{&quot;field_name&quot;:&quot;companyName&quot;,&quot;reason&quot;:&quot;Please provide a new company name&quot;},{&quot;field_name&quot;:&quot;companyName&quot;,&quot;reason&quot;:&quot;Please provide the information required&quot;},{&quot;field_name&quot;:&quot;companyAddress&quot;,&quot;reason&quot;:&quot;Please provide a street address&quot;},{&quot;field_name&quot;:&quot;companyAddress&quot;,&quot;reason&quot;:&quot;Please provide an in state street address&quot;},{&quot;field_name&quot;:&quot;companyAddress&quot;,&quot;reason&quot;:&quot;PO Boxes are not accepted please provide a physical street address&quot;},{&quot;field_name&quot;:&quot;contactAddress&quot;,&quot;reason&quot;:&quot;Please provide a street address&quot;},{&quot;field_name&quot;:&quot;contactAddress&quot;,&quot;reason&quot;:&quot;Please provide an in state street address&quot;},{&quot;field_name&quot;:&quot;contactAddress&quot;,&quot;reason&quot;:&quot;PO Boxes are not accepted please provide a physical street address&quot;},{&quot;field_name&quot;:&quot;contactEmail&quot;,&quot;reason&quot;:&quot;Please provide the information required&quot;},{&quot;field_name&quot;:&quot;contactName&quot;,&quot;reason&quot;:&quot;Please provide the information required&quot;},{&quot;field_name&quot;:&quot;contactPhoneNumber&quot;,&quot;reason&quot;:&quot;Please provide the information required&quot;},{&quot;field_name&quot;:&quot;dateOfFormation&quot;,&quot;reason&quot;:&quot;Please provide the information required&quot;},{&quot;field_name&quot;:&quot;effectiveFilingYear&quot;,&quot;reason&quot;:&quot;Please provide the information required&quot;},{&quot;field_name&quot;:&quot;ein&quot;,&quot;reason&quot;:&quot;Please provide the information required&quot;},{&quot;field_name&quot;:&quot;einAddress&quot;,&quot;reason&quot;:&quot;Please provide a street address&quot;},{&quot;field_name&quot;:&quot;einAddress&quot;,&quot;reason&quot;:&quot;Please provide an in state street address&quot;},{&quot;field_name&quot;:&quot;einAddress&quot;,&quot;reason&quot;:&quot;PO Boxes are not accepted please provide a physical street address&quot;},{&quot;field_name&quot;:&quot;entityType&quot;,&quot;reason&quot;:&quot;Please provide the information required&quot;},{&quot;field_name&quot;:&quot;licenseLoginAddress&quot;,&quot;reason&quot;:&quot;Please provide a street address&quot;},{&quot;field_name&quot;:&quot;licenseLoginAddress&quot;,&quot;reason&quot;:&quot;Please provide an in state street address&quot;},{&quot;field_name&quot;:&quot;licenseLoginAddress&quot;,&quot;reason&quot;:&quot;PO Boxes are not accepted please provide a physical street address&quot;},{&quot;field_name&quot;:&quot;mailingAddress&quot;,&quot;reason&quot;:&quot;Please provide a street address&quot;},{&quot;field_name&quot;:&quot;mailingAddress&quot;,&quot;reason&quot;:&quot;Please provide an in state street address&quot;},{&quot;field_name&quot;:&quot;mailingAddress&quot;,&quot;reason&quot;:&quot;PO Boxes are not accepted please provide a physical street address&quot;},{&quot;field_name&quot;:&quot;memberAddress&quot;,&quot;reason&quot;:&quot;Please provide a street address&quot;},{&quot;field_name&quot;:&quot;memberAddress&quot;,&quot;reason&quot;:&quot;Please provide an in state street address&quot;},{&quot;field_name&quot;:&quot;memberAddress&quot;,&quot;reason&quot;:&quot;PO Boxes are not accepted please provide a physical street address&quot;},{&quot;field_name&quot;:&quot;directorAddress&quot;,&quot;reason&quot;:&quot;Please provide a street address&quot;},{&quot;field_name&quot;:&quot;directorAddress&quot;,&quot;reason&quot;:&quot;Please provide an in state street address&quot;},{&quot;field_name&quot;:&quot;directorAddress&quot;,&quot;reason&quot;:&quot;PO Boxes are not accepted please provide a physical street address&quot;},{&quot;field_name&quot;:&quot;memberName&quot;,&quot;reason&quot;:&quot;Please provide the information required&quot;},{&quot;field_name&quot;:&quot;directorName&quot;,&quot;reason&quot;:&quot;Please provide the information required&quot;},{&quot;field_name&quot;:&quot;officerAddress&quot;,&quot;reason&quot;:&quot;Please provide a street address&quot;},{&quot;field_name&quot;:&quot;officerAddress&quot;,&quot;reason&quot;:&quot;Please provide an in state street address&quot;},{&quot;field_name&quot;:&quot;officerAddress&quot;,&quot;reason&quot;:&quot;PO Boxes are not accepted please provide a physical street address&quot;},{&quot;field_name&quot;:&quot;officerName&quot;,&quot;reason&quot;:&quot;Please provide the information required&quot;},{&quot;field_name&quot;:&quot;shareHolderName&quot;,&quot;reason&quot;:&quot;Please provide the information required&quot;},{&quot;field_name&quot;:&quot;purpose&quot;,&quot;reason&quot;:&quot;Please provide the information required&quot;},{&quot;field_name&quot;:&quot;registeredAgent&quot;,&quot;reason&quot;:&quot;Please provide a street address&quot;},{&quot;field_name&quot;:&quot;registeredAgent&quot;,&quot;reason&quot;:&quot;Please provide a valid zip code that belongs to company state&quot;},{&quot;field_name&quot;:&quot;registeredAgent&quot;,&quot;reason&quot;:&quot;PO Boxes are not accepted please provide a physical street address&quot;},{&quot;field_name&quot;:&quot;registeredAgent&quot;,&quot;reason&quot;:&quot;Please provide the information required&quot;},{&quot;field_name&quot;:&quot;shareHolderAddress&quot;,&quot;reason&quot;:&quot;Please provide a street address&quot;},{&quot;field_name&quot;:&quot;shareHolderAddress&quot;,&quot;reason&quot;:&quot;Please provide an in state street address&quot;},{&quot;field_name&quot;:&quot;shareHolderAddress&quot;,&quot;reason&quot;:&quot;PO Boxes are not accepted please provide a physical street address&quot;},{&quot;field_name&quot;:&quot;shares&quot;,&quot;reason&quot;:&quot;Please provide the information required&quot;},{&quot;field_name&quot;:&quot;stateID&quot;,&quot;reason&quot;:&quot;Please provide the information required&quot;},{&quot;field_name&quot;:&quot;stateOfIncorporation&quot;,&quot;reason&quot;:&quot;Please provide the information required&quot;},{&quot;field_name&quot;:&quot;naicsCodes&quot;,&quot;reason&quot;:&quot;Please provide the information required&quot;}]');
    reasons = JSON.parse(reasons);

    let requireNaics = "false";
    requireNaics = JSON.parse(requireNaics);

    let board = {
        members_directors:[],
        officers: [],
        shareholders: []
    };

    let data = {
        order:order,
        questions: [
            /*{
                field: 'companyName',
                checked: false,
                name: 'company name',
                col: 0
             },*/
            /*{
                field: 'entityType',
                checked: false,
                name: 'entity type',
                col: 0
            },*/
            {
                field: 'companyAddress',
                checked: false,
                name: 'company address',
                col: 1
            },
            {
                field: 'contactName',
                checked: false,
                name: 'contact name',
                col: 0
            },
            {
                field: 'contactAddress',
                checked: false,
                name: 'contact address',
                col: 0
            },
            {
                field: 'contactEmail',
                checked: false,
                name: 'contact email',
                col: 0
            },
            {
                field: 'contactPhoneNumber',
                checked: false,
                name: 'contact phone number',
                col: 0
            },
            /*{
                field: 'dateOfFormation',
                 checked: false,
                 name: 'date of formation',
                 col: 0
            },*/
            /*{
                field: 'effectiveFilingYear',
                checked: false,
                name: 'effective filing year',
                col: 0
            },*/
            {
                field: 'registeredAgent',
                checked: false,
                name: 'registered agent info',
                col: 0
            },
            {
                field: 'ein',
                checked: false,
                name: 'ein',
                col: 0
            },
            {
                field: 'einAddress',
                checked: false,
                name: 'ein address',
                col: 0
            },
            {
                field: 'licenseLoginAddress',
                checked: false,
                name: 'license logix address',
                col: 1
            },
            {
                field: 'mailingAddress',
                checked: false,
                name: 'mailing address',
                col: 0
            },
            {
                field: 'stateID',
                checked: false,
                name: 'state id',
                col: 1
            },
            {
                field: 'purpose',
                checked: false,
                name: 'company purpose',
                col: 1
            },
            {
                field: 'naicsCodes',
                checked: false,
                name: 'Naics Codes',
                col: 1
            },
            /*{
                field: 'stateOfIncorporation',
                checked: false,
                name: 'state of incorporation',
                col: 1
            }*/
            /*{
                field: 'shares',
                checked: false,
                name: 'shares',
                col: 1
            },*/
            {
                field: 'memberName',
                checked: false,
                name: 'member name',
                attached: 0,
                col: 1
            },
            {
                field: 'memberAddress',
                checked: false,
                name: 'member address',
                attached: 0,
                col: 1
            },
            {
                field: 'directorName',
                checked: false,
                name: 'director name',
                attached: 0,
                col: 1
            },
            {
                field: 'directorAddress',
                checked: false,
                name: 'director address',
                attached: 0,
                col: 1
            },
            {
                field: 'officerName',
                checked: false,
                name: 'officer name',
                attached: 0,
                col: 1
            },
            {
                field: 'officerAddress',
                checked: false,
                name: 'officer address',
                attached: 0,
                col: 1
            },
            {
                field: 'shareHolderName',
                checked: false,
                name: 'shareholder name',
                attached: 0,
                col: 1
            },
            {
                field: 'shareHolderAddress',
                checked: false,
                name: 'shareholder address',
                attached: 0,
                col: 1
            },
        ],
        reasons: reasons
    }

    // Loading members.
    loadMembers();

    // Questions Tool Launcher on click action of Add Question button.
    $("#btnAddQuestions").click(function(e){
        bindQuestions();
        bindListeners();
        toggleModal(e);
    });

    // This function will bind the data.questions to the questions modal.
    let bindQuestions = () => {
        let leftContainer = $("#questionsLeftContainer");
        let rightContainer = $("#questionsRightContainer");
        let entityType = data.order['entityType'];

        leftContainer.empty();
        rightContainer.empty();

        data.questions.forEach((element) => {
            let hide = '';
            let disabled = '';
            let disabledAlert =''

            if (data.order.isMisc === true && data.order.orderType != annualReportType &&
                (element.field === 'memberName' || element.field === 'memberAddress' ||
                    element.field === 'directorName' || element.field === 'directorAddress' ||
                    element.field === 'officerName' || element.field === 'officerAddress' ||
                    element.field === 'shareHolderName' || element.field === 'shareHolderAddress' ||
                    element.field === 'shares')
                ) {
                    // Hide Members / Directors / Officers / Shareholders / Shares questions for misc orders.
                    hide = 'style="display:none;"';

            } else {
                if ((entityType === 'Nonprofit' || entityType === 'SCorporation' || entityType === 'CCorporation' || entityType === 'Corporation') &&
                    (element.field === 'memberName' || element.field === 'memberAddress')
                ) {
                    // Hide Members question for not LLC companies.
                    hide = 'style="display:none;"';
                } else if (entityType === 'LLC' &&
                    (element.field === 'directorName' || element.field === 'directorAddress' ||
                        element.field === 'officerName' || element.field === 'officerAddress' ||
                        element.field === 'shareHolderName' || element.field === 'shareHolderAddress' ||
                        element.field === 'shares')
                ) {
                    // Hide Directors / Officers / Shareholders / Shares question for LLC companies.
                    hide = 'style="display:none;"';
                }

                if ((element.field === 'memberName' || element.field === 'memberAddress' ||
                    element.field === 'directorName' || element.field === 'directorAddress') &&
                    board.members_directors.length === 0
                ) {
                    // Disable Members / Directors questions for orders without that info.
                    disabled = 'disabled="disabled" readonly="readonly"';
                    disabledAlert = '<p style="font-size:10px;">No registered members/directors</p>';
                } else if ((element.field === 'officerName' || element.field === 'officerAddress') &&
                    board.officers.length === 0
                ) {
                    // Disable Officer question for orders without that info.
                    disabled = 'disabled="disabled" readonly="readonly"';
                    disabledAlert = '<p style="font-size:10px;">No registered officers</p>'
                } else if ((element.field === 'shareHolderName' || element.field === 'shareHolderAddress') &&
                    board.shareholders.length === 0
                ) {
                    // Disable Shareholder question for orders without that info.
                    disabled = 'disabled="disabled" readonly="readonly"';
                    disabledAlert = '<p style="font-size:10px;">No registered shareholders</p>'
                }
            }

            if (element.field === 'registeredAgent' && order.agent !== null) {
                // Hide Registered Agent Info question for orders with service active
                hide = 'style="display:none;"';
            } else if (element.field === 'naicsCodes' && !requireNaics) {
                // Hide Naics Codes question for orders when naics codes are not required for AR
                hide = 'style="display:none;"';
            }

            let checked = element.checked ? 'checked="checked"': '';
            let html = '<div class="form-group" ' + hide + '>' +
                '<input type="checkbox" class="question" data-question-field="' + element.field + '" ' + checked + ' ' + disabled + '>' +
                '<label>&nbsp;' + element.name.toString().toUpperCase() + '</label>' + disabledAlert + '' + '</div>';

            if (element.col === 0) {
                leftContainer.append(html);
            } else {
                rightContainer.append(html);
            }
        });
    };

    // Creates the button and checkbox listeners.
    let bindListeners = () => {
        $(".question").off().change(function(event) {
            let el = $(this);
            let question = findQuestionByFieldName(el.attr('data-question-field').toString());

            if (el.is(':checked')) {
                triggerEvent(question,'activate');
            } else {
                triggerEvent(question,'deactivate');
            }
        });

        $("#btnSaveQuestions").off().click(function(event) {
            buildUI();
            toggleModal(event);

            // Helper events triggered after question insertion
            $(".slcQuestionReason").off().change(function() {
                let reason = $(this);
                if (reason.val() === "other") {
                    $(this).parent().append('<div class="form-group" style="padding-top: 5px;"><input type="text" class="form-control txtReasonOther" placeholder="Explain the reason"/></div>');
                } else {
                    $(this).parent().find('.txtReasonOther').remove();
                }
            });

            $(".btnDelete").off().click(function () {
                let field = $(this).parent().parent().attr('data-field');
                triggerEvent(findQuestionByFieldName(field), "deactivate");
                $('#'+$(this).parent().parent().attr('data-value-selector')).remove();
                $(this).parent().parent().remove();

                if ($(".questionRow").length === 0) {
                    $(".questionsInfo").hide();
                }
            });
        });
    };

    // Listen for question activate/deactivate.
    let triggerEvent = (question, event) => {
        switch(event){
            case 'activate':
                if (typeof question.attached !== 'undefined') {
                    if (question.attached < 6) {
                        question.attached++;
                    } else {
                        question.checked = true;
                    }
                } else {
                    question.checked = true;
                }
                break;

            case 'deactivate':
                if (typeof question.attached !== 'undefined') {
                    if (question.attached > 0) {
                        question.attached--;
                    } else {
                        question.checked = false;
                    }
                } else {
                    question.checked = false;
                }
                break;
        }
    };

    // Build modal with questions.
    let buildUI = () => {
        let container = $(".tblQuestionsBody");
        container.empty();

        data.questions.forEach((element) => {
           if (element.checked && typeof element.attached === 'undefined') {
                normalQuestionAttach(element, container)
           } else if (element.attached && element.attached < 6) {

               switch (element.field) {
                   case 'directorAddress':
                   case 'memberAddress':
                       memberAddressQuestionAttach(element, container)
                       break;
                   case 'directorName':
                   case 'memberName':
                       memberNameQuestionAttach(element, container);
                       break;
                   case 'officerName':
                       officerNameQuestionAttach(element, container);
                       break;
                   case 'officerAddress':
                       officerAddressQuestionAttach(element, container);
                       break;
                   case 'shareHolderName':
                       shareHolderNameQuestionAttach(element, container);
                       break;
                   case 'shareHolderAddress':
                       shareHolderAddressQuestionAttach(element, container);
                       break;
               }
           }
        });

        $(".questionsInfo").show();
    }

    // Find question by field name.
    function findQuestionByFieldName(fieldName) {
        let i = null;
        data.questions.forEach(function(element) {
            let comparison = element.field.toString() === fieldName;
            if (comparison) {
                i = element;
            }
        });

        return i;
    }

    // Find question reasons.
    function findQuestionReasons(questionFieldName) {
        let options = '<option value=""> Please select a reason </option>';
        data.reasons.forEach(function (element) {
            let comparison = element.field_name.toString() === questionFieldName.toString();
            if (comparison) {
                options += '<option value="' + element.reason + '">' + element.reason + '</option>';
            }
        });
        options += '<option value="other"> Other </option>';

        return options;
    }

    // To get the current value of the possible questions.
    function findQuestionFieldCurrentValue(fieldName) {
        let value = '';

        switch (fieldName) {
            case 'companyName':
                value = data.order['compName1'];
                break;

            case 'entityType':
                value = data.order['entityType'];
                break;

            case 'companyAddress':
                if (data.order['compStreet1'] == null) {
                    value = 'Company Address not registered'
                } else {
                    value += data.order['compStreet1'] + ' ' +
                        data.order['compStreet2'] + ' ' +
                        data.order['compCity'] + ' ' +
                        data.order['compState'] + ' ' +
                        data.order['compZip'] + ' ' +
                        data.order['compCounty'];
                }
                break;

            case 'contactName':
                value += data.order['contactFirstName'] + ' ' + data.order['contactLastName'];
                break;

            case 'contactAddress':
                if (data.order['contactStreet1'] == null) {
                    value = 'Contact Address not registered'
                } else {
                    console.log(data.order);
                    value += data.order['contactStreet1'] + ' ' +
                        data.order['contactStreet2'] + ' ' +
                        data.order['contactCity'] + ' ' +
                        data.order['contactState'] + ' ' +
                        data.order['contactZip'] + ' ' +
                        data.order['contactCountry'];
                }
                break;

            case 'contactEmail':
                value = data.order['contactEmail'];
                break;

            case 'contactPhoneNumber':
                value += data.order['contactPhone1'] + ' ' + data.order['contactPhone2'] + ' ' + data.order['contactPhone3'];
                break;

            case 'dateOfFormation':
                value = data.order['secondary']['compFilingDate'] === 0 ? 'N/A' : new Date(data.order['secondary']['compFilingDate'] * 1000).toDateString();
                break;

            case 'effectiveFilingYear':
                value = data.order['filing_year'] ? data.order['filing_year']['year'] : 'N/A';
                break;

            case 'registeredAgent':
                if (!(data.order.agent == null) && (data.order['agentFirstName'] == null || data.order['agentComp'] == null)) {
                    value = data.order['agent']['agentName'];
                } else {
                    if (data.order['agentFirstName']) {
                        value = data.order['agentFirstName'] + ' ' + data.order['agentLastName'] + ' - ';
                    } else {
                        value = data.order['agentComp'] + ' - ';
                    }

                    value += data.order['agentStreet1'] + ' ' +
                        data.order['agentStreet2'] + ' ' +
                        data.order['agentCity'] + ' ' +
                        data.order['agentState'] + ' ' +
                        data.order['agentZip'];

                    if (data.order['agentCounty']) {
                        value += ' ' + data.order['agentCounty']
                    }
                }
                break;

            case 'ein':
                value = data.order['secondary']['fein'];
                break;

            case 'einAddress':
                if (data.order['ss4Street1'] == null) {
                    value = 'Address not registered'
                } else {
                    value += data.order['ss4Street1'] + ' ' +
                        data.order['ss4Street2'] + ' ' +
                        data.order['ss4City'] + ' ' +
                        data.order['ss4State'] + ' ' +
                        data.order['ss4Zip'] + ' ' +
                        data.order['ss4County'] + ' ' +
                        data.order['ss4Country'];
                }
                break;

            case 'licenseLoginAddress':
                if (data.order['licenselogixaddress']) {
                    value += data.order['licenselogixaddress']['street1'] + ' ' +
                        data.order['licenselogixaddress']['street2'] + ' ' +
                        data.order['licenselogixaddress']['city'] + ' ' +
                        data.order['licenselogixaddress']['state'] + ' ' +
                        data.order['licenselogixaddress']['zip'];
                } else {
                    value = 'Address not registered';
                }
                break;

            case 'mailingAddress':
                value = '';
                break;

            case 'purpose':
                value = data.order['secondary']['compPurpose'];
                break;

            case 'shares':
                value = data.order['secondary']['compShares'];
                break;

            case 'stateOfIncorporation':
                value = data.order['entityState'];
                break;

            case 'naicsCodes':
                value = '';
                break;

            //TODO: add members to the search criteria
        }

        return value;
    }

    // To get the current Members / Directors info.
    function getDirectorsAkaMembers() {
        let directors = [];

        if (data.order.isMisc && data.order.orderType != annualReportType) {
            return directors;
        }

        memberPrefixes.forEach(prefix => {
            if (data.order['membersInfo'][prefix + 'FirstName'] && data.order['membersInfo'][prefix + 'FirstName'] !== '') {
                directors.push({
                    type: prefix,
                    firstName: data.order['membersInfo'][prefix + 'FirstName'],
                    lastName: data.order['membersInfo'][prefix + 'LastName'],
                    street1: data.order['membersInfo'][prefix + 'Street1'] != null ? data.order['membersInfo'][prefix + 'Street1'] : '',
                    street2: data.order['membersInfo'][prefix + 'Street2'] != null ? data.order['membersInfo'][prefix + 'Street2'] : '',
                    city: data.order['membersInfo'][prefix + 'City'] != null ? data.order['membersInfo'][prefix + 'City'] : '',
                    state: data.order['membersInfo'][prefix + 'State'] != null ? data.order['membersInfo'][prefix + 'State'] : '',
                    zip: data.order['membersInfo'][prefix + 'Zip'] != null ? data.order['membersInfo'][prefix + 'Zip'] : '',
                    ownership: data.order['membersInfo'][prefix + 'Ownership'] != null ? data.order['membersInfo'][prefix + 'Ownership'] : ''
                });
            }
        });

        return directors;
    }

    // To get the current Shareholders info.
    function getShareholders() {
        let shareholders = [];

        if (data.order.isMisc && data.order.orderType != annualReportType) {
            return shareholders;
        }

        if (data.order['shareholdersInfo']) {
            shareHolderPrefixes.forEach(prefix => {
                if (data.order['shareholdersInfo'][prefix + 'FirstName'] && data.order['shareholdersInfo'][prefix + 'FirstName'] !== '') {
                    shareholders.push({
                        type: prefix,
                        firstName: data.order['shareholdersInfo'][prefix + 'FirstName'],
                        lastName: data.order['shareholdersInfo'][prefix + 'LastName'],
                        street1: data.order['shareholdersInfo'][prefix + 'Street1'] != null ? data.order['shareholdersInfo'][prefix + 'Street1']: '',
                        street2: data.order['shareholdersInfo'][prefix + 'Street2'] != null ? data.order['shareholdersInfo'][prefix + 'Street2']: '',
                        city: data.order['shareholdersInfo'][prefix + 'City'] != null ? data.order['shareholdersInfo'][prefix + 'City']: '',
                        state: data.order['shareholdersInfo'][prefix + 'State'] != null ? data.order['shareholdersInfo'][prefix + 'State']: '',
                        zip: data.order['shareholdersInfo'][prefix + 'Zip'] != null ? data.order['shareholdersInfo'][prefix + 'Zip']: '',
                        shares: data.order['shareholdersInfo'][prefix + 'Shares'] != null ? data.order['shareholdersInfo'][prefix + 'Shares']: ''
                    });
                }
            });
        }

        return shareholders
    }

    // To get the current Officers info.
    function getOfficers() {
        let officers = [];

        if (data.order.isMisc && data.order.orderType != annualReportType) {
            return officers;
        }

        if (data.order['officersInfo']) {
            officerPrefixes.forEach(prefix => {
                if (data.order['officersInfo'][prefix + '_fname'] && data.order['officersInfo'][prefix + '_fname'] !== '' && data.order['officersInfo'][prefix + '_fname'] !== null) {
                    officers.push({
                        type: prefix,
                        firstName: data.order['officersInfo'][prefix + '_fname'],
                        lastName: data.order['officersInfo'][prefix + '_lname'],
                        street1: ($.trim(data.order['officersInfo'][prefix + 'Street1']).length ) ? data.order['officersInfo'][prefix + 'Street1'] : '',
                        street2: ($.trim(data.order['officersInfo'][prefix + 'Street2']).length ) ? data.order['officersInfo'][prefix + 'Street2'] : '',
                        city: ($.trim(data.order['officersInfo'][prefix + 'City']).length ) ? data.order['officersInfo'][prefix + 'City'] : '',
                        state: ($.trim(data.order['officersInfo'][prefix + 'State']).length ) ? data.order['officersInfo'][prefix + 'State'] : '',
                        zip: ($.trim(data.order['officersInfo'][prefix + 'Zip']).length ) ? data.order['officersInfo'][prefix + 'Zip'] : ''
                    });
                }
            });
        }

        return officers;
    }

    // To load the Members, Shareholders and/or Directors.
    function loadMembers() {
        board.members_directors = getDirectorsAkaMembers();
        board.shareholders = getShareholders();
        board.officers = getOfficers();
    }

    // Build HTML for normal question.
    function normalQuestionAttach(element,container) {
        let unique = parseInt(Math.random() * 3994027 + '');
        let value = findQuestionFieldCurrentValue(element.field) == null ? '' : findQuestionFieldCurrentValue(element.field);
        let html = '<tr ' +
            'class="questionRow" ' +
            'data-value-selector="' + unique + '" ' +
            'data-field-readable="' + element.name.toString().toUpperCase() + '" ' +
            'data-member="false" ' +
            'data-field="' + element.field + '" ' +
            'data-value="' + value + '">' +
            '<td><p style="font-weight: bold;">' + element.name.toString().toUpperCase() + '</p></td>' +
            '<td><select class="form-control slcQuestionReason" id="select-' + element.field + '-' + unique + '">' + findQuestionReasons(element.field) + '</select></td>' +
            '<td><button class="btnDelete"><i class="fa fa-trash"></i></button></td>' +
            '</tr>' + '<tr>' +
            '<td colspan="3" id="' + unique + '" style="border-top:none;">' + value + '</td>' +
            '</tr>';
        container.append(html);
    }

    // Build HTML for Member Name question.
    function memberNameQuestionAttach(element,container) {
        var selectOptions = '';

        board.members_directors.forEach(element => {
            selectOptions += '<option value="' + element.type + '-' + element.firstName + '">' +
                element.firstName + ' ' + element.lastName + '</option>'
        });

        if (selectOptions == '') {
            selectOptions = '<option value="0">No Members/Directors in the order</option>'
        }

        var i = 0;
        while(i < element.attached) {
            let unique = parseInt(Math.random() * 3994027 + '');
            var html = '<tr class="questionRow" data-field-readable="' + element.name.toString().toUpperCase() +
                '" data-member="true" data-field="' + element.field + '" data-value="" data-value-selector="' + unique + '">' +
                '<td>' +
                '<p style="font-weight: bold;">' + element.name.toString().toUpperCase() + '</p>' +
                '</td>' +
                '<td><select class="form-control slcQuestionReason" name="">' + findQuestionReasons(element.field) + '</select></td>' +
                '<td><button class="btnDelete"><i class="fa fa-trash"></i></button></td>' +
                '</tr>' +
                '<tr>' +
                '<td colspan="3" style="border-top:none;"><select id="' + unique + '" class="directors form-control">' + selectOptions + '</select></td>'+
                '</tr>';
            container.append(html);
            i++;
        }
    }

    // Build HTML for Member Address question.
    function memberAddressQuestionAttach(element,container) {
        let selectOptions = '';

        board.members_directors.forEach(element => {
            selectOptions += '<option value="' + element.type + '-' + element.firstName + '">' +
                element.firstName + ' ' + element.lastName + ' (' + element.street1 + ' ' + element.street2 + ' ' +
                element.city + ' ' + element.state + ' ' + element.zip + ')</option>'
        });

        if (selectOptions == '') {
            selectOptions = '<option value="0">No Members/Directors in the order</option>'
        }

        var i = 0;
        while (i < element.attached) {
            let unique = parseInt(Math.random() * 3994027 + '');
            var html = '<tr class="questionRow" data-field-readable="' + element.name.toString().toUpperCase() +
                '" data-member="true" data-field="' + element.field + '" data-value="" data-value-selector="' + unique + '">' +
                '<td>' +
                '<p style="font-weight: bold;">' + element.name.toString().toUpperCase() + '</p>' +
                '</td>' +
                '<td><select class="form-control slcQuestionReason" name="">' + findQuestionReasons(element.field) + '</select></td>' +
                '<td><button class="btnDelete""><i class="fa fa-trash"></i></button></td>' +
                '</tr>' +
                '<tr>' +
                '<td colspan="3" style="border-top:none;"><select id="' + unique + '" class="directors form-control">' + selectOptions + '</select></td>'+
                '</tr>';
            container.append(html);
            i++;
        }
    }

    // Build HTML for Shareholder Name question.
    function shareHolderNameQuestionAttach(element,container) {
        var selectOptions = '';

        board.shareholders.forEach(element => {
            selectOptions += '<option value="' + element.type + '-' + element.firstName+'">' +
                element.firstName + ' ' + element.lastName + '</option>'
        });

        if (selectOptions == '') {
            selectOptions = '<option value="0">No Shareholders in the order</option>'
        }

        var i = 0;
        while (i < element.attached) {
            let unique = parseInt(Math.random()*3994027+"");
            var html = '<tr class="questionRow" data-field-readable="' + element.name.toString().toUpperCase() +
                '" data-member="true" data-field="' + element.field + '" data-value="" data-value-selector="' + unique + '">' +
                '<td>' +
                '<p style="font-weight: bold;">' + element.name.toString().toUpperCase() + '</p>' +
                '</td>' +
                '<td><select class="form-control slcQuestionReason" name="">' + findQuestionReasons(element.field) + '</select></td>' +
                '<td><button class="btnDelete"><i class="fa fa-trash"></i></button></td>' +
                '</tr>' +
                '<tr>' +
                '<td colspan="3" style="border-top:none;"><select id="' + unique + '" class="directors form-control">' + selectOptions + '</select></td>'+
                '</tr>';
            container.append(html);
            i++;
        }
    }

    // Build HTML for Shareholder Address question.
    function shareHolderAddressQuestionAttach(element,container) {
        var selectOptions = '';

        board.shareholders.forEach(element => {
            selectOptions += '<option value="' + element.type + '-' + element.firstName + '">' +
                element.firstName + ' ' + element.lastName + ' (' + element.street1 + ' ' + element.street2 + ' ' +
                element.city + ' ' + element.state + ' ' + element.zip + ')</option>'
        });

        if (selectOptions == '') {
            selectOptions = '<option value="0">No Shareholders in the order</option>'
        }

        var i = 0;
        while (i < element.attached) {
            let unique = parseInt(Math.random() * 3994027 + '');
            var html = '<tr class="questionRow" data-field-readable="' + element.name.toString().toUpperCase() +
                '" data-member="true" data-field="' + element.field + '" data-value="" data-value-selector="' + unique + '">' +
                '<td>' +
                '<p style="font-weight: bold;">' + element.name.toString().toUpperCase() + '</p>' +
                '</td>' +
                '<td><select class="form-control slcQuestionReason" name="">' + findQuestionReasons(element.field) + '</select></td>' +
                '<td><button class="btnDelete""><i class="fa fa-trash"></i></button></td>' +
                '</tr>' +
                '<tr>' +
                '<td colspan="3" style="border-top:none;"><select id="' + unique + '" class="directors form-control">' + selectOptions + '</select></td>' +
                '</tr>';
            container.append(html);
            i++;
        }
    }

    // Build HTML for Officer Name question.
    function officerNameQuestionAttach(element,container) {
        var selectOptions = '';

        board.officers.forEach(element => {
            selectOptions += '<option value="' + element.type + '-' + element.firstName + '">' +
                element.type.toString().toUpperCase().replace('_', '') + ': ' + element.firstName + ' ' + element.lastName + '</option>'
        });

        if (selectOptions == '') {
            selectOptions = '<option value="0">No officers in the order</option>'
        }

        var i = 0;
        while (i < element.attached) {
            var unique = parseInt(Math.random() * 2040 + '');
            var html = '<tr class="questionRow" data-field-readable="' + element.name.toString().toUpperCase() +
                '" data-member="true" data-field="' + element.field + '" data-value="" data-value-selector="' + unique + '">' +
                '<td>' +
                '<p style="font-weight: bold;">' + element.name.toString().toUpperCase() + '</p>' +
                '</td>' +
                '<td><select class="form-control slcQuestionReason" name="">' + findQuestionReasons(element.field) + '</select></td>' +
                '<td><button class="btnDelete"><i class="fa fa-trash"></i></button></td>' +
                '</tr>' +
                '<tr>' +
                '<td colspan="3" style="border-top:none;"><select id="' + unique + '" class="directors form-control">' + selectOptions + '</select></td>'+
                '</tr>';
            container.append(html);
            i++;
        }
    }

    // Build HTML for Officer Address question.
    function officerAddressQuestionAttach(element,container){
        var selectOptions = '';

        board.officers.forEach(element => {
            selectOptions += '<option value="' + element.type + '-' + element.firstName + '">' +
                element.type.toString().toUpperCase().replace('_', '') + ': ' + element.firstName + ' ' + element.lastName +
                ' ('+element.street1 + ' ' + element.street2 + ' ' + element.city + ' ' + element.state + ' ' + element.zip + ')</option>'
        });

        if (selectOptions == '') {
            selectOptions = '<option value="0">No officers in the order</option>'
        }

        var i = 0;
        while (i < element.attached) {
            let unique = parseInt(Math.random() * 3994027 + '');
            var html = '<tr class="questionRow" data-field-readable="' + element.name.toString().toUpperCase() +
                '" data-member="true" data-field="' + element.field + '" data-value="" data-value-selector="' + unique + '">' +
                '<td>' +
                '<p style="font-weight: bold;">' + element.name.toString().toUpperCase() + '</p>' +
                '</td>' +
                '<td><select class="form-control slcQuestionReason" name="">' + findQuestionReasons(element.field) + '</select></td>' +
                '<td><button class="btnDelete""><i class="fa fa-trash"></i></button></td>' +
                '</tr>' +
                '<tr>' +
                '<td colspan="3" style="border-top:none;"><select id="' + unique + '" class="directors form-control">' + selectOptions + '</select></td>' +
                '</tr>';
            container.append(html);
            i++;
        }
    }
});
</script>





            <script src="./DB_SEARCH_RESULTS_EXAMPLE_files/creditcardjs-v0.10.13.min.js"></script>
    
    <script src="./DB_SEARCH_RESULTS_EXAMPLE_files/bootstrap-datepicker.js"></script>

    <script type="text/javascript">
        var $ = jQuery
        $(document).ready(function(){
            $('#ss4ssn').attr("placeholder", "SS4 Number");

            $('#identification_number_type').change(function () {
                $('#ss4ssn').val('');
                if ($(this).val() === "1") {
                    $('#identificationNumberLabel').text('SSN');
                    $('#ss4ssn').attr("placeholder", "SS4 Number");
                } else {
                    $('#identificationNumberLabel').text('ITIN');
                    $('#ss4ssn').attr("placeholder", "ITIN Number");
                }
            });
        });
    </script>

    <!-- Scripts for left-col.blade -->
    <script>
        $(document).ready(function () {
            $(".downgradeOrder").click(function () {
                var accountType = $(".accountType").val();
                $("#downGrade .close").trigger("click");
                $.ajax({
                    type: "POST",
                    url: 'https://db.incfile.com/downgradeOrder',
                    data: "ordernum=225070363866&accountType=" + accountType,
                    success: function (data) {
                        if (data == 1) {
                            sweetAlert("Order downgraded", "Successfully!", "success");
                            location.reload();
                        }
                    },
                    error: function (data) {
                        console.log("Error: " + data);
                        sweetAlert("Oops...", "Something went wrong!", "error");
                    }
                });
            });

            $(".downgradeOrderEdit").click(function () {
                var accountType = $(".accountType").val();
                $.ajax({
                    type: "POST",
                    url: 'https://db.incfile.com/downgradeOrder',
                    data: "ordernum=225070363866&accountType=" + accountType,
                    success: function (data) {
                        if (data == 1) {
                            $("#ordType").text(accountType);
                            if (accountType == "Silver") {
                                $("#editDowngrade").hide();
                            }
                        }
                    },
                    error: function (data) {
                        console.log("Error: " + data);
                        sweetAlert("Oops...", "Something went wrong!", "error");
                    }
                });
            });

            $('#ipSearching').click(function () {
                let ip = $(this).data('ip');
                $('#search_field').val(ip);
                ajaxSearch();
            });

            $('.vcontact').click(function () {
                $('.alert-info:not(#update-client-message)').hide();
            });

            $('.tab:not(.vcontact)').click(function () {
                $('.alert-info:not(#update-client-message)').show();
            });
        })
    </script>

    
    <script>
        /**
         * Send all orders to processing tab
         */
        function moveToProcessing(ordernum)
        {
            $.ajax({
                url: '/api/webauto/manual-processing/',
                method: 'POST',
                data: {
                    ordernum: ordernum,
                    machineName: 'Manual - moises d'
                },
                success: function (data) {
                    console.log("sending to manual handler");
                }
            });
        }

        function _launchEINAppFromBrowser(retry = false) {
            var IRSOperationHoursCheck = 1;
            if ( IRSOperationHoursCheck == 1) {
                moveToProcessing("225070363866");

                var xhr = new XMLHttpRequest();
                xhr.onreadystatechange = function () {
                    var DONE = xhr.DONE || 4;
                    if (xhr.readyState === DONE) {
                        var jsonResponse = {};
                        try {
                            if (xhr.responseText) {
                                jsonResponse = JSON.parse(xhr.responseText);
                            }
                        } catch (e) {
                            jsonResponse = {error: "failed parse", response: xhr.responseText};
                        }
                        if (xhr.status != 200) {
                            swal("Error", "Failed to Launch App. Make sure it is running.", "error");
                        }
                    }
                };

                xhr.open("POST", 'http://127.0.0.1:8182/api/launchApp', true);
                xhr.setRequestHeader('Content-Type', 'application/json');
                var body = {
                    "instructionsURL": "https://atomic.incfile.com/api/webauto/instructions/ein.json",
                    "ein": true,
                    "args": {
                        "ordernum": "225070363866",
                        "dataURL": "https://atomic.incfile.com/api/webauto/order" + ((retry == true) ? "/1" : ""),
                        "pdfUploadURL": "https://atomic.incfile.com/api/webauto/upload-dashboard"
                    }
                };
                xhr.send(JSON.stringify(body));
            } else {
                swal({
                        title: "Disabled",
                        text: "EIN process disabled post IRS Operation Hours.\nTry again during 7 AM to 10 PM EST Monday through Friday",
                        type: "warning",
                        showCancelButton: true,
                        closeOnConfirm: false,
                        confirmButtonText: "Help",
                    },
                    function(){
                        swal(
                            "Refresh",
                            "Kindly refresh your page if it has been loaded for a while\nA buffer period of 1 hour has been added before closing hours so that processes wont go past the IRS Operation Hours.",
                            "info"
                        );
                    }
                );
            }
        }

        /**
        * Run EIN process w/o without white spaces
        */
        function _retryEINWithoutWhiteSpaces() {
            swal({
                title: "GET EIN W/O White Spaces",
                text: "Are you sure you want retry GET EIN without white spaces?",
                type: "warning",
                showCancelButton: true,
                closeOnConfirm: false
            }, function () {
            swal("Launched!", "EIN process W/O White Spaces launched", "success");
            _launchEINAppFromBrowser(true);
            });
        }

         /**
         * Function to initiate SS4 Form Signature Application
         */
        function paperEIN(e){
            var ordernum = "225070363866";
            var transnum = "2663866";

            e.preventDefault();

            swal({
                title: "SS4 Form Signature Application",
                text: "Are you sure you want to initiate the SS4 Form Signature Application Request?",
                type: "warning",
                showCancelButton: true,
                closeOnConfirm: false,
                showLoaderOnConfirm: true,
            }, function () {
                $("#paper-" + ordernum).attr("disabled", true);
                $('.sweet-alert').find('button.confirm').attr("disabled", true);

                var url = 'https://db.incfile.com/incfile/finishing-queue/initiate-paper-ein';

                //Create form data
                var requestData = {'order_id': transnum};

                $.ajax({
                    type: "POST",
                    dataType: "json",
                    data: {
                        'requestData': requestData,
                        'ordernum': ordernum
                    },
                    url: url,
                    success: function (res) {
                        if (res.status) {
                            swal({
                                title: 'Initiated!',
                                text: 'SS4 form signature application request and order finishing initiated',
                                type: 'success',
                                confirmButtonText: "OK",
                                closeOnConfirm: true
                            }, function () {
                                window.location.reload();
                            });
                            $('.sweet-alert').find('button.confirm').removeAttr("disabled");
                        } else {
                            //
                            swal("Error", "Something went wrong!", "error");
                            $('.sweet-alert').find('button.confirm').removeAttr("disabled");
                        }
                    },
                    error: function () {
                        //
                        swal("Error", "Something went wrong!", "error");
                        $('.sweet-alert').find('button.confirm').removeAttr("disabled");
                    }
                });
            });
        }

    </script>

                                                    <script src="./DB_SEARCH_RESULTS_EXAMPLE_files/cancel-and-reverse.js"></script>
                                                        <script src="./DB_SEARCH_RESULTS_EXAMPLE_files/intlTelInput.js"></script>
       <script src="./DB_SEARCH_RESULTS_EXAMPLE_files/phoneInput.js"></script>
       <script>
         document.addEventListener('DOMContentLoaded', function () {
           window.userPhoneInput = window.phoneInput({
             phoneInputId: '#client_mobile',
             countryInputId: '#phone_country',
             dialCodeInputId: '#contact_phone_dial_code',
             errorMsgId: '#mobile_err'
           });
         });
       </script>
    


<div id="copilot-sidebar" style="--sb-bg: #212121; --sb-box-bg: #2e2e2e; --sb-font-size: 13px; --sb-font-family: &#39;Inter&#39;, sans-serif;">
                        <div class="copilot-header">
                            <span id="qa-toggle" class="quick-actions-toggle"></span>
                            <div class="copilot-title">
                                <img src="chrome-extension://nhcjkhieilpiginjgjekngiohfjgaicl/fennec_icon.png" class="copilot-icon" alt="FENNEC (BETA)">
                                <span>FENNEC (BETA)</span>
                            </div>
                            <button id="copilot-clear-tabs"></button>
                            <button id="copilot-close"></button>
                        </div>
                        <div class="order-summary-header"><span id="family-tree-icon" class="family-tree-icon" style="display:none"></span> ORDER SUMMARY <span id="qs-toggle" class="quick-summary-toggle"></span></div>
                        <div class="copilot-body" id="copilot-body-content"><div class="section-label">COMPANY:</div><div class="white-box company-box" data-state="Massachusetts" style="margin-bottom:10px" data-info-html="&lt;div class=&quot;company-summary-highlight&quot;&gt;&lt;div&gt;&lt;b&gt;&lt;a href=&quot;#&quot; class=&quot;copilot-sos&quot; data-url=&quot;https://corp.sec.state.ma.us/corpweb/CorpSearch/CorpSearch.aspx&quot; data-query=&quot;PANTHER MAMA &amp;amp; KIDS LLC&quot; data-type=&quot;name&quot;&gt;PANTHER MAMA &amp;amp; KIDS LLC&lt;/a&gt; &lt;span class=&quot;copilot-copy-icon&quot; data-copy=&quot;PANTHER MAMA &amp;amp; KIDS LLC&quot; title=&quot;Copy&quot;&gt;&lt;/span&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;span class=&quot;copilot-copy&quot; data-copy=&quot;225070363866&quot;&gt;225070363866&lt;/span&gt; &lt;span class=&quot;copilot-copy-icon&quot; data-copy=&quot;225070363866&quot; title=&quot;Copy&quot;&gt;&lt;/span&gt; &lt;span class=&quot;copilot-tag copilot-tag-white&quot;&gt;Business Formation - Silver&lt;/span&gt;&lt;/b&gt;&lt;/div&gt;&lt;span class=&quot;company-search-toggle&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;a href=&quot;#&quot; class=&quot;copilot-kb&quot; data-state=&quot;Massachusetts&quot; data-otype=&quot;Main Orders&quot;&gt;Massachusetts&lt;/a&gt;&lt;/div&gt;&lt;div&gt;&lt;span class=&quot;address-wrapper&quot;&gt;&lt;a href=&quot;#&quot; class=&quot;copilot-address&quot; data-address=&quot;28 Church St, Ste 14 #5693, Winchester, MA 01890&quot;&gt;28 Church St&lt;br&gt;Ste 14 #5693&lt;br&gt;Winchester, MA 01890&lt;/a&gt; &lt;span class=&quot;copilot-tag copilot-tag-green&quot;&gt;VA&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;company-purpose&quot;&gt;&lt;span class=&quot;copilot-copy&quot; data-copy=&quot;Empowering moms and offering quality products for babies and children&quot;&gt;Empowering moms and offering quality products for babies and children&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span class=&quot;copilot-tag copilot-tag-green&quot;&gt;RA: S&lt;/span&gt; &lt;span class=&quot;copilot-tag copilot-tag-green&quot;&gt;VA: S&lt;/span&gt;&lt;/div&gt;" data-mode="info"><div class="company-summary-highlight"><div><b><a href="https://db.incfile.com/incfile/order/detail/225070363866#" class="copilot-sos" data-url="https://corp.sec.state.ma.us/corpweb/CorpSearch/CorpSearch.aspx" data-query="PANTHER MAMA &amp; KIDS LLC" data-type="name">PANTHER MAMA &amp; KIDS LLC</a> <span class="copilot-copy-icon" data-copy="PANTHER MAMA &amp; KIDS LLC" title="Copy"></span></b></div><div><b><span class="copilot-copy" data-copy="225070363866">225070363866</span> <span class="copilot-copy-icon" data-copy="225070363866" title="Copy"></span> <span class="copilot-tag copilot-tag-white">Business Formation - Silver</span></b></div><span class="company-search-toggle"></span></div><div><a href="https://db.incfile.com/incfile/order/detail/225070363866#" class="copilot-kb" data-state="Massachusetts" data-otype="Main Orders">Massachusetts</a></div><div><span class="address-wrapper"><a href="https://db.incfile.com/incfile/order/detail/225070363866#" class="copilot-address" data-address="28 Church St, Ste 14 #5693, Winchester, MA 01890">28 Church St<br>Ste 14 #5693<br>Winchester, MA 01890</a> <span class="copilot-tag copilot-tag-green">VA</span></span></div><div class="company-purpose"><span class="copilot-copy" data-copy="Empowering moms and offering quality products for babies and children">Empowering moms and offering quality products for babies and children</span></div><div><span class="copilot-tag copilot-tag-green">RA: S</span> <span class="copilot-tag copilot-tag-green">VA: S</span></div></div>
            <div class="white-box quick-summary-content quick-summary-collapsed" id="quick-summary" style="margin-bottom: 10px; max-height: 0px;">
                <div style="margin-left:10px"><b><span class="copilot-copy" data-copy="Edna Barreto">Edna Barreto</span></b><br><span class="copilot-tag">MEMBER</span> <span class="copilot-tag">CLIENT</span> <span class="copilot-tag">BILLING</span></div><hr style="border:none;border-top:1px solid #eee;margin:6px 0"><div style="margin-left:10px"><b><span class="address-wrapper"><a href="https://db.incfile.com/incfile/order/detail/225070363866#" class="copilot-address" data-address="28 Church St, Ste 14 #5693, Winchester, MA 01890">28 Church St<br>Ste 14 #5693<br>Winchester, MA 01890</a> <span class="copilot-tag copilot-tag-green">VA</span></span></b><br><span class="copilot-tag">Company</span> <span class="copilot-tag">Member 1</span></div>
            </div>
        
            <div id="billing-section-label" class="section-label">BILLING:</div>
            <div id="billing-section-box" class="white-box" style="margin-bottom:10px">
                <div><b><span class="copilot-copy" data-copy="Edna Barreto">Edna Barreto</span></b></div><div><span class="copilot-copy" data-copy="Visa">Visa</span>  <span class="copilot-copy" data-copy="8642">8642</span>  <span class="copilot-copy" data-copy="01/29">01/29</span></div><div><span class="address-wrapper"><a href="https://db.incfile.com/incfile/order/detail/225070363866#" class="copilot-address" data-address="308 Quarry St, Quincy, MA 02860, US">308 Quarry St<br>Quincy, MA 02860, US</a><span class="copilot-usps" data-address="308 Quarry St, Quincy, MA 02860, US" title="USPS Lookup"> </span><span class="copilot-copy-icon" data-copy="308 Quarry St, Quincy, MA 02860, US" title="Copy"></span></span></div>
            </div>
            <div id="client-section-label" class="section-label">CLIENT:</div>
            <div id="client-section-box" class="white-box" style="margin-bottom:10px">
                <div><b><span class="copilot-copy copilot-name" data-copy="Edna Barreto">Edna Barreto</span></b> (<a href="https://db.incfile.com/incfile/companies/1357604" class="copilot-link" target="_blank">1357604</a>)</div><div><span class="copilot-tag">MEMBER</span> <span class="copilot-tag">CLIENT</span> <span class="copilot-tag">BILLING</span></div><div><a href="mailto:contato%40panthermamakids.com" class="copilot-link">contato@panthermamakids.com</a>  617-682-0347</div><div>Companies: <span class="copilot-copy" data-copy="1">1</span>  LTV: <span class="copilot-copy" data-copy="$0.00">$0.00</span></div>
            </div>
            <div class="section-label">AGENT:</div>
            <div class="white-box" style="margin-bottom:10px">
                <div><b><span class="copilot-copy copilot-name" data-copy="REPUBLIC REGISTERED AGENT INC.">REPUBLIC REGISTERED AGENT INC.</span></b></div><div><span class="address-wrapper"><a href="https://db.incfile.com/incfile/order/detail/225070363866#" class="copilot-address" data-address="28 Church St Ste 14, Winchester, MA 01890">28 Church St Ste 14<br>Winchester, MA 01890</a><span class="copilot-usps" data-address="28 Church St Ste 14, Winchester, MA 01890" title="USPS Lookup"> </span><span class="copilot-copy-icon" data-copy="28 Church St Ste 14, Winchester, MA 01890" title="Copy"></span></span></div><div><span class="copilot-tag copilot-tag-green">Active (Jul 03, 2026)</span></div>
            </div>
            <div class="section-label">MEMBERS:</div>
            <div class="white-box" style="margin-bottom:10px">
                
                    <div><b><span class="copilot-copy copilot-name" data-copy="Edna Barreto">Edna Barreto</span></b></div>
                    <div><span class="address-wrapper"><a href="https://db.incfile.com/incfile/order/detail/225070363866#" class="copilot-address" data-address="28 Church St, Ste 14 #5693, Winchester, MA 01890">28 Church St<br>Ste 14 #5693<br>Winchester, MA 01890</a> <span class="copilot-tag copilot-tag-green">VA</span></span></div>
                
            </div><div id="review-mode-label" class="review-mode-label" style="display: block; margin-top: 4px; text-align: center; font-size: 11px;">REVIEW MODE</div></div>
                    </div><div id="quick-actions-menu" style="display: none;"><div class="qa-title">QUICK ACTIONS</div><ul><li id="qa-emails">Emails</li><li id="qa-cancel">Cancel</li><li id="qa-coda">CODA SEARCH</li></ul></div></body><text-blaze-app-reference style="display: contents !important;"><template shadowrootmode="closed"><style>
      div:before {
        content: attr(data-content);
      }
      div {
        all: initial;
        position: absolute;
        border: 0;
        margin: -1px;
        padding: 0;
        width: 0.1px;
        height: 0.1px;
        user-select: none;
        overflow: hidden;
        font-size: 0px;
        clip: rect(0, 0, 0, 0);
        white-space: nowrap;
        pointer-events: none;
      }
      @media print {
        * {
          display: none !important;
        }
      }
      </style><div aria-label="text-blaze-integration" role="group" tabindex="-1" data-content="{&quot;extensionEnabled&quot;:true,&quot;text&quot;:true}" dir="ltr"></div></template></text-blaze-app-reference></html>